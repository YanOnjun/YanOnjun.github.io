<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Controller层的优化</title>
    <url>/2023/05/06/Java/Contoller%E5%B1%82%E7%9A%84%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>给Controller层的工作有以下几项：</p>
<ul>
<li>解析请求参数</li>
<li>调用service执行业务代码</li>
<li>捕获异常和执行成功返回</li>
</ul>
<p>在这样的工作开发controller会存在以下<strong>问题</strong>：</p>
<ul>
<li><p>异常反馈和成功相应结果返回不统一，接口不友好</p>
</li>
<li><p>参数校验耦合业务，违背单一职责</p>
</li>
</ul>
<span id="more"></span>

<h1 id="改造"><a href="#改造" class="headerlink" title="改造"></a>改造</h1><h2 id="统一返回结构"><a href="#统一返回结构" class="headerlink" title="统一返回结构"></a>统一返回结构</h2><p>一般来说，返回结构需要表现得清晰，让对接接口的人清楚是否调用成功，而不是通过返回一些空值、异常值来判断。</p>
<p>常用的做法是使用一个状态码，信息，和返回数据组成一组返回数据，可以更清楚的了解到接口调用的情况。</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 返回结果的枚举</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">ResultEnum</span>&#123;</span><br><span class="line">    </span><br><span class="line">    SUCCESS(<span class="number">20001</span>, <span class="string">&quot;接口调用成功&quot;</span>),</span><br><span class="line">    VALIDATE_FAILED(<span class="number">40001</span>, <span class="string">&quot;参数校验失败&quot;</span>),</span><br><span class="line">    COMMON_FAILED(<span class="number">40000</span>, <span class="string">&quot;接口调用失败&quot;</span>),</span><br><span class="line">    NO_AUTH(<span class="number">40100</span>, <span class="string">&quot;没有访问权限&quot;</span>),</span><br><span class="line"></span><br><span class="line">    NOT_LOGIN(<span class="number">40101</span>, <span class="string">&quot;没有登录&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Integer code;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String message;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">ResultEnum</span><span class="params">(Integer code, String message)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMessage</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 统一返回结果</span></span><br><span class="line"><span class="comment"> * 这里用到了 lombok 没有引入 lombok 的 需要自己写一下构造器和get set方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Result</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">success</span><span class="params">(T data)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(ResultEnum.SUCCESS.getCode(), ResultEnum.SUCCESS.getMessage(), data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">success</span><span class="params">(String message, T data)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(ResultEnum.SUCCESS.getCode(), message, data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result&lt;?&gt; failed(String message) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(ResultEnum.COMMON_FAILED.getCode(), message, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result&lt;?&gt; failed(BusinessException errorResult) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(errorResult.getCode(), errorResult.getMessage(), <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">instance</span><span class="params">(Integer code, String message, T data)</span> &#123;</span><br><span class="line">        Result&lt;T&gt; result = <span class="keyword">new</span> <span class="title class_">Result</span>&lt;T&gt;();</span><br><span class="line">        result.setCode(code);</span><br><span class="line">        result.setMessage(message);</span><br><span class="line">        result.setData(data);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样就是定义好了返回的结构了</p>
<p>但是要在代码中每一个方法都去写一个重复的使用返回结果的代码会很麻烦</p>
<p>我们可以统一包装处理进行返回</p>
<h2 id="包装返回"><a href="#包装返回" class="headerlink" title="包装返回"></a>包装返回</h2><p>Spring 提供了一个类 ResponseBodyAdvice </p>
<p>这个类是对 Controller 层返回的内容在 HttpMessageConverter 进行类型转换之前进行拦截，在这个类中完成相应的处理之后，再返回结果，在这个流程中，就可以对返回的结果包装到 Result 里面。</p>
<p>ResponseBodyAdvice 有两个方法：</p>
<ul>
<li>supports：判断是否要交给 beforeBodyWrite 方法执行</li>
<li>beforeBodyWrite：对 response 进行具体的处理</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestControllerAdvice(basePackages = &quot;controller包的地址&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseAdvice</span> <span class="keyword">implements</span> <span class="title class_">ResponseBodyAdvice</span>&lt;Object&gt;&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** </span></span><br><span class="line"><span class="comment">     * 处理 String 类型的返回值时 会出现问题: xxx.包装类 cannot be cast to java.lang.String</span></span><br><span class="line"><span class="comment">     * String 类型的 selectedConverterType 参数值是 org.springframework.http.converter.StringHttpMessageConverter</span></span><br><span class="line"><span class="comment">     * 而其他数据类型的值是 org.springframework.http.converter.json.MappingJackson2HttpMessageConverter</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">beforeBodyWrite</span><span class="params">(Object data, MethodParameter returnType, MediaType selectedContentType,</span></span><br><span class="line"><span class="params">            Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; selectedConverterType, ServerHttpRequest request, ServerHttpResponse response)</span> &#123;</span><br><span class="line">        <span class="comment">// 如果返回值是 Result 类型 则不再进行处理</span></span><br><span class="line">        <span class="keyword">if</span> (data <span class="keyword">instanceof</span> Result) &#123;</span><br><span class="line">            <span class="keyword">return</span> data;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Result.success(data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">supports</span><span class="params">(MethodParameter returnType, Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; converterType)</span> &#123;</span><br><span class="line">        <span class="comment">// 判断是否要交给beforeBodyWrite处理</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用这种方式就可以完成在返回结果之前，包装好返回的内容</p>
<p>但是使用这个在返回类型为 String 的情况下会出现一点问题，在 beforeBodyWrite 中描述了问题原因，而这个原因是因为转换器的顺序导致的 所以我们需要在配置中调换一下转换器的顺序，</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Configuration</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 交换 MappingJackson2HttpMessageConverter 到 HttpMessageConverter 的第一位 防止出现使用 StringHttpMessageConverter 的情况</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureMessageConverters</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; converters.size(); i++) &#123;</span><br><span class="line">            <span class="comment">// 找到 MappingJackson2HttpMessageConverter 并且与第一个进行交换</span></span><br><span class="line">            <span class="keyword">if</span> (converters.get(i) <span class="keyword">instanceof</span> MappingJackson2HttpMessageConverter) &#123;</span><br><span class="line">                HttpMessageConverter&lt;?&gt; converter = converters.get(i);</span><br><span class="line">                converters.set(i, converters.get(<span class="number">0</span>));</span><br><span class="line">                converters.set(<span class="number">0</span>, converter);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>成功结果响应就完成了</p>
<h2 id="异常响应"><a href="#异常响应" class="headerlink" title="异常响应"></a>异常响应</h2><p>对于异常结果也需要进行包装返回，并且要屏蔽掉报错的栈信息，避免暴露出服务的内部情况。而且对于抛出错误的返回，与成功返回结果结构是不一致的。</p>
<p>对此需要自定义异常和对异常进行拦截返回。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BusinessException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> code;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String message;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BusinessException</span><span class="params">(ResultEnum result)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(result.getMessage());</span><br><span class="line">        <span class="built_in">this</span>.code = result.getCode();</span><br><span class="line">        <span class="built_in">this</span>.message = result.getMessage();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BusinessException</span><span class="params">(ResultEnum result, String message)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message);</span><br><span class="line">        <span class="built_in">this</span>.code = result.getCode();</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMessage</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>异常拦截</p>
<p>这里异常处理的流程比较简单，可以根据情况进行补充</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">     <span class="meta">@ExceptionHandler(BusinessException.class)</span></span><br><span class="line">     <span class="keyword">public</span> Result&lt;?&gt; handlerBusinessException(BusinessException e) &#123;</span><br><span class="line">         <span class="keyword">return</span> Result.failed(e);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(RuntimeException.class)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;?&gt; handlerRuntimeException(RuntimeException e) &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.failed(e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="解析请求参数"><a href="#解析请求参数" class="headerlink" title="解析请求参数"></a>解析请求参数</h2>]]></content>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Golang</title>
    <url>/2023/03/26/Golang/Golang/</url>
    <content><![CDATA[<p>Golang官方教程  <a href="https://tour.go-zh.org/welcome/1">https://tour.go-zh.org/welcome/1</a></p>
<h1 id="包、变量和函数"><a href="#包、变量和函数" class="headerlink" title="包、变量和函数"></a>包、变量和函数</h1><p>每个 Go 程序都是由包构成的。</p>
<p>程序从 <code>main</code> 包开始运行。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;math&quot;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>此代码用圆括号组合了导入，这是“分组”形式的导入语句。</p>
<p>当然你也可以编写多个导入语句，例如：</p>
<span id="more"></span>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;math&quot;</span></span><br></pre></td></tr></table></figure>

<p>不过使用分组导入语句是更好的形式。</p>
<p>在 Go 中，如果一个名字以大写字母开头，那么它就是已导出的。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">math.Pi</span><br></pre></td></tr></table></figure>

<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>函数可以没有参数或接受多个参数。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x <span class="type">int</span>, y <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当连续两个或多个函数的已命名形参类型相同时，除最后一个类型以外，其它都可以省略。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x, y <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>函数可以返回任意数量的返回值。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(x, y <span class="type">string</span>)</span></span> (<span class="type">string</span>, <span class="type">string</span>) &#123;</span><br><span class="line">	<span class="keyword">return</span> y, x</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Go 的返回值可被命名，它们会被视作定义在函数顶部的变量。</p>
<p>没有参数的 <code>return</code> 语句返回已命名的返回值。也就是 <code>直接</code> 返回。</p>
<p>直接返回语句应当仅用在下面这样的短函数中。在长的函数中它们会影响代码的可读性。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">split</span><span class="params">(sum <span class="type">int</span>)</span></span> (x, y <span class="type">int</span>) &#123;</span><br><span class="line">	x = sum * <span class="number">4</span> / <span class="number">9</span></span><br><span class="line">	y = sum - x</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p><code>var</code> 语句用于声明一个变量列表，跟函数的参数列表一样，类型在最后。</p>
<p><code>var</code> 语句可以出现在包或函数级别。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> c, python, java <span class="type">bool</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> i <span class="type">int</span></span><br><span class="line">	fmt.Println(i, c, python, java)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>变量声明可以包含初始值，每个变量对应一个。</p>
<p>如果初始化值已存在，则可以省略类型；变量会从初始值中获得类型。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> i, j <span class="type">int</span> = <span class="number">1</span>, <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> c, python, java = <span class="literal">true</span>, <span class="literal">false</span>, <span class="string">&quot;no!&quot;</span></span><br><span class="line">	fmt.Println(i, j, c, python, java)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>没有明确初始值的变量声明会被赋予它们的 <strong>零值</strong>。</p>
<p>零值是：</p>
<ul>
<li>数值类型为 <code>0</code>，</li>
<li>布尔类型为 <code>false</code>，</li>
<li>字符串为 <code>&quot;&quot;</code>（空字符串）。</li>
</ul>
<p>在函数中，简洁赋值语句 <code>:=</code> 可在类型明确的地方代替 <code>var</code> 声明。</p>
<p>函数外的每个语句都必须以关键字开始（<code>var</code>, <code>func</code> 等等），因此 <code>:=</code> 结构不能在函数外使用。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> i, j <span class="type">int</span> = <span class="number">1</span>, <span class="number">2</span></span><br><span class="line">	k := <span class="number">3</span></span><br><span class="line">	c, python, java := <span class="literal">true</span>, <span class="literal">false</span>, <span class="string">&quot;no!&quot;</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(i, j, k, c, python, java)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="基本类型"><a href="#基本类型" class="headerlink" title="基本类型"></a>基本类型</h2><p>Go 的基本类型有</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bool</span><br><span class="line"></span><br><span class="line">string</span><br><span class="line"></span><br><span class="line">int  int8  int16  int32  int64</span><br><span class="line">uint uint8 uint16 uint32 uint64 uintptr</span><br><span class="line"></span><br><span class="line">byte // uint8 的别名</span><br><span class="line"></span><br><span class="line">rune // int32 的别名</span><br><span class="line">    // 表示一个 Unicode 码点</span><br><span class="line"></span><br><span class="line">float32 float64</span><br><span class="line"></span><br><span class="line">complex64 complex128</span><br></pre></td></tr></table></figure>

<p><code>int</code>, <code>uint</code> 和 <code>uintptr</code> 在 32 位系统上通常为 32 位宽，在 64 位系统上则为 64 位宽。 当你需要一个整数值时应使用 <code>int</code> 类型</p>
<p> 同导入语句一样，变量声明也可以“分组”成一个语法块</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> (</span><br><span class="line">	ToBe   <span class="type">bool</span>       = <span class="literal">false</span></span><br><span class="line">	MaxInt <span class="type">uint64</span>     = <span class="number">1</span>&lt;&lt;<span class="number">64</span> - <span class="number">1</span></span><br><span class="line">	z      <span class="type">complex128</span> = cmplx.Sqrt(<span class="number">-5</span> + <span class="number">12i</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="类型转化"><a href="#类型转化" class="headerlink" title="类型转化"></a>类型转化</h2><p>Go 在不同类型的项之间赋值时需要显式转换</p>
<p>表达式 <code>T(v)</code> 将值 <code>v</code> 转换为类型 <code>T</code>。</p>
<p>一些关于数值的转换：</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> i <span class="type">int</span> = <span class="number">42</span></span><br><span class="line"><span class="keyword">var</span> f <span class="type">float64</span> = <span class="type">float64</span>(i)</span><br><span class="line"><span class="keyword">var</span> u <span class="type">uint</span> = <span class="type">uint</span>(f)</span><br></pre></td></tr></table></figure>

<p>或者，更加简单的形式：</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">i := <span class="number">42</span></span><br><span class="line">f := <span class="type">float64</span>(i)</span><br><span class="line">u := <span class="type">uint</span>(f)</span><br></pre></td></tr></table></figure>

<h2 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h2><p>常量的声明与变量类似，只不过是使用 <code>const</code> 关键字。</p>
<p>常量可以是字符、字符串、布尔值或数值。</p>
<p>常量不能用 <code>:=</code> 语法声明。</p>
<h1 id="流程控制语句：for、if、else、switch-和-defer"><a href="#流程控制语句：for、if、else、switch-和-defer" class="headerlink" title="流程控制语句：for、if、else、switch 和 defer"></a>流程控制语句：for、if、else、switch 和 defer</h1><h2 id="for"><a href="#for" class="headerlink" title="for"></a>for</h2><p>Go 只有一种循环结构：<code>for</code> 循环。</p>
<p>基本的 <code>for</code> 循环由三部分组成，它们用分号隔开：</p>
<ul>
<li>初始化语句：在第一次迭代前执行</li>
<li>条件表达式：在每次迭代前求值</li>
<li>后置语句：在每次迭代的结尾执行</li>
</ul>
<p>初始化语句通常为一句短变量声明，该变量声明仅在 <code>for</code> 语句的作用域中可见。</p>
<p>一旦条件表达式的布尔值为 <code>false</code>，循环迭代就会终止。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">	sum += i</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>初始化语句和后置语句可以去掉 此时分号也可以去掉  类似while</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> sum&lt;<span class="number">1000</span> &#123;</span><br><span class="line">	sum += sum</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>省略条件则形成无限循环</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="if"><a href="#if" class="headerlink" title="if"></a>if</h2><p>Go 的 <code>if</code> 语句表达式外无需小括号 <code>( )</code> ，而大括号 <code>&#123; &#125;</code> 则是必须的。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> x &lt; <span class="number">0</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> sqrt(-x) + <span class="string">&quot;i&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>if</code> 语句可以在条件表达式前执行一个简单的语句。该语句声明的变量作用域仅在 <code>if</code> 和 <code>else</code> 之内</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> v := math.Pow(x, n); v &lt; lim &#123;</span><br><span class="line">    <span class="keyword">return</span> v + <span class="number">1</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> v</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="switch"><a href="#switch" class="headerlink" title="switch"></a>switch</h2><p><code>switch</code> 是编写一连串 <code>if - else</code> 语句的简便方法。它运行第一个值等于条件表达式的 case 语句</p>
<p> Go 只运行选定的 case，而非之后所有的 case。Go 自动提供了在这些语言中每个 case 后面所需的 <code>break</code> 语句,除非以 <code>fallthrough</code> 语句结束，否则分支会自动终止。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> os := runtime.GOOS; os &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;darwin&quot;</span>:</span><br><span class="line">		fmt.Println(<span class="string">&quot;OS X.&quot;</span>)</span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;linux&quot;</span>:</span><br><span class="line">		fmt.Println(<span class="string">&quot;Linux.&quot;</span>)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		<span class="comment">// freebsd, openbsd,</span></span><br><span class="line">		<span class="comment">// plan9, windows...</span></span><br><span class="line">		fmt.Printf(<span class="string">&quot;%s.\n&quot;</span>, os)</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure>

<p>没有条件的 switch 同 <code>switch true</code> 一样。</p>
<p>这种形式能将一长串 if-then-else 写得更加清晰。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> &#123;</span><br><span class="line">	<span class="keyword">case</span> t.Hour() &lt; <span class="number">12</span>:</span><br><span class="line">		fmt.Println(<span class="string">&quot;Good morning!&quot;</span>)</span><br><span class="line">	<span class="keyword">case</span> t.Hour() &lt; <span class="number">17</span>:</span><br><span class="line">		fmt.Println(<span class="string">&quot;Good afternoon.&quot;</span>)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		fmt.Println(<span class="string">&quot;Good evening.&quot;</span>)</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure>

<h2 id="defer"><a href="#defer" class="headerlink" title="defer"></a>defer</h2><p>defer 语句会将函数推迟到外层函数返回之后执行。</p>
<p>推迟调用的函数其参数会立即求值，但直到外层函数返回前该函数都不会被调用。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;world&quot;</span>)</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//hello</span></span><br><span class="line"><span class="comment">//world</span></span><br></pre></td></tr></table></figure>

<p>推迟的函数调用会被压入一个栈中。当外层函数返回时，被推迟的函数会按照后进先出的顺序调用。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;counting&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(i)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;done&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="更多类型：struct、slice-和映射"><a href="#更多类型：struct、slice-和映射" class="headerlink" title="更多类型：struct、slice 和映射"></a>更多类型：struct、slice 和映射</h1><h2 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h2><p>Go 拥有指针。指针保存了值的内存地址。</p>
<p>类型 <code>*T</code> 是指向 <code>T</code> 类型值的指针。其零值为 <code>nil</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var p *int</span><br></pre></td></tr></table></figure>

<p><code>&amp;</code> 操作符会生成一个指向其操作数的指针。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">i := 42</span><br><span class="line">p = &amp;i</span><br></pre></td></tr></table></figure>

<p><code>*</code> 操作符表示指针指向的底层值。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fmt.Println(*p) // 通过指针 p 读取 i</span><br><span class="line">*p = 21         // 通过指针 p 设置 i</span><br></pre></td></tr></table></figure>

<p>这也就是通常所说的“间接引用”或“重定向”。</p>
<p>Go 没有指针运算。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	i, j := <span class="number">42</span>, <span class="number">2701</span></span><br><span class="line"></span><br><span class="line">	p := &amp;i         <span class="comment">// 指向 i</span></span><br><span class="line">	fmt.Println(*p) <span class="comment">// 通过指针读取 i 的值</span></span><br><span class="line">	*p = <span class="number">21</span>         <span class="comment">// 通过指针设置 i 的值</span></span><br><span class="line">	fmt.Println(i)  <span class="comment">// 查看 i 的值</span></span><br><span class="line"></span><br><span class="line">	p = &amp;j         <span class="comment">// 指向 j</span></span><br><span class="line">	*p = *p / <span class="number">37</span>   <span class="comment">// 通过指针对 j 进行除法运算</span></span><br><span class="line">	fmt.Println(j) <span class="comment">// 查看 j 的值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h2><p>一个结构体（<code>struct</code>）就是一组字段（field）。</p>
<p>结构体字段使用点号来访问。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Vertex <span class="keyword">struct</span> &#123;</span><br><span class="line">	X <span class="type">int</span></span><br><span class="line">	Y <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    v := Vertex&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">    v.X = <span class="number">4</span></span><br><span class="line">	fmt.Println(v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结构体字段可以通过结构体指针来访问。</p>
<p>如果我们有一个指向结构体的指针 <code>p</code>，那么可以通过 <code>(*p).X</code> 来访问其字段 <code>X</code>。不过这么写太啰嗦了，所以语言也允许我们使用隐式间接引用，直接写 <code>p.X</code> 就可以。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	v := Vertex&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">	p := &amp;v</span><br><span class="line">	p.X = <span class="number">1e9</span></span><br><span class="line">	fmt.Println(v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结构体文法通过直接列出字段的值来新分配一个结构体。</p>
<p>使用 <code>Name:</code> 语法可以仅列出部分字段。（字段名的顺序无关。）</p>
<p>特殊的前缀 <code>&amp;</code> 返回一个指向结构体的指针。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> (</span><br><span class="line">	v1 = Vertex&#123;<span class="number">1</span>, <span class="number">2</span>&#125;  <span class="comment">// 创建一个 Vertex 类型的结构体</span></span><br><span class="line">	v2 = Vertex&#123;X: <span class="number">1</span>&#125;  <span class="comment">// Y:0 被隐式地赋予</span></span><br><span class="line">	v3 = Vertex&#123;&#125;      <span class="comment">// X:0 Y:0</span></span><br><span class="line">	p  = &amp;Vertex&#123;<span class="number">1</span>, <span class="number">2</span>&#125; <span class="comment">// 创建一个 *Vertex 类型的结构体（指针）</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><p>类型 <code>[n]T</code> 表示拥有 <code>n</code> 个 <code>T</code> 类型的值的数组。</p>
<p>表达式</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var a [10]int</span><br></pre></td></tr></table></figure>

<p>会将变量 <code>a</code> 声明为拥有 10 个整数的数组。</p>
<p>数组的长度是其类型的一部分，因此数组不能改变大小。</p>
<h2 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h2><p>每个数组的大小都是固定的。而切片则为数组元素提供动态大小的、灵活的视角。在实践中，切片比数组更常用。</p>
<p>类型 <code>[]T</code> 表示一个元素类型为 <code>T</code> 的切片。</p>
<p>切片通过两个下标来界定，即一个上界和一个下界，二者以冒号分隔：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">a[low : high]</span><br></pre></td></tr></table></figure>

<p>它会选择一个半开区间，包括第一个元素，但排除最后一个元素。</p>
<p>以下表达式创建了一个切片，它包含 <code>a</code> 中下标从 1 到 3 的元素：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">a[1:4]</span><br></pre></td></tr></table></figure>

<p>切片并不存储任何数据，它只是描述了底层数组中的一段。</p>
<p>更改切片的元素会修改其底层数组中对应的元素。</p>
<p>与它共享底层数组的切片都会观测到这些修改。</p>
<p>切片文法类似于没有长度的数组文法。</p>
<p>这是一个数组文法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[3]bool&#123;true, true, false&#125;</span><br></pre></td></tr></table></figure>

<p>下面这样则会创建一个和上面相同的数组，然后构建一个引用了它的切片：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[]bool&#123;true, true, false&#125;</span><br></pre></td></tr></table></figure>



<p>在进行切片时，你可以利用它的默认行为来忽略上下界。</p>
<p>切片下界的默认值为 <code>0</code>，上界则是该切片的长度。</p>
<p>对于数组</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var a [10]int</span><br></pre></td></tr></table></figure>

<p>来说，以下切片是等价的：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">a[0:10]</span><br><span class="line">a[:10]</span><br><span class="line">a[0:]</span><br><span class="line">a[:]</span><br></pre></td></tr></table></figure>

<p>切片拥有 <strong>长度</strong> 和 <strong>容量</strong>。</p>
<p>切片的长度就是它所包含的元素个数。</p>
<p>切片的容量是从切片的第一个元素开始数，到其底层数组元素末尾的个数。</p>
<p>切片 <code>s</code> 的长度和容量可通过表达式 <code>len(s)</code> 和 <code>cap(s)</code> 来获取。</p>
<p>切片的零值是 <code>nil</code>。</p>
<p>nil 切片的长度和容量为 0 且没有底层数组。</p>
<p><strong>用 make 创建切片</strong></p>
<p>切片可以用内建函数 <code>make</code> 来创建，这也是你创建动态数组的方式。</p>
<p><code>make</code> 函数会分配一个元素为零值的数组并返回一个引用了它的切片：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">a := make([]int, 5)  // len(a)=5</span><br></pre></td></tr></table></figure>

<p>要指定它的容量，需向 <code>make</code> 传入第三个参数：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">b := make([]int, 0, 5) // len(b)=0, cap(b)=5</span><br></pre></td></tr></table></figure>



<p>为切片追加新的元素是种常用的操作，为此 Go 提供了内建的 <code>append</code> 函数。内建函数的<a href="https://go-zh.org/pkg/builtin/#append">文档</a>对此函数有详细的介绍。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">func append(s []T, vs ...T) []T</span><br></pre></td></tr></table></figure>

<p><code>append</code> 的第一个参数 <code>s</code> 是一个元素类型为 <code>T</code> 的切片，其余类型为 <code>T</code> 的值将会追加到该切片的末尾。</p>
<p><code>append</code> 的结果是一个包含原切片所有元素加上新添加元素的切片。</p>
<p>当 <code>s</code> 的底层数组太小，不足以容纳所有给定的值时，它就会分配一个更大的数组。返回的切片会指向这个新分配的数组。</p>
<p><strong>文章 <a href="https://blog.go-zh.org/go-slices-usage-and-internals">Go 切片：用法和本质</a>。</strong></p>
<h2 id="Range"><a href="#Range" class="headerlink" title="Range"></a>Range</h2><p><code>for</code> 循环的 <code>range</code> 形式可遍历切片或映射。</p>
<p>当使用 <code>for</code> 循环遍历切片时，每次迭代都会返回两个值。第一个值为当前元素的下标，第二个值为该下标所对应元素的一份副本。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> pow = []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">16</span>, <span class="number">32</span>, <span class="number">64</span>, <span class="number">128</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i, v := <span class="keyword">range</span> pow &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;2**%d = %d\n&quot;</span>, i, v)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以将下标或值赋予 <code>_</code> 来忽略它。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for i, _ := range pow</span><br><span class="line">for _, value := range pow</span><br></pre></td></tr></table></figure>

<p>若只需要索引，忽略第二个变量即可。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for i := range pow</span><br></pre></td></tr></table></figure>

<h2 id="练习：切片"><a href="#练习：切片" class="headerlink" title="练习：切片"></a>练习：切片</h2><p>实现 <code>Pic</code>。它应当返回一个长度为 <code>dy</code> 的切片，其中每个元素是一个长度为 <code>dx</code>，元素类型为 <code>uint8</code> 的切片。当你运行此程序时，它会将每个整数解释为灰度值（好吧，其实是蓝度值）并显示它所对应的图像。</p>
<p>图像的选择由你来定。几个有趣的函数包括 <code>(x+y)/2</code>, <code>x*y</code>, <code>x^y</code>, <code>x*log(y)</code> 和 <code>x%(y+1)</code>。</p>
<p>（提示：需要使用循环来分配 <code>[][]uint8</code> 中的每个 <code>[]uint8</code>；请使用 <code>uint8(intValue)</code> 在类型之间转换；你可能会用到 <code>math</code> 包中的函数。）</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;golang.org/x/tour/pic&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Pic</span><span class="params">(dx, dy <span class="type">int</span>)</span></span> [][]<span class="type">uint8</span> &#123;</span><br><span class="line">	dySlice := [][]<span class="type">uint8</span>&#123;&#125;</span><br><span class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;dy; i++ &#123;</span><br><span class="line">		dxSlice := <span class="built_in">make</span>([]<span class="type">uint8</span>,dx)</span><br><span class="line">		<span class="keyword">for</span> j:=<span class="number">0</span>; j&lt;dx; j++ &#123;</span><br><span class="line">			dxSlice[j] = <span class="type">uint8</span>((i%(j+<span class="number">1</span>)))</span><br><span class="line">		&#125;</span><br><span class="line">		dySlice = <span class="built_in">append</span>(dySlice, dxSlice)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> dySlice</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	pic.Show(Pic)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="映射"><a href="#映射" class="headerlink" title="映射"></a>映射</h2><p>映射将键映射到值。</p>
<p>映射的零值为 <code>nil</code> 。<code>nil</code> 映射既没有键，也不能添加键。</p>
<p><code>make</code> 函数会返回给定类型的映射，并将其初始化备用。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Vertex <span class="keyword">struct</span> &#123;</span><br><span class="line">	Lat, Long <span class="type">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> m <span class="keyword">map</span>[<span class="type">string</span>]Vertex</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	m = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]Vertex)</span><br><span class="line">	m[<span class="string">&quot;Bell Labs&quot;</span>] = Vertex&#123;</span><br><span class="line">		<span class="number">40.68433</span>, <span class="number">-74.39967</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(m[<span class="string">&quot;Bell Labs&quot;</span>])</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在映射 <code>m</code> 中插入或修改元素：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">m[key] = elem</span><br></pre></td></tr></table></figure>

<p>获取元素：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">elem = m[key]</span><br></pre></td></tr></table></figure>

<p>删除元素：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">delete(m, key)</span><br></pre></td></tr></table></figure>

<p>通过双赋值检测某个键是否存在：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">elem, ok = m[key]</span><br></pre></td></tr></table></figure>

<p>若 <code>key</code> 在 <code>m</code> 中，<code>ok</code> 为 <code>true</code> ；否则，<code>ok</code> 为 <code>false</code>。</p>
<p>若 <code>key</code> 不在映射中，那么 <code>elem</code> 是该映射元素类型的零值。</p>
<p>同样的，当从映射中读取某个不存在的键时，结果是映射的元素类型的零值。</p>
<h2 id="练习：映射"><a href="#练习：映射" class="headerlink" title="练习：映射"></a>练习：映射</h2><p>实现 <code>WordCount</code>。它应当返回一个映射，其中包含字符串 <code>s</code> 中每个“单词”的个数。函数 <code>wc.Test</code> 会对此函数执行一系列测试用例，并输出成功还是失败。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">WordCount</span><span class="params">(s <span class="type">string</span>)</span></span> <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span> &#123;</span><br><span class="line">	strs := strings.Fields(s)</span><br><span class="line">	m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>)</span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> strs &#123;</span><br><span class="line">		elem := m[v] + <span class="number">1</span></span><br><span class="line">		m[v] = elem</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> m</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	wc.Test(WordCount)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="H:\Users\zx065\Desktop\Java\Untitled.assets\image-20230317085357965.png" alt="image-20230317085357965"></p>
<h2 id="函数的闭包"><a href="#函数的闭包" class="headerlink" title="函数的闭包"></a>函数的闭包</h2><p>Go 函数可以是一个闭包。闭包是一个函数值，它引用了其函数体之外的变量。该函数可以访问并赋予其引用的变量的值，换句话说，该函数被这些变量“绑定”在一起。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">adder</span><span class="params">()</span></span> <span class="function"><span class="keyword">func</span><span class="params">(<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	sum := <span class="number">0</span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(x <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">		sum += x</span><br><span class="line">		<span class="keyword">return</span> sum</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	pos, neg := adder(), adder()</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		fmt.Println(</span><br><span class="line">			pos(i),</span><br><span class="line">			neg(<span class="number">-2</span>*i),</span><br><span class="line">		)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="练习：斐波纳契闭包"><a href="#练习：斐波纳契闭包" class="headerlink" title="练习：斐波纳契闭包"></a>练习：斐波纳契闭包</h2><p>让我们用函数做些好玩的事情。</p>
<p>实现一个 <code>fibonacci</code> 函数，它返回一个函数（闭包），该闭包返回一个<a href="https://zh.wikipedia.org/wiki/%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97">斐波纳契数列</a> <code>(0, 1, 1, 2, 3, 5, ...)</code>。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fibonacci</span><span class="params">()</span></span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	first := <span class="number">0</span></span><br><span class="line">	second := <span class="number">1</span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">		back := first</span><br><span class="line">		first, second = second, first + second</span><br><span class="line">		<span class="keyword">return</span> back</span><br><span class="line">	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	f := fibonacci()</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		fmt.Println(f())</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="方法和接口"><a href="#方法和接口" class="headerlink" title="方法和接口"></a>方法和接口</h1><h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><p>Go 没有类。不过你可以为结构体类型定义方法。</p>
<p>方法就是一类带特殊的 <strong>接收者</strong> 参数的函数。</p>
<p>方法接收者在它自己的参数列表内，位于 <code>func</code> 关键字和方法名之间。</p>
<p>在此例中，<code>Abs</code> 方法拥有一个名为 <code>v</code>，类型为 <code>Vertex</code> 的接收者。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Vertex <span class="keyword">struct</span> &#123;</span><br><span class="line">	X, Y <span class="type">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(v Vertex)</span></span> Abs() <span class="type">float64</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> math.Sqrt(v.X*v.X + v.Y*v.Y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	v := Vertex&#123;<span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">	fmt.Println(v.Abs())</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>也可以为非结构体类型声明方法。</p>
<p>在此例中，我们看到了一个带 <code>Abs</code> 方法的数值类型 <code>MyFloat</code>。</p>
<p>只能为在同一包内定义的类型的接收者声明方法，而不能为其它包内定义的类型（包括 <code>int</code> 之类的内建类型）的接收者声明方法。</p>
<p>（译注：就是接收者的类型定义和方法声明必须在同一包内；不能为内建类型声明方法。）</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">type</span> MyFloat <span class="type">float64</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f MyFloat)</span></span> Abs() <span class="type">float64</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> f &lt; <span class="number">0</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="type">float64</span>(-f)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="type">float64</span>(f)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	f := MyFloat(-math.Sqrt2)</span><br><span class="line">	fmt.Println(f.Abs())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="指针接收者"><a href="#指针接收者" class="headerlink" title="指针接收者"></a>指针接收者</h2><p>你可以为指针接收者声明方法。</p>
<p>这意味着对于某类型 <code>T</code>，接收者的类型可以用 <code>*T</code> 的文法。（此外，<code>T</code> 不能是像 <code>*int</code> 这样的指针。）</p>
<p>例如，这里为 <code>*Vertex</code> 定义了 <code>Scale</code> 方法。</p>
<p>指针接收者的方法可以修改接收者指向的值（就像 <code>Scale</code> 在这做的）。由于方法经常需要修改它的接收者，指针接收者比值接收者更常用。</p>
<p>移除 <code>Scale</code> 函数声明中的 <code>*</code>，输出结果为5。</p>
<p>若使用值接收者，那么 <code>Scale</code> 方法会对原始 <code>Vertex</code> 值的副本进行操作。（对于函数的其它参数也是如此。）<code>Scale</code> 方法必须用指针接受者来更改 <code>main</code> 函数中声明的 <code>Vertex</code> 的值。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Vertex <span class="keyword">struct</span> &#123;</span><br><span class="line">	X, Y <span class="type">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(v Vertex)</span></span> Abs() <span class="type">float64</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> math.Sqrt(v.X*v.X + v.Y*v.Y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(v *Vertex)</span></span> Scale(f <span class="type">float64</span>) &#123;</span><br><span class="line">	v.X = v.X * f</span><br><span class="line">	v.Y = v.Y * f</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	v := Vertex&#123;<span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">	v.Scale(<span class="number">10</span>)</span><br><span class="line">	fmt.Println(v.Abs())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="方法与指针重定向"><a href="#方法与指针重定向" class="headerlink" title="方法与指针重定向"></a>方法与指针重定向</h2><p>带指针参数的函数必须接受一个指针：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var v Vertex</span><br><span class="line">ScaleFunc(v, 5)  // 编译错误！</span><br><span class="line">ScaleFunc(&amp;v, 5) // OK</span><br></pre></td></tr></table></figure>

<p>而以指针为接收者的方法被调用时，接收者既能为值又能为指针：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var v Vertex</span><br><span class="line">v.Scale(5)  // OK</span><br><span class="line">p := &amp;v</span><br><span class="line">p.Scale(10) // OK</span><br></pre></td></tr></table></figure>

<p>对于语句 <code>v.Scale(5)</code>，即便 <code>v</code> 是个值而非指针，带指针接收者的方法也能被直接调用。 也就是说，由于 <code>Scale</code> 方法有一个指针接收者，为方便起见，Go 会将语句 <code>v.Scale(5)</code> 解释为 <code>(&amp;v).Scale(5)</code>。</p>
<p>同样的事情也发生在相反的方向。</p>
<p>接受一个值作为参数的函数必须接受一个指定类型的值：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var v Vertex</span><br><span class="line">fmt.Println(AbsFunc(v))  // OK</span><br><span class="line">fmt.Println(AbsFunc(&amp;v)) // 编译错误！</span><br></pre></td></tr></table></figure>

<p>而以值为接收者的方法被调用时，接收者既能为值又能为指针：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var v Vertex</span><br><span class="line">fmt.Println(v.Abs()) // OK</span><br><span class="line">p := &amp;v</span><br><span class="line">fmt.Println(p.Abs()) // OK</span><br></pre></td></tr></table></figure>

<p>这种情况下，方法调用 <code>p.Abs()</code> 会被解释为 <code>(*p).Abs()</code>。</p>
<p>使用指针接收者的原因有二：</p>
<p>首先，方法能够修改其接收者指向的值。</p>
<p>其次，这样可以避免在每次调用方法时复制该值。若值的类型为大型结构体时，这样做会更加高效。</p>
<p>在本例中，<code>Scale</code> 和 <code>Abs</code> 接收者的类型为 <code>*Vertex</code>，即便 <code>Abs</code> 并不需要修改其接收者。</p>
<p>通常来说，所有给定类型的方法都应该有值或指针接收者，但并不应该二者混用。</p>
<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><p><strong>接口类型</strong> 是由一组方法签名定义的集合。</p>
<p>接口类型的变量可以保存任何实现了这些方法的值</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Abser <span class="keyword">interface</span> &#123;</span><br><span class="line">	Abs() <span class="type">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> MyFloat <span class="type">float64</span></span><br><span class="line"><span class="comment">// MyFloat实现</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f MyFloat)</span></span> Abs() <span class="type">float64</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> f &lt; <span class="number">0</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="type">float64</span>(-f)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="type">float64</span>(f)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Vertex <span class="keyword">struct</span> &#123;</span><br><span class="line">	X, Y <span class="type">float64</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// *Vertex 实现</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(v *Vertex)</span></span> Abs() <span class="type">float64</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> math.Sqrt(v.X*v.X + v.Y*v.Y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="接口与隐式实现"><a href="#接口与隐式实现" class="headerlink" title="接口与隐式实现"></a>接口与隐式实现</h2><p>类型通过实现一个接口的所有方法来实现该接口。既然无需专门显式声明，也就没有“implements”关键字。</p>
<p>隐式接口从接口的实现中解耦了定义，这样接口的实现可以出现在任何包中，无需提前准备。</p>
<p>因此，也就无需在每一个实现上增加新的接口名称，这样同时也鼓励了明确的接口定义。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> I <span class="keyword">interface</span> &#123;</span><br><span class="line">	M()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> T <span class="keyword">struct</span> &#123;</span><br><span class="line">	S <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 此方法表示类型 T 实现了接口 I，但我们无需显式声明此事。</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t T)</span></span> M() &#123;</span><br><span class="line">	fmt.Println(t.S)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> i I = T&#123;<span class="string">&quot;hello&quot;</span>&#125;</span><br><span class="line">	i.M()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="类型断言"><a href="#类型断言" class="headerlink" title="类型断言"></a>类型断言</h2><p><strong>类型断言</strong> 提供了访问接口值底层具体值的方式。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">t := i.(T)</span><br></pre></td></tr></table></figure>

<p>该语句断言接口值 <code>i</code> 保存了具体类型 <code>T</code>，并将其底层类型为 <code>T</code> 的值赋予变量 <code>t</code>。</p>
<p>若 <code>i</code> 并未保存 <code>T</code> 类型的值，该语句就会触发一个恐慌。</p>
<p>为了 <strong>判断</strong> 一个接口值是否保存了一个特定的类型，类型断言可返回两个值：其底层值以及一个报告断言是否成功的布尔值。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">t, ok := i.(T)</span><br></pre></td></tr></table></figure>

<p>若 <code>i</code> 保存了一个 <code>T</code>，那么 <code>t</code> 将会是其底层值，而 <code>ok</code> 为 <code>true</code>。</p>
<p>否则，<code>ok</code> 将为 <code>false</code> 而 <code>t</code> 将为 <code>T</code> 类型的零值，程序并不会产生恐慌。</p>
<p>请注意这种语法和读取一个映射时的相同之处。</p>
<h2 id="Stringer"><a href="#Stringer" class="headerlink" title="Stringer"></a>Stringer</h2><p><a href="https://go-zh.org/pkg/fmt/"><code>fmt</code></a> 包中定义的 <a href="https://go-zh.org/pkg/fmt/#Stringer"><code>Stringer</code></a> 是最普遍的接口之一。类似java object中的toString()</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">type Stringer interface &#123;</span><br><span class="line">    String() string</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Stringer</code> 是一个可以用字符串描述自己的类型。<code>fmt</code> 包（还有很多包）都通过此接口来打印值。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="type">string</span></span><br><span class="line">	Age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span></span> String() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> fmt.Sprintf(<span class="string">&quot;%v (%v years)&quot;</span>, p.Name, p.Age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := Person&#123;<span class="string">&quot;Arthur Dent&quot;</span>, <span class="number">42</span>&#125;</span><br><span class="line">	z := Person&#123;<span class="string">&quot;Zaphod Beeblebrox&quot;</span>, <span class="number">9001</span>&#125;</span><br><span class="line">	fmt.Println(a, z)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="错误"><a href="#错误" class="headerlink" title="错误"></a>错误</h2><p>Go 程序使用 <code>error</code> 值来表示错误状态。</p>
<p>与 <code>fmt.Stringer</code> 类似，<code>error</code> 类型是一个内建接口：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">type error interface &#123;</span><br><span class="line">    Error() string</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（与 <code>fmt.Stringer</code> 类似，<code>fmt</code> 包在打印值时也会满足 <code>error</code>。）</p>
<p>通常函数会返回一个 <code>error</code> 值，调用的它的代码应当判断这个错误是否等于 <code>nil</code> 来进行错误处理。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">i, err := strconv.Atoi(&quot;42&quot;)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">    fmt.Printf(&quot;couldn&#x27;t convert number: %v\n&quot;, err)</span><br><span class="line">    return</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(&quot;Converted integer:&quot;, i)</span><br></pre></td></tr></table></figure>

<p><code>error</code> 为 nil 时表示成功；非 nil 的 <code>error</code> 表示失败。</p>
<h2 id="练习：错误"><a href="#练习：错误" class="headerlink" title="练习：错误"></a>练习：错误</h2><p>从<a href="https://tour.go-zh.org/flowcontrol/8">之前的练习</a>中复制 <code>Sqrt</code> 函数，修改它使其返回 <code>error</code> 值。</p>
<p><code>Sqrt</code> 接受到一个负数时，应当返回一个非 nil 的错误值。复数同样也不被支持。</p>
<p>创建一个新的类型</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">type ErrNegativeSqrt float64</span><br></pre></td></tr></table></figure>

<p>并为其实现</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">func (e ErrNegativeSqrt) Error() string</span><br></pre></td></tr></table></figure>

<p>方法使其拥有 <code>error</code> 值，通过 <code>ErrNegativeSqrt(-2).Error()</code> 调用该方法应返回 <code>&quot;cannot Sqrt negative number: -2&quot;</code>。</p>
<p><strong>注意:</strong> 在 <code>Error</code> 方法内调用 <code>fmt.Sprint(e)</code> 会让程序陷入死循环。可以通过先转换 <code>e</code> 来避免这个问题：<code>fmt.Sprint(float64(e))</code>。这是为什么呢？</p>
<p>修改 <code>Sqrt</code> 函数，使其接受一个负数时，返回 <code>ErrNegativeSqrt</code> 值。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> ErrNegativeSqrt <span class="type">float64</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e ErrNegativeSqrt)</span></span> Error() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> fmt.Sprintf(<span class="string">&quot;cannot Sqrt negative number: %v&quot;</span>,<span class="type">float64</span>(e))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sqrt</span><span class="params">(x <span class="type">float64</span>)</span></span> (<span class="type">float64</span>, <span class="type">error</span>) &#123;</span><br><span class="line">	<span class="keyword">if</span> x&lt;<span class="number">0</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> x, ErrNegativeSqrt(x)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(Sqrt(<span class="number">2</span>))</span><br><span class="line">	fmt.Println(Sqrt(<span class="number">-2</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="Reader"><a href="#Reader" class="headerlink" title="Reader"></a>Reader</h2><p><code>io</code> 包指定了 <code>io.Reader</code> 接口，它表示从数据流的末尾进行读取。</p>
<p>Go 标准库包含了该接口的<a href="https://go-zh.org/search?q=Read#Global">许多实现</a>，包括文件、网络连接、压缩和加密等等。</p>
<p><code>io.Reader</code> 接口有一个 <code>Read</code> 方法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">func (T) Read(b []byte) (n int, err error)</span><br></pre></td></tr></table></figure>

<p><code>Read</code> 用数据填充给定的字节切片并返回填充的字节数和错误值。在遇到数据流的结尾时，它会返回一个 <code>io.EOF</code> 错误。</p>
<p>示例代码创建了一个 <a href="https://go-zh.org/pkg/strings/#Reader"><code>strings.Reader</code></a> 并以每次 8 字节的速度读取它的输出。</p>
<h2 id="练习：Reader"><a href="#练习：Reader" class="headerlink" title="练习：Reader"></a>练习：Reader</h2><p>实现一个 <code>Reader</code> 类型，它产生一个 ASCII 字符 <code>&#39;A&#39;</code> 的无限流。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> MyReader <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 给 MyReader 添加一个 Read([]byte) (int, error) 方法</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(reader MyReader)</span></span> Read(p []<span class="type">byte</span>) (<span class="type">int</span>, <span class="type">error</span>) &#123;</span><br><span class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>; i &lt; <span class="built_in">len</span>(p); i++ &#123;</span><br><span class="line">		p[i] = <span class="string">&#x27;A&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">len</span>(p), <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	reader.Validate(MyReader&#123;&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="练习：图像"><a href="#练习：图像" class="headerlink" title="练习：图像"></a>练习：图像</h2><p>还记得之前编写的<a href="https://tour.go-zh.org/moretypes/18">图片生成器</a> 吗？我们再来编写另外一个，不过这次它将会返回一个 <code>image.Image</code> 的实现而非一个数据切片。</p>
<p>定义你自己的 <code>Image</code> 类型，实现<a href="https://go-zh.org/pkg/image/#Image">必要的方法</a>并调用 <code>pic.ShowImage</code>。</p>
<p><code>Bounds</code> 应当返回一个 <code>image.Rectangle</code> ，例如 <code>image.Rect(0, 0, w, h)</code>。</p>
<p><code>ColorModel</code> 应当返回 <code>color.RGBAModel</code>。</p>
<p><code>At</code> 应当返回一个颜色。上一个图片生成器的值 <code>v</code> 对应于此次的 <code>color.RGBA&#123;v, v, 255, 255&#125;</code>。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Image <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(image Image)</span></span> ColorModel() color.Model &#123;</span><br><span class="line">	<span class="keyword">return</span> color.RGBAModel</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(i Image)</span></span> Bounds() image.Rectangle &#123;</span><br><span class="line">	<span class="keyword">return</span> image.Rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">200</span>, <span class="number">200</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(image Image)</span></span> At(x, y <span class="type">int</span>) color.Color &#123;</span><br><span class="line">	<span class="keyword">return</span> color.RGBA&#123;<span class="type">uint8</span>(x),<span class="type">uint8</span>(y),<span class="type">uint8</span>(<span class="number">255</span>),<span class="type">uint8</span>(<span class="number">255</span>)&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	m := Image&#123;&#125;</span><br><span class="line">	pic.ShowImage(m)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="并发"><a href="#并发" class="headerlink" title="并发"></a><strong>并发</strong></h1><h2 id="Go-程"><a href="#Go-程" class="headerlink" title="Go 程"></a>Go 程</h2><p>Go 程（goroutine）是由 Go 运行时管理的轻量级线程。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">go f(x, y, z)</span><br></pre></td></tr></table></figure>

<p>会启动一个新的 Go 程并执行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">f(x, y, z)</span><br></pre></td></tr></table></figure>

<p><code>f</code>, <code>x</code>, <code>y</code> 和 <code>z</code> 的求值发生在当前的 Go 程中，而 <code>f</code> 的执行发生在新的 Go 程中。</p>
<p>Go 程在相同的地址空间中运行，因此在访问共享的内存时必须进行同步。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">say</span><span class="params">(s <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">		time.Sleep(<span class="number">100</span> * time.Millisecond)</span><br><span class="line">		fmt.Println(s)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">go</span> say(<span class="string">&quot;world&quot;</span>)</span><br><span class="line">	say(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="信道"><a href="#信道" class="headerlink" title="信道"></a>信道</h2><p>信道是带有类型的管道，你可以通过它用信道操作符 <code>&lt;-</code> 来发送或者接收值。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ch &lt;- v    // 将 v 发送至信道 ch。</span><br><span class="line">v := &lt;-ch  // 从 ch 接收值并赋予 v。</span><br></pre></td></tr></table></figure>

<p>（“箭头”就是数据流的方向。）</p>
<p>和映射与切片一样，信道在使用前必须创建：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ch := make(chan int)</span><br></pre></td></tr></table></figure>

<p>默认情况下，发送和接收操作在另一端准备好之前都会阻塞。这使得 Go 程可以在没有显式的锁或竞态变量的情况下进行同步。</p>
<p>以下示例对切片中的数进行求和，将任务分配给两个 Go 程。一旦两个 Go 程完成了它们的计算，它就能算出最终的结果。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(s []<span class="type">int</span>, c <span class="keyword">chan</span> <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	sum := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> s &#123;</span><br><span class="line">		sum += v</span><br><span class="line">	&#125;</span><br><span class="line">	c &lt;- sum <span class="comment">// 将和送入 c</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := []<span class="type">int</span>&#123;<span class="number">7</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">-9</span>, <span class="number">4</span>, <span class="number">0</span>&#125;</span><br><span class="line"></span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">	<span class="keyword">go</span> sum(s[:<span class="built_in">len</span>(s)/<span class="number">2</span>], c)</span><br><span class="line">	<span class="keyword">go</span> sum(s[<span class="built_in">len</span>(s)/<span class="number">2</span>:], c)</span><br><span class="line">	x, y := &lt;-c, &lt;-c <span class="comment">// 从 c 中接收</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(x, y, x+y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="range-和-close"><a href="#range-和-close" class="headerlink" title="range 和 close"></a>range 和 close</h2><p>发送者可通过 <code>close</code> 关闭一个信道来表示没有需要发送的值了。接收者可以通过为接收表达式分配第二个参数来测试信道是否被关闭：若没有值可以接收且信道已被关闭，那么在执行完</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">v, ok := &lt;-ch</span><br></pre></td></tr></table></figure>

<p>之后 <code>ok</code> 会被设置为 <code>false</code>。</p>
<p>循环 <code>for i := range c</code> 会不断从信道接收值，直到它被关闭。</p>
<p><em>注意：</em> 只有发送者才能关闭信道，而接收者不能。向一个已经关闭的信道发送数据会引发程序恐慌（panic）。</p>
<p><em>还要注意：</em> 信道与文件不同，通常情况下无需关闭它们。只有在必须告诉接收者不再有需要发送的值时才有必要关闭，例如终止一个 <code>range</code> 循环。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fibonacci</span><span class="params">(n <span class="type">int</span>, c <span class="keyword">chan</span> <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	x, y := <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">		c &lt;- x</span><br><span class="line">		x, y = y, x+y</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">close</span>(c)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">10</span>)</span><br><span class="line">	<span class="keyword">go</span> fibonacci(<span class="built_in">cap</span>(c), c)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="keyword">range</span> c &#123;</span><br><span class="line">		fmt.Println(i)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="练习：等价二叉查找树"><a href="#练习：等价二叉查找树" class="headerlink" title="练习：等价二叉查找树"></a>练习：等价二叉查找树</h2><p><strong>1.</strong> 实现 <code>Walk</code> 函数。</p>
<p><strong>2.</strong> 测试 <code>Walk</code> 函数。</p>
<p>函数 <code>tree.New(k)</code> 用于构造一个随机结构的已排序二叉查找树，它保存了值 <code>k</code>, <code>2k</code>, <code>3k</code>, …, <code>10k</code>。</p>
<p>创建一个新的信道 <code>ch</code> 并且对其进行步进：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">go Walk(tree.New(1), ch)</span><br></pre></td></tr></table></figure>

<p>然后从信道中读取并打印 10 个值。应当是数字 <code>1, 2, 3, ..., 10</code>。</p>
<p><strong>3.</strong> 用 <code>Walk</code> 实现 <code>Same</code> 函数来检测 <code>t1</code> 和 <code>t2</code> 是否存储了相同的值。</p>
<p><strong>4.</strong> 测试 <code>Same</code> 函数。</p>
<p><code>Same(tree.New(1), tree.New(1))</code> 应当返回 <code>true</code>，而 <code>Same(tree.New(1), tree.New(2))</code> 应当返回 <code>false</code>。</p>
<p><code>Tree</code> 的文档可在<a href="https://godoc.org/golang.org/x/tour/tree#Tree">这里</a>找到。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Walk 步进 tree t 将所有的值从 tree 发送到 channel ch。</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Walk</span><span class="params">(t *tree.Tree, ch <span class="keyword">chan</span> <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	visit(t, ch)</span><br><span class="line">	<span class="built_in">close</span>(ch)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">visit</span><span class="params">(t *tree.Tree, ch <span class="keyword">chan</span> <span class="type">int</span>)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> t==<span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	ch &lt;- t.Value</span><br><span class="line">	right := t.Right</span><br><span class="line">	visit(right, ch)</span><br><span class="line">	left := t.Left</span><br><span class="line">	visit(left, ch)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Same 检测树 t1 和 t2 是否含有相同的值。</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Same</span><span class="params">(t1, t2 *tree.Tree)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">	</span><br><span class="line">	i := <span class="number">0</span></span><br><span class="line">	ch1 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">	ch2 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">go</span> Walk(t1, ch1)</span><br><span class="line">	<span class="keyword">go</span> Walk(t2, ch2)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 异或两次同一个值之后会为原值</span></span><br><span class="line">	<span class="keyword">for</span> j := <span class="keyword">range</span> ch1 &#123;</span><br><span class="line">		fmt.Println(j)</span><br><span class="line">		i ^= j</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> j := <span class="keyword">range</span> ch2 &#123;</span><br><span class="line">		fmt.Println(j)</span><br><span class="line">		i ^= j</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> i == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(Same(tree.New(<span class="number">1</span>), tree.New(<span class="number">1</span>)))</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="练习：Web-爬虫"><a href="#练习：Web-爬虫" class="headerlink" title="练习：Web 爬虫"></a>练习：Web 爬虫</h2><p>在这个练习中，我们将会使用 Go 的并发特性来并行化一个 Web 爬虫。</p>
<p>修改 <code>Crawl</code> 函数来并行地抓取 URL，并且保证不重复。</p>
<p><em>提示</em>：你可以用一个 map 来缓存已经获取的 URL，但是要注意 map 本身并不是并发安全的！</p>
<p><code>sync.WaitGroup</code> 是 Go 语言标准库中的一个并发原语，它可以用于协调和同步多个 Goroutine 的执行，以确保在所有 Goroutine 执行完毕之后，程序才能继续往下执行。</p>
<p>在使用 <code>sync.WaitGroup</code> 时，首先需要通过 <code>Add</code> 方法设置要等待的 Goroutine 的数量，然后在每个 Goroutine 执行完毕之后，都需要调用 <code>Done</code> 方法，以通知 <code>WaitGroup</code> 该 Goroutine 已经执行完毕。最后，通过调用 <code>Wait</code> 方法等待所有 Goroutine 执行完毕，程序才会继续往下执行。</p>
<p>具体来说，可以通过以下的步骤来使用 <code>sync.WaitGroup</code>：</p>
<ol>
<li>创建一个 <code>sync.WaitGroup</code> 对象。</li>
<li>在要执行的 Goroutine 前调用 <code>Add</code> 方法，将要执行的 Goroutine 的数量加 1。</li>
<li>在每个 Goroutine 执行完毕后调用 <code>Done</code> 方法，将要执行的 Goroutine 的数量减 1。</li>
<li>在主 Goroutine 中调用 <code>Wait</code> 方法，等待所有 Goroutine 执行完毕。</li>
</ol>
<p>示例代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">goCopy codepackage main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">    &quot;fmt&quot;</span><br><span class="line">    &quot;sync&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func worker(id int, wg *sync.WaitGroup) &#123;</span><br><span class="line">    defer wg.Done()</span><br><span class="line"></span><br><span class="line">    fmt.Printf(&quot;Worker %d starting\n&quot;, id)</span><br><span class="line"></span><br><span class="line">    // 模拟一些工作</span><br><span class="line">    for i := 0; i &lt; 1000000000; i++ &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fmt.Printf(&quot;Worker %d done\n&quot;, id)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">    var wg sync.WaitGroup</span><br><span class="line"></span><br><span class="line">    // 创建 3 个 Goroutine</span><br><span class="line">    for i := 1; i &lt;= 3; i++ &#123;</span><br><span class="line">        wg.Add(1)</span><br><span class="line">        go worker(i, &amp;wg)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 等待所有 Goroutine 执行完毕</span><br><span class="line">    wg.Wait()</span><br><span class="line"></span><br><span class="line">    fmt.Println(&quot;All workers done&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上面的示例代码中，我们创建了 3 个 Goroutine，并且使用 <code>Add</code> 方法将要执行的 Goroutine 的数量加 1。在每个 Goroutine 执行完毕后，我们使用 <code>Done</code> 方法将要执行的 Goroutine 的数量减 1。最后，我们在主 Goroutine 中使用 <code>Wait</code> 方法等待所有 Goroutine 执行完毕。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Fetcher <span class="keyword">interface</span> &#123;</span><br><span class="line">	<span class="comment">// Fetch 返回 URL 的 body 内容，并且将在这个页面上找到的 URL 放到一个 slice 中。</span></span><br><span class="line">	Fetch(url <span class="type">string</span>) (body <span class="type">string</span>, urls []<span class="type">string</span>, err <span class="type">error</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> urlRecord <span class="keyword">struct</span> &#123;</span><br><span class="line">	v   <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span></span><br><span class="line">	mux sync.Mutex</span><br><span class="line">	wg  sync.WaitGroup</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> m = urlRecord&#123;v: <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>)&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Crawl 使用 fetcher 从某个 URL 开始递归的爬取页面，直到达到最大深度。</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Crawl</span><span class="params">(url <span class="type">string</span>, depth <span class="type">int</span>, fetcher Fetcher)</span></span> &#123;</span><br><span class="line">	<span class="comment">// <span class="doctag">TODO:</span> 并行的抓取 URL。</span></span><br><span class="line">	<span class="comment">// <span class="doctag">TODO:</span> 不重复抓取页面。</span></span><br><span class="line">	<span class="comment">// 下面并没有实现上面两种情况：</span></span><br><span class="line">	<span class="keyword">defer</span> m.wg.Done()</span><br><span class="line">	<span class="keyword">if</span> depth &lt;= <span class="number">0</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	m.mux.Lock()</span><br><span class="line">	m.v[url]++</span><br><span class="line">	m.mux.Unlock()</span><br><span class="line"></span><br><span class="line">	body, urls, err := fetcher.Fetch(url)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;found: %s %q\n&quot;</span>, url, body)</span><br><span class="line">	<span class="keyword">for</span> _, u := <span class="keyword">range</span> urls &#123;</span><br><span class="line">		m.mux.Lock()</span><br><span class="line">		<span class="keyword">if</span> _, ok := m.v[u]; !ok &#123;</span><br><span class="line">			m.wg.Add(<span class="number">1</span>)</span><br><span class="line">			<span class="keyword">go</span> Crawl(u, depth<span class="number">-1</span>, fetcher)</span><br><span class="line">		&#125;</span><br><span class="line">		m.mux.Unlock()</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	</span><br><span class="line">	m.wg.Add(<span class="number">1</span>)</span><br><span class="line">	<span class="keyword">go</span> Crawl(<span class="string">&quot;https://golang.org/&quot;</span>, <span class="number">4</span>, fetcher)</span><br><span class="line">	m.wg.Wait()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// fakeFetcher 是返回若干结果的 Fetcher。</span></span><br><span class="line"><span class="keyword">type</span> fakeFetcher <span class="keyword">map</span>[<span class="type">string</span>]*fakeResult</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> fakeResult <span class="keyword">struct</span> &#123;</span><br><span class="line">	body <span class="type">string</span></span><br><span class="line">	urls []<span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f fakeFetcher)</span></span> Fetch(url <span class="type">string</span>) (<span class="type">string</span>, []<span class="type">string</span>, <span class="type">error</span>) &#123;</span><br><span class="line">	<span class="keyword">if</span> res, ok := f[url]; ok &#123;</span><br><span class="line">		<span class="keyword">return</span> res.body, res.urls, <span class="literal">nil</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;&quot;</span>, <span class="literal">nil</span>, fmt.Errorf(<span class="string">&quot;not found: %s&quot;</span>, url)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// fetcher 是填充后的 fakeFetcher。</span></span><br><span class="line"><span class="keyword">var</span> fetcher = fakeFetcher&#123;</span><br><span class="line">	<span class="string">&quot;https://golang.org/&quot;</span>: &amp;fakeResult&#123;</span><br><span class="line">		<span class="string">&quot;The Go Programming Language&quot;</span>,</span><br><span class="line">		[]<span class="type">string</span>&#123;</span><br><span class="line">			<span class="string">&quot;https://golang.org/pkg/&quot;</span>,</span><br><span class="line">			<span class="string">&quot;https://golang.org/cmd/&quot;</span>,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="string">&quot;https://golang.org/pkg/&quot;</span>: &amp;fakeResult&#123;</span><br><span class="line">		<span class="string">&quot;Packages&quot;</span>,</span><br><span class="line">		[]<span class="type">string</span>&#123;</span><br><span class="line">			<span class="string">&quot;https://golang.org/&quot;</span>,</span><br><span class="line">			<span class="string">&quot;https://golang.org/cmd/&quot;</span>,</span><br><span class="line">			<span class="string">&quot;https://golang.org/pkg/fmt/&quot;</span>,</span><br><span class="line">			<span class="string">&quot;https://golang.org/pkg/os/&quot;</span>,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="string">&quot;https://golang.org/pkg/fmt/&quot;</span>: &amp;fakeResult&#123;</span><br><span class="line">		<span class="string">&quot;Package fmt&quot;</span>,</span><br><span class="line">		[]<span class="type">string</span>&#123;</span><br><span class="line">			<span class="string">&quot;https://golang.org/&quot;</span>,</span><br><span class="line">			<span class="string">&quot;https://golang.org/pkg/&quot;</span>,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="string">&quot;https://golang.org/pkg/os/&quot;</span>: &amp;fakeResult&#123;</span><br><span class="line">		<span class="string">&quot;Package os&quot;</span>,</span><br><span class="line">		[]<span class="type">string</span>&#123;</span><br><span class="line">			<span class="string">&quot;https://golang.org/&quot;</span>,</span><br><span class="line">			<span class="string">&quot;https://golang.org/pkg/&quot;</span>,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Golang</tag>
      </tags>
  </entry>
  <entry>
    <title>Java Map 赋值的方式</title>
    <url>/2023/04/17/Java/Java%20Map%20%E5%88%9D%E5%A7%8B%E5%8C%96%E8%B5%8B%E5%80%BC/</url>
    <content><![CDATA[<h1 id="方法一：直接赋值"><a href="#方法一：直接赋值" class="headerlink" title="方法一：直接赋值"></a>方法一：直接赋值</h1><p>一般我们初始化并赋初值是这样做的：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">HashMap&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">map.put(<span class="string">&quot;name1&quot;</span>, <span class="string">&quot;Locy&quot;</span>);  </span><br><span class="line">map.put(<span class="string">&quot;name2&quot;</span>, <span class="string">&quot;John&quot;</span>);</span><br></pre></td></tr></table></figure>


<h1 id="方法二：双括号初始化（Java8）"><a href="#方法二：双括号初始化（Java8）" class="headerlink" title="方法二：双括号初始化（Java8）"></a>方法二：双括号初始化（Java8）</h1><p>在一个表达式中完成初始化并赋初值</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">HashMap&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;() &#123;</span><br><span class="line">    &#123;</span><br><span class="line">        put(<span class="string">&quot;name1&quot;</span>, <span class="string">&quot;Locy&quot;</span>); </span><br><span class="line">        put(<span class="string">&quot;name2&quot;</span>, <span class="string">&quot;John&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>这里用了双括号来初始化。第一层括弧实际是定义了一个匿名内部类 ，第二层括弧实际上是一个实例初始化块 ，这个块在内部匿名类构造时被执行。但是这种写法可能导致这个对象串行化失败的问题。</p>
<p>这种使用双括号进行初始化的语法在执行效率上要比普通的初始化写法要稍低。</p>
<p>List 等也都可以使用这种方法</p>
<h1 id="方式三：guava"><a href="#方式三：guava" class="headerlink" title="方式三：guava"></a>方式三：guava</h1><p>谷歌推出的包</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Map&lt;String, String&gt; myMapB = ImmutableMap.&lt;String, String&gt;builder()</span><br><span class="line">            .put(<span class="string">&quot;name1&quot;</span>, <span class="string">&quot;Locy&quot;</span>); </span><br><span class="line">        	.put(<span class="string">&quot;name2&quot;</span>, <span class="string">&quot;John&quot;</span>);</span><br><span class="line">            .build();</span><br></pre></td></tr></table></figure>

<p>注意 ImmutableMap 初始化之后不能再进行put，会抛出异常</p>
<p>查看 ImmutableMap 源码可以发现，调用put方法时，直接抛异常：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Deprecated</span></span><br><span class="line"><span class="meta">@CanIgnoreReturnValue</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> V <span class="title function_">put</span><span class="params">(K k, V v)</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="方式四：Java-9或更高版本"><a href="#方式四：Java-9或更高版本" class="headerlink" title="方式四：Java 9或更高版本"></a>方式四：Java 9或更高版本</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 最多存储10个元素</span></span><br><span class="line"></span><br><span class="line">Map&lt;String, String&gt; test1 = Map.of(</span><br><span class="line">    <span class="string">&quot;name1&quot;</span>, <span class="string">&quot;Locy&quot;</span>,</span><br><span class="line">    <span class="string">&quot;name2&quot;</span>, <span class="string">&quot;John&quot;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 没有限制</span></span><br><span class="line">Map&lt;String, String&gt; test2 = Map.ofEntries(</span><br><span class="line">    entry(<span class="string">&quot;name1&quot;</span>, <span class="string">&quot;Locy&quot;</span>),</span><br><span class="line">    entry(<span class="string">&quot;name2&quot;</span>, <span class="string">&quot;John&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Java</title>
    <url>/2023/03/26/Java/Java/</url>
    <content><![CDATA[<h2 id="Java-特点"><a href="#Java-特点" class="headerlink" title="Java 特点"></a><strong>Java 特点</strong></h2><p>java语言特性</p>
<ul>
<li>面对对象：将重点放在数据和对象的接口上</li>
<li>简单性：相比c++，减少了头文件、指针等很多概念，而且java可以在很小的机器上独立运行</li>
<li>Java语言是健壮的 : 强类型机制, 异常处理, 垃圾的自动收集</li>
<li>跨平台性：java文件被编译成字节码文件，然后在不同的机器上可以通过JVM编译成机器码执行</li>
<li>解释性语言：需要解释器来执行</li>
<li>分布式：有丰富的例程库用于处理TCP&#x2F;IP协议，可以通过URL访问网络上的对象</li>
</ul>
<span id="more"></span>

<h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><h2 id="IDEA-开发工具"><a href="#IDEA-开发工具" class="headerlink" title="IDEA 开发工具"></a>IDEA 开发工具</h2><ul>
<li>新建项目</li>
<li>运行调试</li>
<li>界面配置</li>
<li>插件管理</li>
</ul>
<h2 id="Java-基础语法"><a href="#Java-基础语法" class="headerlink" title="Java 基础语法"></a>Java 基础语法</h2><h3 id="基础数据类型"><a href="#基础数据类型" class="headerlink" title="基础数据类型"></a>基础数据类型</h3><ul>
<li><p>1字节8个bit</p>
</li>
<li><p>byte 1字节</p>
</li>
<li><p>short 2字节</p>
<p>byte short 运算时会转换到int类型</p>
</li>
<li><p>int 4字节</p>
</li>
<li><p>long 8字节</p>
</li>
<li><p>float 4字节</p>
</li>
<li><p>double 8字节<br>浮点数 &#x3D; 符号位+指数位+尾数位<br>尾数位可能丢失造成精度丢失</p>
<p>浮点数的比较应该是两个数的差值的绝对值，在某个精度范围内判断（Math.abs(num1 - num2)&lt;）</p>
</li>
<li><p>boolean 1字节</p>
</li>
<li><p>char 2字节</p>
</li>
</ul>
<h3 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h3><ul>
<li>for</li>
<li>if</li>
<li>else if</li>
<li>while</li>
<li>dowhile</li>
<li>swich</li>
</ul>
<h3 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h3><p>final: final修饰的类不能被继承，修饰的方法不能重写，修饰的变量是基本数据类型不能改变，修饰的变量是引用类型不能指向其他的对象</p>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><h2 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a><em>面向对象</em></h2><p>使用原有的技术方法（单独定义和使用数组解决存储）不利于数据的管理，效率低下，代码的可重用性和可维护性差，重复性高，程序的可读性、可扩展性差。</p>
<p>面对对象是一种编程思想。相比于传统的方法，解决了上面的问题，提供了类、对象、封装继承和多态的概念，面对对象更加的灵活，可以更好的满足复杂的业务需求。</p>
<p>类是自定义的数据类型，是一种抽象的概念，描述了一类对象的共同特征</p>
<p>对象是具体的实例，是类的具体表现</p>
<h3 id="面对对象的三大特征"><a href="#面对对象的三大特征" class="headerlink" title="面对对象的三大特征"></a>面对对象的三大特征</h3><ul>
<li><p>封装：把数据和操作数据的方法装在一起，外部不能直接调用访问内部数据</p>
</li>
<li><p>继承：一个类从另一个类中继承属性和方法，减少代码重复</p>
</li>
<li><p>多态：一个类可以拥有多种形态，根据不同的情况执行不同的操作</p>
<p>多态和继承的区别在于：继承是一种静态的关系，在编译时就可以确定，多态是动态的关系，在运行时才知道需要执行怎样的操作</p>
</li>
</ul>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><p>是类的行为</p>
<h4 id="静态方法"><a href="#静态方法" class="headerlink" title="静态方法"></a>静态方法</h4><p>对象可以调用类的实例方法，但是不推荐这样做，这种方式会造成混淆，静态方法计算的结果跟对象没有关系。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">employee</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="title function_">getNextId</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="keyword">static</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">    <span class="type">Employee</span> <span class="variable">harry</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line">    harry.getNextId();</span><br><span class="line">    Employee.getNextId();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="工厂方法"><a href="#工厂方法" class="headerlink" title="工厂方法"></a>工厂方法</h4><h4 id="方法参数"><a href="#方法参数" class="headerlink" title="方法参数"></a>方法参数</h4><p>在java中方法参数传递的方式是值传递</p>
<p>在方法中对传入的值进行处理的时候不会影响到原值</p>
<p>但在对象的处理中，拷贝的对象引用的仍然是原有的地址，所以对对象中的属性操作时不会出现问题</p>
<h3 id="重载"><a href="#重载" class="headerlink" title="重载"></a>重载</h3><p>一个类中多个同名但是参数列表不同的方法</p>
<h3 id="重写"><a href="#重写" class="headerlink" title="重写"></a>重写</h3><p>子类重新定义父类中的方法，实现不同的功能</p>
<h3 id="对象的内存布局"><a href="#对象的内存布局" class="headerlink" title="对象的内存布局"></a><strong>对象的内存布局</strong></h3><p><img src="/%5CJava.assets%5Cimage-20230212191224066.png" alt="image-20230212191224066"></p>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><h4 id="super"><a href="#super" class="headerlink" title="super"></a>super</h4><p>super与this不同，super不是对象的引用，不能将super赋给另外一个对象变量，只是一个指示编译器去调用父类方法的特殊关键字。</p>
<h4 id="子类构造器"><a href="#子类构造器" class="headerlink" title="子类构造器"></a>子类构造器</h4><p>用 super 实现对父类构造器的调用，使用 super 调用构造器的语句必须是子类构造器的第一条</p>
<p>如果子类的构造器没有显式的调用父类的构造器，自动调用父类没有参数的构造器，如果父类没有无参构造器，则会编译错误 </p>
<p>一个对象被指示为多种类型的情况被称为<em>多态</em>，运行时自动选择调用方法的现象叫做<em>动态绑定</em></p>
<h4 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h4><p>父类对象的任何地方都可以用子类对象置换，对象变量是多态的</p>
<p><strong>注意：</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Manager[] managers = <span class="keyword">new</span> <span class="title class_">Manager</span>[<span class="number">3</span>];</span><br><span class="line">managers[<span class="number">0</span>] = boss;</span><br><span class="line"><span class="comment">// 父类对象引用子类对象</span></span><br><span class="line">Employee[] employees = managers; </span><br><span class="line"><span class="comment">// 虽然是父类，但是数组的类型是子类，父类替换其中的元素会报错</span></span><br><span class="line">employees[<span class="number">0</span>] = employee; <span class="comment">// java.lang.ArrayStoreException: object.Employee</span></span><br><span class="line">System.out.println(managers[<span class="number">0</span>].getName()); </span><br></pre></td></tr></table></figure>

<h4 id="强制类型转换"><a href="#强制类型转换" class="headerlink" title="强制类型转换"></a>强制类型转换</h4><ul>
<li>只能在继承层次内进行类型转换</li>
<li>将父类转换为子类之前，应该使用instanceof检查</li>
</ul>
<h4 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h4><p>是指只定义属性和行为的抽象概念，但是不实现</p>
<p>包含一个或多个抽象方法的类必须声明为抽象的，抽象类中也可以含有具体的方法</p>
<p>抽象类不能被实现，但是可以引用子类的对象</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br></pre></td></tr></table></figure>

<h4 id="访问修饰符"><a href="#访问修饰符" class="headerlink" title="访问修饰符"></a>访问修饰符</h4><table>
<thead>
<tr>
<th>private</th>
<th>仅对本类可见</th>
</tr>
</thead>
<tbody><tr>
<td>public</td>
<td>所有都可见</td>
</tr>
<tr>
<td>protected</td>
<td>对本包和所有子类可见</td>
</tr>
<tr>
<td>（不填）</td>
<td>对本包可见</td>
</tr>
</tbody></table>
<h3 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h3><h4 id="equals"><a href="#equals" class="headerlink" title="equals"></a>equals</h4><p>equals的最好的流程</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object otherObject)</span> &#123;</span><br><span class="line">    <span class="comment">// 检测 this 与 otherObject 是否引用同一个对象</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">this</span> == otherObject) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">// 检测 otherObject 是否为 null</span></span><br><span class="line">    <span class="keyword">if</span>(otherObject == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// 比较 this 与 otherObject 是否属于同一个类。</span></span><br><span class="line">    <span class="comment">// 如果 equals 的语义在每个子类中有所改变，就使用 getClass 检测</span></span><br><span class="line">    <span class="comment">// 如果所有的子类都拥有统一的语义，就使用 instanceof 检测</span></span><br><span class="line">    <span class="keyword">if</span>(getClass() != otherObject.getClass()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// 将 otherObject 转换为相应的类类型变量</span></span><br><span class="line">    <span class="type">Employee</span> <span class="variable">other</span> <span class="operator">=</span> (Employee) otherObject;</span><br><span class="line">    <span class="comment">// 现在开始对所有需要比较的域进行比较。</span></span><br><span class="line">    <span class="keyword">return</span> Objects.equals(name, other.name)</span><br><span class="line">            &amp;&amp; salary == other.salary</span><br><span class="line">            &amp;&amp; id == other.id;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="hashcode"><a href="#hashcode" class="headerlink" title="hashcode"></a>hashcode</h4><p>重新定义equals方法，就必须重新定义hashcode方法，在插入hash表时会计算插入对象的hash值决定插入的位置。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Objects.hash(name, salary);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="继承的设计技巧"><a href="#继承的设计技巧" class="headerlink" title="继承的设计技巧"></a>继承的设计技巧</h3><ol>
<li>将公共操作和域放在父类</li>
<li>不要使用受保护的域</li>
<li>使用继承实现is-a关系</li>
<li>除非所有继承的方法都有意义，否则不要使用继承</li>
<li>覆盖方法时不要改变预期的行为</li>
<li>使用多态，而不是用类型信息</li>
<li>不要过多的使用反射</li>
</ol>
<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><p>指一组定义的方法，可以被其他类实现</p>
<p><strong>抽象类和接口的区别</strong>：抽象类可以包含抽象方法和非抽象方法，接口只能包含抽象方法，抽象类可以定义实例变量，接口不能</p>
<p>每个类只可以扩展于一个类，但是可以实现多个接口</p>
<h3 id="接口的多态"><a href="#接口的多态" class="headerlink" title="接口的多态"></a>接口的多态</h3><p>多态参数：作为参数传入方法，方法参数中可以使用实现了接口的类的对象实例</p>
<p>多态数组：接口数组中可以存放不同的实现了接口的类的对象实例</p>
<p>多态传递：接口B继承了其他的接口A时，实现了接口B的类也要实现接口A的方法</p>
<h2 id="类"><a href="#类" class="headerlink" title="类"></a>类</h2><p>外部类</p>
<p>内部类</p>
<ul>
<li><p>定义在外部类的局部位置上（方法内）</p>
<ol>
<li><p>局部内部类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Outer</span> &#123; <span class="comment">// 外部类</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">m2</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;m2 调用&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">m1</span> <span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 局部内部类写在方法或者代码块中</span></span><br><span class="line">        <span class="comment">// 本质是一个局部变量 不能有访问修饰符 可以用final修饰</span></span><br><span class="line">        <span class="comment">// 作用域只在定义的方法或者代码块中</span></span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Inner</span> &#123;</span><br><span class="line">            <span class="keyword">private</span> <span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">2000</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">f1</span> <span class="params">()</span> &#123;</span><br><span class="line">                <span class="comment">// 可以调用外部类的私有变量和私有方法</span></span><br><span class="line">                <span class="comment">// 如果存在重名，采取就近原则，调用外部类时采用类名.this.变量名调用</span></span><br><span class="line">                System.out.println(<span class="string">&quot;n1 = &quot;</span> + n1 + <span class="string">&quot;Outer.this.n1 = &quot;</span> + Outer.<span class="built_in">this</span>.n1);</span><br><span class="line">                m2();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 外部类 访问局部内部类的成员 只能在作用域内访问</span></span><br><span class="line">        <span class="type">Inner</span> <span class="variable">inner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Inner</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">n11</span> <span class="operator">=</span> inner.n1;</span><br><span class="line">        inner.f1();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>匿名内部类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">	<span class="comment">// 匿名内部类</span></span><br><span class="line">    <span class="comment">// 编译类型是IA</span></span><br><span class="line">    <span class="comment">// 运行类型是 外部类类名$数字 LocalInnerClass$1</span></span><br><span class="line">    <span class="comment">// 只进行一次用于实例化对象 在实现类使用次数少的情况下 简化实现类的编写</span></span><br><span class="line">    <span class="type">IA</span> <span class="variable">tiger</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">IA</span> ()&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cry</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;tiger crying...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IA</span>&#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">cry</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>定义在成员位置</p>
<ol>
<li>成员内部类</li>
<li>静态内部类</li>
</ol>
</li>
</ul>
<p>其他类</p>
<h2 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Size</span> &#123;</span><br><span class="line">    SMALL(<span class="string">&quot;S&quot;</span>), MEDIUM(<span class="string">&quot;M&quot;</span>), LARGE(<span class="string">&quot;L&quot;</span>), EXTRA_LARGE(<span class="string">&quot;XL&quot;</span>);</span><br><span class="line"></span><br><span class="line">    Size(String abbreviation) &#123;</span><br><span class="line">        <span class="built_in">this</span>.abbreviation = abbreviation;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String abbreviation;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAbbreviation</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> abbreviation;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>比较两个枚举类型的值的时候直接用 &#x3D;&#x3D; 就可以了</p>
<h2 id="常用类"><a href="#常用类" class="headerlink" title="常用类"></a>常用类</h2><h3 id="String"><a href="#String" class="headerlink" title="String"></a>String</h3><p>String 不可变，可以更改变量的原因是重新指向了新的对象，线程不安全</p>
<p>StringBuffer 继承 AbstractStringBuilder，可变字符串，对方法加了同步锁线程安全</p>
<p>StringBuilder 可变字符串，线程不安全，性能比StringBuffer提升10%-15%</p>
<blockquote>
<p>Java9之后String AbstractStringBuilder 的实现改用byte数组存储字符串</p>
</blockquote>
<h4 id="String-不可变"><a href="#String-不可变" class="headerlink" title="String 不可变"></a>String 不可变</h4><p>用final关键字修饰字符数组，保存字符串的数组是私有的，String没有暴露修改这个字符数组的方法 （final修饰字符数组只是无法修改引用其他的对象，对于数组内部地址中存储的字符仍然可以修改）</p>
<h3 id="日期时间"><a href="#日期时间" class="headerlink" title="日期时间"></a>日期时间</h3><p>Data</p>
<p>Calendar</p>
<p>TimeStamp</p>
<h2 id="集合类"><a href="#集合类" class="headerlink" title="集合类"></a><strong>集合类</strong></h2><p>集合主要分了两组：单列集合、双列集合</p>
<h3 id="Collection"><a href="#Collection" class="headerlink" title="Collection"></a>Collection</h3><ul>
<li><p>List</p>
<p>ArrayList 线程安全 初始化10个 每次扩容1.5倍</p>
<p>Vector 线程安全 初始化 每次扩容2倍</p>
<p>LinkedArrayList 底层是双向链表实现，插入删除方便</p>
</li>
<li><p>Set</p>
<p>HashSet 底层实现HashMap 无序</p>
<p>TreeSet 底层实现TreeMap</p>
</li>
</ul>
<h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><ul>
<li>HashMap 1.7之前底层数据结构是数组加链表，1.8之后是数组加链表加红黑树，当单条链表元素超过8并且数组长度大于64之后会将链表转为红黑树。每次扩容两倍，添加时先通过扰动函数<code>hash()</code>计算 hash 值，然后计算 <code>(len-1) ^ hash</code> 得到 插入的位置。</li>
<li>Hashtable </li>
<li>TreeMap 1.7</li>
<li>Properties 配置文件键值对</li>
<li>LinkedHashMap 输出有序 可以传入一个比较器，用来决定添加进元素的顺序并决定元素是否添加</li>
</ul>
<h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><h2 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h2><h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><h2 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a><strong>多线程</strong></h2><h3 id="进程线程"><a href="#进程线程" class="headerlink" title="进程线程"></a>进程线程</h3><p>进程是一个容器，有多个线程</p>
<p>实现多线程可以通过</p>
<ul>
<li>继承Thread， 实现类调用start()方法</li>
<li>实现Runable(Thread也是实现Runable)</li>
<li>实现Callable</li>
</ul>
<p>区别：Thread 是继承，Runable是接口，实现了Runable也要通过new Thread静态代理。一个实现了Runable接口的类实例可以传入不同的Thread启动，Callable有返回值。</p>
<h3 id="线程七大状态"><a href="#线程七大状态" class="headerlink" title="线程七大状态"></a>线程七大状态</h3><p>新建–&gt; （就绪 –&gt; 运行）Runnable –&gt; 死亡</p>
<p>阻塞</p>
<p>定时等待</p>
<p>等待</p>
<h3 id="互斥锁"><a href="#互斥锁" class="headerlink" title="互斥锁"></a>互斥锁</h3><h3 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h3><p>两个线程互相持有对方接下来需要的资源无法放弃自身拥有的资源而造成的阻塞情况。</p>
<h2 id="IO-流"><a href="#IO-流" class="headerlink" title="IO 流"></a>IO 流</h2><h3 id="流的分类"><a href="#流的分类" class="headerlink" title="流的分类"></a>流的分类</h3><ul>
<li>按操作数据单位：字节流（8bit）二进制文件（音频，视频等，不会出现文件的损失），字符流（字符）文本文件</li>
<li>流向：输入流，输出流</li>
<li>角色：节点流、处理流&#x2F;包装流</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th><strong>字节流</strong></th>
<th><strong>字符流</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>输入流</strong></td>
<td>InputStream</td>
<td>Reader</td>
</tr>
<tr>
<td><strong>输出流</strong></td>
<td>OutputStream</td>
<td>Writer</td>
</tr>
</tbody></table>
<h3 id="InputStream"><a href="#InputStream" class="headerlink" title="InputStream"></a>InputStream</h3><p>FileInputStream</p>
<p>BufferedInputStream</p>
<p>ObjectInputStream </p>
<h3 id="OutputStream"><a href="#OutputStream" class="headerlink" title="OutputStream"></a>OutputStream</h3><p>FileOutputStream</p>
<h2 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h2><p>反射可以用来在运行时动态操作Java代码，分析类能力</p>
<p>反射的作用：</p>
<ul>
<li>运行时分析类的能力</li>
<li>运行时查看对象</li>
<li>实现通用的数组操作代码</li>
<li>利用method对象，运行时调用方法</li>
</ul>
<h3 id="运行时利用反射分析对象"><a href="#运行时利用反射分析对象" class="headerlink" title="运行时利用反射分析对象"></a>运行时利用反射分析对象</h3><p>获取对象域</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Employee</span> <span class="variable">harry</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="string">&quot;Harry Hacker&quot;</span>, <span class="number">21</span>, <span class="number">35000</span>);</span><br><span class="line">Class&lt;? <span class="keyword">extends</span> <span class="title class_">Employee</span>&gt; cl = harry.getClass();</span><br><span class="line"><span class="type">Field</span> <span class="variable">name</span> <span class="operator">=</span> cl.getDeclaredField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line"><span class="comment">// name是私有</span></span><br><span class="line">name.setAccessible(<span class="literal">true</span>);</span><br><span class="line"><span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> name.get(harry);</span><br></pre></td></tr></table></figure>

<h3 id="数组复制"><a href="#数组复制" class="headerlink" title="数组复制"></a>数组复制</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">goodCopyOf</span><span class="params">(Object a, <span class="type">int</span> newLength)</span> &#123;</span><br><span class="line">     <span class="type">Class</span> <span class="variable">cl</span> <span class="operator">=</span> a.getClass();</span><br><span class="line">     <span class="keyword">if</span> (!cl.isArray()) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">     <span class="type">Class</span> <span class="variable">componentType</span> <span class="operator">=</span> cl.getComponentType();</span><br><span class="line">     <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> Array.getLength(a);</span><br><span class="line">     <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> Array.newInstance(componentType, length);</span><br><span class="line">     System.arraycopy(a, <span class="number">0</span>, o, <span class="number">0</span>, Math.min(length, newLength));</span><br><span class="line">     <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用Method"><a href="#使用Method" class="headerlink" title="使用Method"></a>使用Method</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Method</span> <span class="variable">m1</span> <span class="operator">=</span> Employee.class.getMethod(<span class="string">&quot;getName&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="反射实例"><a href="#反射实例" class="headerlink" title="反射实例"></a>反射实例</h3><h4 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h4><p>文档 ：Spring IOC </p>
<h4 id="动态代理"><a href="#动态代理" class="headerlink" title="动态代理"></a>动态代理</h4><h4 id="序列化和反序列化"><a href="#序列化和反序列化" class="headerlink" title="序列化和反序列化"></a>序列化和反序列化</h4>]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Java反射</title>
    <url>/2023/04/19/Java/Java%E5%8F%8D%E5%B0%84/</url>
    <content><![CDATA[<p>Java 语言中的类、方法、变量、参数和包等都可以被注解修饰。</p>
<h1 id="Annotation"><a href="#Annotation" class="headerlink" title="Annotation"></a>Annotation</h1><p>注解是一个接口 有三个主要部分</p>
<ol>
<li><p>Annotation</p>
<p>每 1 个 Annotation 对象，都会有唯一的 RetentionPolicy 属性；至于 ElementType 属性，则有 1~n 个。</p>
</li>
<li><p><strong>ElementType 是 Enum 枚举类型，它用来指定 Annotation 的类型。</strong></p>
</li>
</ol>
   <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">ElementType</span> &#123;</span><br><span class="line">    TYPE,               <span class="comment">/* 类、接口（包括注释类型）或枚举声明  */</span></span><br><span class="line">    FIELD,              <span class="comment">/* 字段声明（包括枚举常量）  */</span></span><br><span class="line">    METHOD,             <span class="comment">/* 方法声明  */</span></span><br><span class="line">    PARAMETER,          <span class="comment">/* 参数声明  */</span></span><br><span class="line">    CONSTRUCTOR,        <span class="comment">/* 构造方法声明  */</span></span><br><span class="line">    LOCAL_VARIABLE,     <span class="comment">/* 局部变量声明  */</span></span><br><span class="line">    ANNOTATION_TYPE,    <span class="comment">/* 注释类型声明  */</span></span><br><span class="line">    PACKAGE             <span class="comment">/* 包声明  */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>   指定一个 Annotation 对象使用在什么类型上</p>
<ol start="3">
<li><p>RetentionPolicy</p>
<p>用来指定 Annotation 的作用域。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">RetentionPolicy</span> &#123;</span><br><span class="line">    SOURCE,            <span class="comment">/* Annotation信息仅存在于编译器处理期间，编译器处理完之后就没有该Annotation信息了  */</span></span><br><span class="line"></span><br><span class="line">    CLASS,             <span class="comment">/* 编译器将Annotation存储于类对应的.class文件中。默认行为  */</span></span><br><span class="line"></span><br><span class="line">    RUNTIME            <span class="comment">/* 编译器将Annotation存储于class文件中，并且可由JVM读入 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="Annotation-通用定义"><a href="#Annotation-通用定义" class="headerlink" title="Annotation 通用定义"></a>Annotation 通用定义</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyAnnotation1 &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>@interface</strong></p>
<p>使用 @interface 定义类时，意味着这个类实现了 java.lang.annotation.Annotation 接口，表示这个类是一个Annotation。定义 Annotation 时，@interface 是必须的。注解不能继承其他的注解或接口。</p>
<p><strong>@Retention</strong> </p>
<p>指定 Annotation 的策略属性，是只在代码中，还是编入class文件中，或者是在运行时可以通过反射访问，其中属性就是 RetentionPolicy 的类型。</p>
<p><strong>@Documented</strong></p>
<p>标记这些注解是否可以出现在 javadoc 中。</p>
<p><strong>@Target</strong></p>
<p>指定 Annotation 的类型属性，类型是 ElementType 。</p>
<p>@Inherited - 标记这个注解是继承于哪个注解类(默认注解并没有继承于任何子类)</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Java泛型</title>
    <url>/2023/04/19/Java/Java%E6%B3%9B%E5%9E%8B/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring编程思想</title>
    <url>/2023/03/26/Java/Spring/</url>
    <content><![CDATA[<h1 id="Spring-IOC"><a href="#Spring-IOC" class="headerlink" title="Spring IOC"></a>Spring IOC</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>IOC （inversion of control）控制反转，是一种编程思想，对面对对象的补充，通过将对象的创建，组装，管理反转在框架中进行，实现低耦合和可重用性</p>
<h2 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h2><p>创建工厂</p>
<p>读取配置文件</p>
<p>通过配置文件创建实例</p>
<span id="more"></span>

<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><ol>
<li>三层架构 Dao - Service - Controller</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">HelloDao</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Arrays.asList(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">HelloService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">HelloDao</span> <span class="variable">helloDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HelloDaoImpl</span>();</span><br><span class="line">     </span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> helloDao.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">HelloService</span> <span class="variable">helloService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HelloServiceImpl</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        resp.getWriter().write(<span class="string">&quot;spring&quot;</span>  + helloService.findAll());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>当需求发生改变时，代码需要更改，要重写接口代码</p>
<p><strong>解决：</strong> 使用静态工厂创建特定的类，不用在Service中写死代码</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> HelloDao <span class="title function_">getDao</span><span class="params">()</span>&#123;</span><br><span class="line">    	<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HelloDaoImpl</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">HelloDao</span> <span class="variable">helloDao</span> <span class="operator">=</span> BeanFactory.getDao();</span><br></pre></td></tr></table></figure>

<p><strong>问题：</strong>需求发生改变时 仍然需要修改代码</p>
<p>解决：使用反射从配置文件中获取具体的类</p>
<ol>
<li><p>定义配置文件</p>
</li>
<li><p>程序中读取配置文件</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanFactory</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用工厂创建特定的类，不用写死在Service中</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * version1  public static HelloDao getDao()&#123;</span></span><br><span class="line"><span class="comment">     *         return new HelloDaoImpl();</span></span><br><span class="line"><span class="comment">     *     &#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">getDao</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">helloDao</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;helloDao&quot;</span>);</span><br><span class="line">        <span class="comment">// 利用反射创建对象</span></span><br><span class="line">        <span class="comment">// 通过更改配置文件就可以解决代码不能切换的问题</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class&lt;?&gt; aClass = Class.forName(helloDao);</span><br><span class="line">            <span class="keyword">return</span> aClass.getConstructor( <span class="literal">null</span>).newInstance();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException | InvocationTargetException | InstantiationException | IllegalAccessException |</span><br><span class="line">                 NoSuchMethodException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 读取配置文件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Properties properties;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        properties = <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            properties.load(BeanFactory.class.getClassLoader().getResourceAsStream(<span class="string">&quot;application.properties&quot;</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取</p>
<p>之后使用外部配置修改解决代码切换的问题</p>
</li>
</ol>
</li>
</ol>
<p><strong>创建的对象不是单例</strong></p>
<p>重复使用对象会出现使用很多个实例的问题</p>
<p>解决：使用 Map 存放创建的对象，同时加锁保证线程安全</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">getDao</span><span class="params">(String beanName)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!cache.containsKey(beanName))&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (BeanFactory.class)&#123;</span><br><span class="line">                <span class="keyword">if</span> (!cache.containsKey(beanName))&#123;</span><br><span class="line">                    <span class="comment">// 利用反射创建对象</span></span><br><span class="line">                    <span class="comment">// 通过更改配置文件就可以解决代码不能切换的问题</span></span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        <span class="type">String</span> <span class="variable">helloDao</span> <span class="operator">=</span> properties.getProperty(beanName);</span><br><span class="line">                        Class&lt;?&gt; aClass = Class.forName(helloDao);</span><br><span class="line">                        <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> aClass.getConstructor(<span class="literal">null</span>).newInstance();</span><br><span class="line">                        cache.put(beanName, o);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (ClassNotFoundException | InvocationTargetException | InstantiationException | IllegalAccessException |</span><br><span class="line">                             NoSuchMethodException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cache.get(beanName);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<p>放弃创造对象的权限，将权限交给 BeanFactory</p>
<p>这种由别人或者对象控制的思想就是 <strong>IOC 控制反转</strong></p>
<h1 id="基于注解的-IOC"><a href="#基于注解的-IOC" class="headerlink" title="基于注解的 IOC"></a>基于注解的 IOC</h1><p>通过配置文件获取还是很麻烦，根据注解创建 Bean 实例，通过注解获取到 Bean 实例更为方便</p>
<h2 id="流程-1"><a href="#流程-1" class="headerlink" title="流程"></a>流程</h2><ol>
<li><p>扫描包</p>
</li>
<li><p>获取包下添加了注解的类，获取其中的组件 Class 和 BeanName 封装成 BeanDefination 存入集合，这个集合就是 IOC 自动装载的原材料</p>
</li>
<li><p>通过反射机制创建对象，将动态创建的对象以 Map 的形式存入缓存</p>
</li>
<li><p>通过 BeanName 取出对应的 Bean, 使用反射执行方法</p>
</li>
</ol>
<h2 id="实现-1"><a href="#实现-1" class="headerlink" title="实现"></a>实现</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 容器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAnnotationConfigApplicationContext</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> HashMap&lt;String, Object&gt; ioc =  <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getBean</span><span class="params">(String beanName)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ioc.get(beanName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pack</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyAnnotationConfigApplicationContext</span><span class="params">(String pack)</span> &#123;</span><br><span class="line">        <span class="comment">//1. 扫描包</span></span><br><span class="line">        <span class="comment">//2. 获取包下添加了注解的类，获取其中的组件 Class 和 BeanName 封装成 BeanDefination 存入集合，这个集合就是 IOC 自动装载的原材料</span></span><br><span class="line">        Set&lt;BeanDefinition&gt; beanDefinition = findBeanDefinition(pack);</span><br><span class="line">        <span class="comment">//3. 通过反射机制创建对象，将动态创建的对象以 Map 的形式存入缓存</span></span><br><span class="line">        createObject(beanDefinition);</span><br><span class="line">        <span class="comment">// 自动装载</span></span><br><span class="line">		autowireObject(beanDefinition);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">autowireObject</span><span class="params">(Set&lt;BeanDefinition&gt; beanDefinitions)</span> &#123;</span><br><span class="line">        <span class="comment">//获取注入的集合</span></span><br><span class="line">        Iterator&lt;BeanDefinition&gt; iterator = beanDefinitions.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="comment">//拿到bean 信息</span></span><br><span class="line">            <span class="type">BeanDefinition</span> <span class="variable">beanDefinition</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            <span class="comment">//获取当前需要自动装配的对象</span></span><br><span class="line">            <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> beanDefinition.getBeanClass();</span><br><span class="line">            <span class="comment">//拿到全部属性</span></span><br><span class="line">            Field[] declaredFields = clazz.getDeclaredFields();</span><br><span class="line">            <span class="keyword">for</span> (Field field : declaredFields) &#123;</span><br><span class="line">                <span class="type">Autowired</span> <span class="variable">annotation</span> <span class="operator">=</span> field.getAnnotation(Autowired.class);</span><br><span class="line">                <span class="keyword">if</span> (annotation != <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="type">Qualifer</span> <span class="variable">qualifer</span> <span class="operator">=</span> field.getAnnotation(Qualifer.class);</span><br><span class="line">                    <span class="keyword">if</span> (qualifer != <span class="literal">null</span>) &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            <span class="comment">// 根据字段的名字获取</span></span><br><span class="line">                            <span class="type">String</span> <span class="variable">beanName</span> <span class="operator">=</span> qualifer.value();</span><br><span class="line">                            <span class="type">Object</span> <span class="variable">bean</span> <span class="operator">=</span> getBean(beanName);</span><br><span class="line">                            <span class="type">String</span> <span class="variable">fieldName</span> <span class="operator">=</span> field.getName();</span><br><span class="line">                            <span class="type">String</span> <span class="variable">mothedName</span> <span class="operator">=</span> <span class="string">&quot;set&quot;</span> + fieldName.substring(<span class="number">0</span>, <span class="number">1</span>).toUpperCase() + fieldName.substring(<span class="number">1</span>);</span><br><span class="line">                            <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> clazz.getMethod(mothedName, field.getType());</span><br><span class="line">                            <span class="type">Object</span> <span class="variable">object</span> <span class="operator">=</span> getBean(beanDefinition.getBeanName());</span><br><span class="line">                            System.out.println(bean);</span><br><span class="line">                            method.invoke(object, bean);</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (NoSuchMethodException | IllegalAccessException | InvocationTargetException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="comment">//byType</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">createObject</span><span class="params">(Set&lt;BeanDefinition&gt; beanDefinitions)</span> &#123;</span><br><span class="line">        Iterator&lt;BeanDefinition&gt; iterator = beanDefinitions.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="type">BeanDefinition</span> <span class="variable">beanDefinition</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            <span class="type">Class</span> <span class="variable">beanClass</span> <span class="operator">=</span> beanDefinition.getBeanClass();</span><br><span class="line">            <span class="type">String</span> <span class="variable">beanName</span> <span class="operator">=</span> beanDefinition.getBeanName();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> beanClass.getConstructor().newInstance();</span><br><span class="line">                <span class="comment">// 属性字段 设置值</span></span><br><span class="line">                Field[] declaredFields = beanClass.getDeclaredFields();</span><br><span class="line">                <span class="keyword">for</span> (Field declaredField : declaredFields) &#123;</span><br><span class="line">                    <span class="type">Value</span> <span class="variable">valueAnnotation</span> <span class="operator">=</span> declaredField.getAnnotation(Value.class);</span><br><span class="line">                    <span class="keyword">if</span> (valueAnnotation != <span class="literal">null</span>) &#123;</span><br><span class="line">                        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> valueAnnotation.value();</span><br><span class="line">                        <span class="type">String</span> <span class="variable">fieldName</span> <span class="operator">=</span> declaredField.getName();</span><br><span class="line">                        <span class="comment">// set方法</span></span><br><span class="line">                        <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> <span class="string">&quot;set&quot;</span> + fieldName.substring(<span class="number">0</span>, <span class="number">1</span>).toUpperCase() + fieldName.substring(<span class="number">1</span>);</span><br><span class="line">                        <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> beanClass.getMethod(methodName, declaredField.getType());</span><br><span class="line">                        <span class="comment">//数据类型转换</span></span><br><span class="line">                        <span class="type">Object</span> <span class="variable">val</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">                        <span class="comment">//可能会有很多类型 篇幅过长</span></span><br><span class="line">                        <span class="keyword">switch</span> (declaredField.getType().getName()) &#123;</span><br><span class="line">                            <span class="keyword">case</span> <span class="string">&quot;java.lang.Integer&quot;</span>:</span><br><span class="line">                                val = Integer.parseInt(value);</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> <span class="string">&quot;java.lang.String&quot;</span>:</span><br><span class="line">                                val = value;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> <span class="string">&quot;java.lang.Float&quot;</span>:</span><br><span class="line">                                val = Float.parseFloat(value);</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">// 执行</span></span><br><span class="line">                        method.invoke(o, val);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                ioc.put(beanName, o);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InstantiationException | IllegalAccessException | InvocationTargetException |</span><br><span class="line">                     NoSuchMethodException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 扫描包中符合条件的类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pack</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Set&lt;BeanDefinition&gt; <span class="title function_">findBeanDefinition</span><span class="params">(String pack)</span>&#123;</span><br><span class="line">        <span class="comment">// 1. 获取包下所有类</span></span><br><span class="line">        HashSet&lt;BeanDefinition&gt; beanDefinitions = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        Set&lt;Class&gt; classes = getClasses(pack);</span><br><span class="line">        Iterator&lt;Class&gt; iterator = classes.iterator();</span><br><span class="line">        <span class="comment">// 2. 遍历类，找到添加了注解的类</span></span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            <span class="type">Component</span> <span class="variable">annotation</span> <span class="operator">=</span> (Component) clazz.getAnnotation(Component.class);</span><br><span class="line">            <span class="keyword">if</span> (annotation != <span class="literal">null</span> ) &#123;</span><br><span class="line">                <span class="comment">// 获取Component的值</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">beanName</span> <span class="operator">=</span> annotation.value();</span><br><span class="line">                <span class="keyword">if</span> (<span class="string">&quot;&quot;</span>.equals(beanName)) &#123;</span><br><span class="line">                    <span class="comment">// 获取类名</span></span><br><span class="line">                    beanName = clazz.getSimpleName();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">BeanDefinition</span> <span class="variable">beanDefinition</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BeanDefinition</span>(clazz, beanName);</span><br><span class="line">                beanDefinitions.add(beanDefinition);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3. 将这些类封装成BeanDefinition装载到集合中</span></span><br><span class="line">        <span class="keyword">return</span> beanDefinitions;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * get classes</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pack</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Set&lt;Class&gt; <span class="title function_">getClasses</span><span class="params">(String pack)</span>&#123;</span><br><span class="line">        Set&lt;Class&gt; classes = <span class="keyword">new</span> <span class="title class_">LinkedHashSet</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// get package name and replace to url</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">packageName</span> <span class="operator">=</span> pack;</span><br><span class="line">        <span class="type">String</span> <span class="variable">packageDirName</span> <span class="operator">=</span> packageName.replace(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;/&quot;</span>);</span><br><span class="line">        Enumeration&lt;URL&gt; dirs;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            dirs = Thread.currentThread().getContextClassLoader().getResources(packageDirName);</span><br><span class="line">            <span class="keyword">while</span> (dirs.hasMoreElements()) &#123;</span><br><span class="line">                <span class="comment">// get next element</span></span><br><span class="line">                <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> dirs.nextElement();</span><br><span class="line">                <span class="type">String</span> <span class="variable">protocol</span> <span class="operator">=</span> url.getProtocol();</span><br><span class="line">                <span class="comment">// if it is saved at server like a file</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="string">&quot;file&quot;</span>.equals(protocol)) &#123;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">decode</span> <span class="operator">=</span> URLDecoder.decode(url.getFile(), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">                    findClassesInPackageByFile(packageName, decode, <span class="literal">true</span>, classes);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;jar&quot;</span>.equals(protocol)) &#123;</span><br><span class="line">                    <span class="comment">// 如果是jar包文件</span></span><br><span class="line">                    <span class="comment">// 定义一个JarFile</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;jar类型的扫描&quot;</span>);</span><br><span class="line">                    JarFile jar;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        <span class="comment">// 获取jar</span></span><br><span class="line">                        jar = ((JarURLConnection) url.openConnection()).getJarFile();</span><br><span class="line">                        <span class="comment">// 从此jar包 得到一个枚举类</span></span><br><span class="line">                        Enumeration&lt;JarEntry&gt; entries = jar.entries();</span><br><span class="line">                        findClassesInPackageByJar(packageName, entries, packageDirName, <span class="literal">true</span>, classes);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                        <span class="comment">// log.error(&quot;在扫描用户定义视图时从jar包获取文件出错&quot;);</span></span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> classes;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">findClassesInPackageByFile</span><span class="params">(String packageName, String packagePath, <span class="keyword">final</span> <span class="type">boolean</span> recursive, Set&lt;Class&gt; classes)</span>&#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">dir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(packagePath);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!dir.exists() || !dir.isDirectory())&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 获取目录下的目录和以.class结尾的文件</span></span><br><span class="line">        File[] dirFiles = dir.listFiles(file -&gt; (recursive &amp;&amp; file.isDirectory()) || file.getName().endsWith(<span class="string">&quot;.class&quot;</span>));</span><br><span class="line">        <span class="keyword">for</span> (File dirFile : dirFiles) &#123;</span><br><span class="line">            <span class="keyword">if</span>(dirFile.isDirectory()) &#123;</span><br><span class="line">                <span class="comment">// 目录继续往里找</span></span><br><span class="line">                findClassesInPackageByFile(packageName + <span class="string">&quot;.&quot;</span> + dirFile.getName(), dirFile.getAbsolutePath(), recursive, classes);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 去除.class</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">classFileName</span> <span class="operator">=</span> dirFile.getName().substring(<span class="number">0</span>, dirFile.getName().length() - <span class="number">6</span>);</span><br><span class="line">                <span class="comment">// 添加进class</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    classes.add(Thread.currentThread().getContextClassLoader().loadClass(packageName + <span class="string">&quot;.&quot;</span> + classFileName));</span><br><span class="line">                &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">findClassesInPackageByJar</span><span class="params">(String packageName, Enumeration&lt;JarEntry&gt; entries, String packageDirName, <span class="keyword">final</span> <span class="type">boolean</span> recursive, Set&lt;Class&gt; classes)</span> &#123;</span><br><span class="line">        <span class="comment">// 同样的进行循环迭代</span></span><br><span class="line">        <span class="keyword">while</span> (entries.hasMoreElements()) &#123;</span><br><span class="line">            <span class="comment">// 获取jar里的一个实体 可以是目录 和一些jar包里的其他文件 如META-INF等文件</span></span><br><span class="line">            <span class="type">JarEntry</span> <span class="variable">entry</span> <span class="operator">=</span> entries.nextElement();</span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> entry.getName();</span><br><span class="line">            <span class="comment">// 如果是以/开头的</span></span><br><span class="line">            <span class="keyword">if</span> (name.charAt(<span class="number">0</span>) == <span class="string">&#x27;/&#x27;</span>) &#123;</span><br><span class="line">                <span class="comment">// 获取后面的字符串</span></span><br><span class="line">                name = name.substring(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 如果前半部分和定义的包名相同</span></span><br><span class="line">            <span class="keyword">if</span> (name.startsWith(packageDirName)) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> name.lastIndexOf(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">                <span class="comment">// 如果以&quot;/&quot;结尾 是一个包</span></span><br><span class="line">                <span class="keyword">if</span> (idx != -<span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="comment">// 获取包名 把&quot;/&quot;替换成&quot;.&quot;</span></span><br><span class="line">                    packageName = name.substring(<span class="number">0</span>, idx).replace(<span class="string">&#x27;/&#x27;</span>, <span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// 如果可以迭代下去 并且是一个包</span></span><br><span class="line">                <span class="keyword">if</span> ((idx != -<span class="number">1</span>) || recursive) &#123;</span><br><span class="line">                    <span class="comment">// 如果是一个.class文件 而且不是目录</span></span><br><span class="line">                    <span class="keyword">if</span> (name.endsWith(<span class="string">&quot;.class&quot;</span>) &amp;&amp; !entry.isDirectory()) &#123;</span><br><span class="line">                        <span class="comment">// 去掉后面的&quot;.class&quot; 获取真正的类名</span></span><br><span class="line">                        <span class="type">String</span> <span class="variable">className</span> <span class="operator">=</span> name.substring(packageName.length() + <span class="number">1</span>, name.length() - <span class="number">6</span>);</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            <span class="comment">// 添加到classes</span></span><br><span class="line">                            classes.add(Class.forName(packageName + <span class="string">&#x27;.&#x27;</span> + className));</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">                            <span class="comment">// .error(&quot;添加用户自定义视图类错误 找不到此类的.class文件&quot;);</span></span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>用户中心项目</title>
    <url>/2023/03/26/Java/%E7%94%A8%E6%88%B7%E4%B8%AD%E5%BF%83/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="密码错误" data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="201ef61504e09a5fd37ed65419923dddebd93f42aee35f58daa12df102387524">7d523576801f6f045f8677fbbfa672e2829e4947d19231c20b123458f121e1595f4fa507b0e567080180cab9b97db03da672b7e971345bc2d24213fa3f23f16e478326c3aadf58eff4289c7e6637edf1141cd3be46973af5e4d1225ce88e7557427071c976dd301f609f8705a1fea1ee7fa0ee4c9c4de600aa5afbce4a3f8a711475ac7b28859a63fd08519e3fd1ba5a7cd871b2220c49449561e64ccf7665d0d712703cb74691a95785009cf32336d46765f38516567ad8c37b4a25655bafb5adf89114a339d8072d19f75dae5071e774de865393060e940a764d35e945a36b1381f08e11f0359e64c9203c2d0425d7353a392cb2961db00917431f9d80ac9444676256ebbab818b3445014f4afe5016d4e410436d7673b2384a29895ec61b55c9d1ff5be7a09b913762055f8aeb814fe94ae810c9d903fbdb8b3d01629377197120e169d82623a395ec6a19d63fb6e537d3996612c7de0df5059b6fcbbe05510bf91cd3715a8f6ae5d22a64a0a1e44d836699adf258e64991a17d51e477484bd15c1daf02cc52a2ddfbb51d0513d713f1f877959c3efb6083fa81ff5a327cf57dc1075154a3bcc174e89df099cefd4fa28e5892f22a2580a27edbdf3e984910819b1fd4128c70d95e806da50fe60fdef9ab44c8cc83bdc5a40d3bdd2d51f986065727b0612638b4344762af7e27e463fdb5eff62873a0b2bcd3a7ca12af2db0bfd352f4a0ecc342e3e834e76299ec5aac19d17b28ae5bb6eb17791d058c5b9f77ac7671568488b398582b075b14aa59fa30c8663be19f1ff113f535a0f3739dd6a4b3fb1729dc07072d0cce8e677ad08dce88c0a923fcc038f4c982f868c3b0386843bb6c2254417b172c15746e99533a8563c6e14ec85aaabf4764781b98c2df4e79c3a591326b7e12db624375728eb7c6aa46991c295f1fac7043e01341ac24fa69b5b5e24fd9951112eef67436920c1927422375fc2b67881974d36ed981323b5e1fbc09d5cfac8a2f2df09d570de0a9429a14e59f58086cfa23449cbe472df548b84eabc972aaaf8125d1cb7317bdbcd313b7dd8b840168e9bec85270182cd272bcb8a8bcd3168e8fb1b2b7c632f374f3d539fc3e5552b45e5e81add0ec5bfcdcee197153f2b7f18f648c2abf0d5903b7c2506e2af57c3b99bab34497b20891d5491f67a3594ce6d84f7928a59ed3adfb511a531e03c143ce6cae172de518bf843222c122f65873e8bb77eb2f97ad49ee9d91a020e0a9e2eb9247a545cee440b2a79b05c35b314994b3e21f91a03a263909ed883457c3f54c69c6934f723c6d4d2ef58c5d8a041866e66257b5376b492199540301c255375c7e76636290bb02fa7e38966e4ffa800e80d6b46fe8bace3f5bf7e92e122ba14f6f0953f6c56697fe910f5bbb66b67664472dcbe8f7bf43e553833b1737bf7227ce238cc9fbcc7940317ba4dd500e59a5b5e0281b836834ba785f602a4c4d91b2049c261b90ce921c99434df0b1afd7ee7aa70092967df5cac988be7d35c5f8dab7279e743d8f6c9499dcdb7ba845a598fc8ae02d6284d18514a4ed7e5c6db15b1d792bd4f16c7f89634ea38cd35aa3df018475c87646f40686437aae440ce88fc1b9497dac2981c1cec0f8ead440a6a370d2f2ee64c1e300773a53c1ad1561e3d8bba2d9e5580d67a0106f3637881ef4cd0389c2b66ac7f6437b1ad27ee5692df0087832aa6f06aa5e89930ef07ead623426ccc0aafa504f60eb035977718ce51e3967675312f2b6bf8b847295bf8c8b1944141c53e5f7ab7b91fc696df42dc97f3a4392be7b6fbe1cbaac11e47c048acaf5378205fc0715e5cd16678fa83c9c2be5e3fc77e721eb2175a21de58bce23fc067a4d37ba246d91277d04c1dab069999edcb73fd3950b75586cd4a44d8f4620f2099c3ce7c7305216f25b9e847143ede03d2168725f6abb0e4260695b4c79d23932f9c04fea3db4c0665e9446b53f2d6099ccb6805ed2762a64505901f425867eefd09cdfc851ad44282d5a0346eb116db780973dfd4d4d0bf7116a7143b5ae0699e05852cc2044ce2d5e877ea6d15dc159fa4cdf8e4a1b41185f834a353782227a3dc205b84730cde22e7926b99d819e013b445cb3cecbaa8ba029ebf4ae8e1d9a41bfe21798309e9b613bb2c714cd2134d4def872748aa9e7e6cac227e005dffd32b58ab6a5a1434ba4953cff7e0e26328d2f644fa3279d74dadfa54e72e2c4ac0556597beeb4e3e5b6e72ec7a72e0a0ab7593b2f78100d84c7f58471d5e81987317e32ca0ab79b29a39d7af1f568790c18d4bb907fdb835ad4c359139141dee4d69d9f30fa248c5a943e2c81fb805d56601c2d4c3d1d215e20ff2f70f76d24027fb7639e9a247853fb394b6ab77f3eb0a5458e4dc7a4fc64da03fe0f6142b3f04aa02c99f300647ca8e6c00685656cea15bfd08207a00b3a42fab40b39b3112e8866b8320098e855d5521d1fad4d1bef91d09c6648184bca22c9712311b5bf581c06a865fa68ef1767f76212f386d6f790130be7daf9339a94aad7d2ee1138ac50d61f00dc9c5e529166b936c8e88d4f09b3b0a54859434527e73d1751cd1c7e793ff7d206744f6a2dcaced2eeac7c73e91921b70dc928b05b34264f8221eb63add508c890c7c742dd235210717f2b21469391f1588055f24fde840b72c23ad4ef5ef8289848f287406a0d0ec77286e618504d8024312c6d889d8ec6a69c309397fb35a9e99eac0e72d1632378b11f72cc8b6c898c65d42b45f3afdfc618e2a90fde47fda0a81ad33cb4aad875190b41a42cb98cf11c5f6e3c84db072e6c85c84f54a701deaced8b0a35b987df2e3682d90f222c0b6b372f5b75438e083c9ec0c66ef8a63c1b6ba5330c1bb0089e4f660d0dc2f027bee5d339e1a3a6fdab4cfa38aab5dedcdf2fce21431ca2433da03b4ec9ef281dac83169a38bc40dc2e443bf5564aa7e3dc815db3e57269025bbcf2bfe088e44b8dada7a69adfc4bc1146c80c311ebd049eab6d52cd0aed08e9041dd58ae0088fb1f1a8f612f29da4cd723ab5530855c0761cbae58e079525d042a1c5d257f6415aaccc989c1ee93160aefb112dcbaa72f321a1ea686998f970f5aad1f402054a65c4dbb461321986f82301973e7a362612dd3b0814beddaf77890a7118ee40ed6bc3e3a2fe8fcd6d2ff6b0deb4a73c698aa7c005572f09ef60406d1c05820534157249316e909780f4aef2e48267542a07757f25afbe3c7b25540cd948c81048cf4121a9133ebe2139198ac16a23ae703653b8fb871c1f8d57dda142ded949308ddb79fe6c5478365e59be37ea274d416173ffe951de11997e4ed808a90a997bccb1d2d65bc9d2c686b91757a98fde89f371e5c56d826e3b3a8ef17b5f60677ae2e0207b872b4773a1bca5e389a2d7eb672714c68cd345f7f1d8da92004513f1e1fc0942dfe2859200a9f9bd0157983e2e0018620dc8b581f0dba5ab4a9c02f3a4b0d0a64d6485fc50cfaebbad3f331f2bebcbac6e250ea8e142ba1388880c7fbe0a560dde0e93b5a4e98e50314af0cc8c18668fdd370aca79d3d7913b09dfcd8666543cfa41f650fa3328d1174e20c52e8f603927d2650d24abfd376bdcad9c10245175a317340448bfaffdbdf5923e08720bb8cccb13e38568bbdbe249823311059cf6a6292bd7385479c2993f29f8e25753e8c03823621ba1451c535739be4030b3090ba1e2f04e2fbe8a8f40fad1b834e957f3db20a215084826ec58f7983816b3ea4e81ccfc5b566528cc85fc6ee3571c91787d3500b8ad04bb7c3bcaa0c8a7b03022ccafc93ae9c8d2249434723fa3075d5656ed3c49614804a9ae2d850160cc1f90b28018ec7c4453a6cc8f5ec690ce6f8558c3ed3b6362cd7edc1b9844ada6fdbd1aafa400a316d99e176b010dac41391bde88e233ad03c2aa37976e169c6c4798378e8c627ab7ab42888a4f1708673a4ca0237d63d2c317d34b50507558e5d28a7b2ed69df21d93df53682e13b6de8e6daf35c098f95cc11805a4f8268290fe162d3da34c6bf017126c20584c3643fae0837db709af36e0f1508be30831b06d2676322119825974acc9910334de0c28566b5f0df9d5be8c97559ddc34cfcf78044a074bd708ca8b51ef13ba6d3fc40e916a05d5d5909f50d386781111346079096ec18a132c44ae4a6b8f4a6390e41ae0c9926ac9c31c9ad325f5116ac552777193da30ac0233d5263385aa3b4772093f7ba161db44b5db508b0f2a14de3975b113b212996ff172792379748b3035246f48f8445113d513898bd7ac5cb4c07ad37e8d521c5837dab21b4ad6bb287d07e36482c5549bb87112ce82ecb3433a5e9e3c9657cf70f757b2386379fc67eee7eb43f9a88aea311a5040bce1c9164908dbe10216ab44e02b999106b454cea121f7f582df0b5f1e9518f650ab0cd75d426148197d18d2dff8e20295551a10e00fbf4247c825f5f5247cd71e62b58951b9355cd02b75a096b5bd5da9bc28d271501b6fd43151560e16c15897d9951b97c71ae2f0cbc4319b4da103a37ebf8622736f7546ab8ceb3c925d0dd872aa1fcf15a20b5c1dd4a55c5ab5bbc7fc8adc28ed3356d8d10785a088d2b1aa60e5bed44b097715d45d71a60ff2a5d93cdca502bb74f70982b16a74b870fa1055e0a158abe7d9389f0e6f1df4bec8a5cc7a57b9ac9160b9e5bcd1d3f32b32b67417bce3651c6614f0d16f3ceac843f75ccc3b044f6e015b689dd68edc2f04b30f0dee022b3484d15e7daacddafc51e9499c53080812fb8df0eae92fab2974b37d7a209108a1f6765b51575ae29de15b5e858ba2de7fef0ac74d9b609751f978d53d9a2522e5c1bb3ddcf2fc018a5ccd30b41bff9876462009a14439ff0bac0678834e97d12041bc27c35bce71f6561dff525e813ccb707cdf8367ec0aa1019e137f5f0c1029c3b64640e630c014ff8ed5711cdfa6aa68adb5cf02c9d17429374d0e6deae1017e70ecd0a8d6beb0789a6aa134ab13c97ec953a318173b76f17abdcafaa671517cca4ff68a60724e8602dce5504dca7fbdf6656b6e24b7e21595480bf48f07f83c9eac169f9762705a4c91f15d793724b0b850cfcbae22d4f6bd895a1e5ab87c1609a0fc0331a4e02a155c10139e7b71dce679034b525230a8de3db3421b87a97247dc0409895bff6b88c154192c926a964c788d5453aada006fc049a7a285fc4ce1419fe99dab0ebc45784b2341dfac2568dddbc1129c8a18ae19885d29b6593d16526b9b2219a41e93de5b20b5a68af162f3eb013d57147a7940d6b0df30bcb7ee40a99bc1cba08ff55eb854597ba0f5824646e9b601990c2de0947f3e161c7d973001bb4dadad3b207b9e153d8ecbfe145a5846faae4dc65af8c1a956135ca64187b5d6559821a45e91cbe850f8308f908aa928c307bc928eeddb063f183d2257d4d32c2ccfb07f1ea1a6e332fdea59f53357489861094f48ec29aae845b7894486c47c168840151e056aafe66b123f667a33077e62aa2dd73a141b6a4507cec5202425cbb07e3fa8ea67e6aa1e6f0dbe8bb185479073fa34663caf6bae073c814a94d02d4d6edd04858f7bb08026cd38362d09d2537871a92ca27537ed57454e71d72f1b8410d386907103973770df963b7aa36bf42cfd7f07dc1709e1a377cbb2c7a50a2f1058227b763b346930a0d906e5304e116673e35781477343ec011fe14aede2190bdd5bb4589d7a7200f758528409e581658c19a295bceec772b848d73ec002321758e83fcfa07ae131c519ad94d2f0a022ebadaa2cb78b50c5d9211b96d195af1cc7cd0fd1e49e1bce17ccb9ba07d909ca15e47ce592cd9e94afbdbe7cd97e456efa5f6f652e8fe963d78eb47d9481eae27051fff0a3846a548f13e3b164d1d733445554373e55c9e8bd282f4cebe547912e43f893af4ccb04fb9d85e817b3cf2adf82b9979a4bb20f001c35265219bd70b32c9abc3db62c10805c8021004b3b4f13d8e9a2ec20d2b42396a8e6ad1f1309e4c04cbcbba7b635117d33e4b221bce928cf3aa848843b56280afb1d2bbf38f49723e239ca4722c2138af1039af70eb298e656e6909bd6c7bbda6473c5e959fde8b54447f433234679d2fd164a5ef6b4e109b7687f42aed7a331794cc83b5ae518802413dcc5f4c7580d6edcb2d3d4dd48c50856abd2754d5c7973be0b33d2812994bc70bb7124789ff8092747ce8449c10f5638360154917a96a499f6f1c9467c18bc25fe91879f91e0929496ffae53a4b8066af27cade8161af01fffa73bb153c94beed8a4be65dcd04a3f18951bd90cccbe599df1023a249d3e93db11e59cfcf6d903b636cb8f93ee1426e18068e29808ba3079fc05de0d312052f21ba4db3e9c2f2ae19485d0d30aba124b137fea5fea8579744e3bebbf49104e955a8d80386bb0bec9f7500f9b85246a8185a5465ef317e50d17c9a9db1c76c8e4f7270202ffbd6acca0b40d0042797d12ea7e6087598429a05d19e2bd6d16bda74ea764be346333783a8ca184a3c9266f74daf499154aecdaf19c9263f8f8e55c0f58b270e3516617b341d83666f5918fac8f4b778e234022898cb1233c00889fe034cccbfdeb2a17af7226c7b6e069274880cf8945d050cc84fe242f94ed8c26351c7552a2dd7b7ff867b3a2bc742dd4f74ad9902a1cc0715c1068bd6282c1bcf315450eb459d8d63e12a4aa9c5114d3a65150acea682fabd38dced7fe92eeb872e15c5c1e4808ffad40109b3d7331c0e4ba988e241e0371d462d8a2d18a191b6ff08a806281cd64e7ef9b978a8ed79cb8bc40fa5fa43a66ca92e65762443fc3858f50df9a8d3f7c211706b4af5c5da608bbc0c81cb1353570bff57d03765efe6e684b5d8274df7f835e913000e05e417c9bbe5c92eeef751a09c07be25da0aec17fa261ae0f7ecbe1b808d42199f97b6bcce6badf327563f9303b62b1bc3929bbc3a971f02d55afeded0138316c228213cbd8bea5bbca62a8f562884d38853e95039b6a1a6092d2d1c2a94c0649eaaec66eaa26d8d90189c6014f8b1bb6577c866b7917363f1a57a3d897e1d16b55c7fb43f03cc04fc84ba94d9d76e860bbd28804b415c462f3b42b6640ee501188b2b01a13faac71c019d3bfeab1f212e184ce420cba6888489d7cecc998e749e8beb53c0ae1cc202b7c52912d37213346ac264ad281e0766cbe18f8404046638a2f9071aa15a6b2aeb622708cd9dfbad9ea85a726eb9937a48f0ca8c26ebbc8236f3fa91c300c6583e2016342739b4bd434e8ce7e3dc7025c0081554db74e6d7004fc6af96bb6983a8eb47100f5b79b4118f94fe9dac081f2de13c30c77d97b4516f1bdea16c6f55ac38d90c72e7021b23bba8a33771b7647b91ceb05f0426a64edb80ea5b23cb88a906d16f66e1861dc21d7cf3da04788cffd24c9c0e94d2a9d50a5bb89d9a073f4a676c906aac1adf4c03f10351f08d77724537ce4b52d282bf569e20b97fd76c12ab9bb336b37e389bde086bb8e16c9c71023a7fa58531f794c08e3fb8d5af546a94355330cfdde665ea7b09d77c5ec75f5ac2a810d2ef9cd57fddca81def5961787ec2b49f0a374776621773a2485920c576ecfb272e14fc52f88981f189a972977138d112dab2d17fa72864c1f6241d6e7ba7d0176d4e9e39433976574adbd8b45941246645bd138db157e72abbd8b27fe0e2709b662e87399aa481f80e2afc85492cb58525dfe5554adb0ec5bef07e242e19c95a6fd36162852bd4d9de944a1928dfb9ac2663718ed58e888be3c11db31b58090cce3ae320e278cea77859c13b103840ae65be4a0b27600a855dcf2e3d4e3df32e742f7aca064b88e12cb39a35884004679c0126593a43aca12d9ac45eee23ef5c962400980a2f646167b39a10fccfcf33fefa6556dbcb8fa07b3f71669bcf431179099b8085cc7e3addc1d1f47786f2b61bb8cedd3b3bfb7d13486bd77d4372d37ce44750424ea494ba9374d10309905f8b45ba8a2104ca66b42b10de71cd6b07e3a41481a3254c3f922b33673aa599377d45131ce027fa0ab6e30cfb8642c2729c6dd33a4083a080b22ba8832baa4635025a25dcaa6901f4cba76482664626294d668df3ae3337486589b1ee6aa3b5d8258165b84951761cddd751d3311830c9424ed0b1bc68e38af92d67519f4d7884c1043d7eaeaab7f1c74fad3105a17ff0b79e793744164364eed788f20654363f7812c0597b17e80f47fcf4da57a5f33f6d0031985d8684455ddfb9ba1569da14f36db6eb9a0388e8c5e91a80460f78cbe389d85525bbcf0496abbb89942f8a6784bc868b87dd6fcc145b9c08fedb30952022e2d95eb9790a5015bb3a20a1d97b625efe8b4725690ebb621c00be5884463850059c296a0e5649a1dee1cb4d449894463258bf2eaaf45d86df209fbc5f3edb183096f1b4b423f4041ab84fc7ab08af7722c048f882ddd1e837a22bc395df6974250052e1c86a89e76b58f87a2a8524fac532403b38aef09cff9686c41e95d5b483524e991cff9389d5e63262f4f2ff0ae8611aef71181e17f75a82114e6b7adf87ff47e3e1a58b0cd67cf5b65b2f73c32e14285fd70e0ce7dcd60f7b0b809c917940b47f99f31aaf85d1ce0cc11c5c7b9838045454766d20978dab47f9d0d35bc6b2103785f97a7c163567d2d014fb9f9c2e7de776cc448bcef84f1dfb14115d56a6eba5cc760d5e225ec2bfdcfd508ede8d738d2cf5496d3fc7abd67249b3aa2e6593472222f618bc0fae83e58dd13bf916593556de7cc31112327456831a526fd283930feaee47859debd3b74d63d669a3365c6f8a0e2b9c8c36e4c783515592ca6b29fb456d117394971df606fd53be1490e3beee3f21024c6350cbde3ff8d54b0b129cc58542f170c319e1006bc9d8ced0b21c13246fe8c37f66205e82414986ca005900c8b5d403b805b365719ab5ada8dc27c6dc2d09eab30c1401028c2b3f4e21f2102cfcba5614002668b1bd9d37606b81e54fface5cfd216be7ec3d99352ea86908137393101da21805a1d14b9fe6ac179c2c69c69f9d7e56987de0a495a5c85eb6c37f1d5e8e3120a40789907cbee8347e0e8f33240c71a2085d6eeb8d6c4fe1f342251caabfe160bfb74d702dd2057e09c33ecbf11cfee88f3bc90b23819b6a1167a6b1f4a0077ce307faa92cfdce13d2f0a095aebc8ff84ee8b6165d5f28060fc67aa5e6f3096be6bf7aa8e464b90935406e452ebe77e3261723885d3e22d43b05b050a31a9e476bc21b4a10bbbdc1f6fbc80cdc0f7bfd1dc30cdcfc7f84f437471c90e3f263f9071ecaf94ae79383f47daedf070974f453ce8882f65cb622a47d976f894b8cf3af24183c22b9a034568797ae31fde9a1532136db7f2c9ea7984b82d31645613371f84557666108bde7f5663f0e941491a57b4f04e3757421f8b25bf0bf484b939b3b43f9a0b553f33d46533d0c1986d983525ab2ba1f4ca00ca88508086c04545e865be22d5d7c5840453cfd593caad2a10326f27e96c46cbd9754749d9dcf68c6005a5eda12deaae41532a7e8d911dd59116fd51bba82667ca25285ee78228e8b3a9b9676edb038ec6402eccbdee592bd45fdd1975782705e528026cf03f2c52fe390310155c3f61bc43f83658d93ec53ec33ecba6fe9a67326b98a42d394695218d5dc4b838eade7e060b0cfa9482b5705e1ad56cc3069f4ab3deb11a8557bc98e98d68a883dbf267c69fe332eb1d171d681b6bdf6e03366b4464a47233cbb83d959d3ebf3bace2664b68deeafe090e09d2dc473bdc4754f67cd900f03bd7c40b26c82aeb757284ca4ab8cd57b3c6b87a5090252c943a394469bba29d2a9bc7dbbe615af03d669085604e9544cec94c442603400686f9a45961942d3f90c0d3cfb0455baf2db4a608740c140438b867b218c5b9a00473e629af7ee21771c30d5f0d72c2a068c11b7eb50ff9ed5b615fea0e36ed48597ccf324733e5257b91f6233592401be41f8d33706c4e24c1d3888862be452d2dfb9efe72a5c4dbe7834ec6e97d027f98342250bebb94459e4d8c9e0d7154cc7865d35f25d15be93da0b63f96f299a556b14ab642761fa680bd5dfa49d9b7c5536c9d4ee35efe96319881d92ecb552a8bfd4d7f1c3b6cf8507e4184bb05c7cfa2e04e2dc5750c40a6c213a36978b70a9d52ea00b2305d5ff084c170fcf6dc6bc0e82a4960223eaff06909c7e7b8c8db84ab154e397562968ae98bf8cb239c8c585eeaf5ca78abed6f3ec4451585c0666a0f602242f460ebf1ce43c8d83ea66b46e5c8612be2602136b15e0803ed8d3e494fcb5be739f21fdae30afb88487c364ddd9e2ff74aed886685a1fb6b482d395fcddeaa6f1aab4fb1f81a4359409c79a6bcc3f4ac9eba1a595c65bfedea9cd5462cb3c32ed55fffcb1615a2961bc539ff6621f2a7c32863d59b367cb8d256e7d28349f07e92b20ebec2eee0583fc4bd2ddca2159edb771c17bff0d16145fc011969caa2df956760d363185e555a46133b69c20ccead9ebd6834a38562a4a5d5d2f6d2b7c8c4169a36751b34759d808a9ea3d886b7cc999ca5ca061031aa12a14c1ea9882c43aa811d42992dab745c2c3a79c6817ddb53f7c8648831f6f1cf484dc0d68407c17246438a08372446478261205c9724bdeddb6ec33e9657fd1a58588bbd876e81574b7f6c71ac297936e3b067d27d32250856332a362d6f3d8c0c2b6c6eb773699a945e49c314a460f627cb0a6e329550134743ca6674b6b2bf1233229f25fc75b440a48e0ae126547e271ce15ede815a24a92b3a9009cf84848b0d236f6627ff11f9517974a976706592ab28ca648f8c29225a968f0a88baa40ec94c731113ae501a9edd73320a46ecbc7087d9f5a5ca4356cb13678763f1425eeb2df73b608e7825de72ab96ad02d1a63c9934750ac1c78b519122dc492bcedcc9447010416f0f872eaed8dd55f404510d8f3ab3d4b5c8503f4cd78073855f0ac6a43579497998611cb8f30e4775e30d2c7eeda6995a4501bd55b16d3875b33f648ed44ceba01c2d4f8c93406437f82c3c610b64dd0fbb578b121c4eba3d389bfab696ac68ffdca51ce21016b550c8e85c4c90d3480391d13d4a87e38c63fff60eeec357e83fe78e0953d8cb7ca8508dc389c61237b20e713fa65ccce29a03901972048614159ca715ce0f28b70651b095acbd1d610c4c9a8f597018767add71b9765a6ea46549e3773adff2e9da491f36c9015210d055eb42d8c44d16d3720ab29d7328661d7fd42c8f6eff03799384b9f550b45d52decce7accef829695730ae73cb0d859168acc1258ef02d26bec39a2110456a161b37f568ac9650c720448c2853ef6dd7d53c4814592106b43b29593b1cfa682b59c48cd0ececb96da7df2f2c6131557d030c477a0b676e4a4e4f85b9bd57cba6f563fc64f6d953063971b3b523433c27fb1750b283fd3d52f34a7e71d541a6982e1621da547a376b9246cfdf7dfff5e4afa9fdae3cd448091ad6ad6c46d77bbf2512367ff9d66331b236f9802a46d6a2dd0b52f4e370f0e657dd0824db3df07dbc6c31648ccbabded16a0d7ffc40689a9c824baa87e8da2fa0e0b3a175cff7f60feb75480d932bbdae39fae92152bef7b6d0e6115b20172fdae4bfaf05dc2eafe3d7265b746d446646048e283cc563e0857d629c6e4d673368a3b6ebf2b841514230e96c97c84f8da08eac495fb36d06e71fee64ffb13a1d34b3d2a74ba2b1fc55a63cc25ecb0e24caaf8512cc5462dca65b3b290ba2a8f082a660aee0dbd43e4edca125d21294b79ec863dff1d6caa9dec5ada22486bf566130434dbcedb6efdfe4ca7bdda54bd7a3db5bb3b52a780fc9c968b2262b72ba6304050fb9709257bf58a0a70ff56c37505aba21b0572cb02988965ffe2c46acdce1bc8a737040602ac42d29e4df4f811d3267b693286538ef897eecc8a008959116898d4234c6ddba765e46922d58f706f91b8e0fcc2eafdc6371b7b0990e32e4d16ea1a5cce298f5916de2757f3cb8975c34a3de7f735f1121ee0de09577793952b1d94e2e16fc2693051b62cb608a31d38e1e5a1dd24f068779c04d875052f532e85caac45a2157324365c82d58e1d532bdebb63e636eba380e8fb52f210bb81685900a1bc45c31d784114d95a9adeb01c1933eb0a9271fae49ab10bfcc23f84369e899866b015e5018a5977166e8aaed060502d69a25806147b742c24856d4a89a0407edb56f96e861f8648c2b4effc2ae5ea4f1cd1e6211fdd170d7e38152748751e9b46e74a998c5ac5d060131fb17606b0a75392bac0730028b3b850c3b1f3b24ffb44775bfbd5ac1f8436c07dec0bf1c10034f3030d181ec575e752eec0bbe77ba816efc2dfd16b7b5922d68fc19709d2ed92847c91864bedca6e2594dadce422adfd853af02e9f30bdecd193d5ca9fc057a22178c0ef0b6bc041fada972d9172ae006da099933593a1e76fbd143b2ca59addd357133b53a6f676030ff48ba1a8b588820c8d036f38f6ab158e5932054491805e0b966bfb2bfdc66135b7ce556f5f32343f57f1bd95ca6be179bfeedf0fd930ce2b7cbd1b9accd63adfd7b5a09c8ae1506fe868c2d740e577ad0af1d473a62e6eef4937b9dc3fcc10bdaf2bef77d92b513c20d924138f83da9681974f3f143e347b84819571b76cb669507adf76d37bab9cdb1f8492b4f131011838c87744e1534b2562def62247b71e6a98109de35d835919ecebbabaa0037b83314290a49b51ea117d710ba366f7088a9b57c0395b34f88d48a4c141a6093ddfdea45a88a1a2edcb98bb30242a5c404f8ca2eebe20592af19ef5c67f7a53366d41a487a9760f5710f2736a1dcf978f62e4a61b9f7c880e51c737d89a5d1c8594929eb413dc4ca48057a77e76f4aa87e9060026fb6974d5e2165322f2e9f9c82d5dee11cdcf0d814c6940fef78460129dd98a594dce28efcc75d51dcefe826f70f66d00344d5fd05eeb29d8cf0572a5cff4e1c53646da33cd91f60f14603fdd41a1f00e8e633e51ca562f7e374bf8e83955b7e07b990d80a69b3dc0a4920ba14310625b000d803920fdf7d1ec6e563685e9fd5adb74f9249b1c528b71bdb0c479eec1ecf81ef3fb5bf8079fc42e36de0951a664e23ccb95fcf656207b92a6cf6337486dd7c006dcf676f0ca1e505a478dc60a6e803118e46ba0edf7352c94ff63dd7308694672aeecd2b4574bac766c147e37418a11cdfa2207dfa0756f9f1f4522c92ad2217cf6c5841bbdd59f59278fef7a50a96dc290b16d2726862e6235875ad19960f0c8f1b77d5471a68d31f8c6c4582a71e4c89d8e2355f146483479430e91b2348a839654a07bf5b38ebc14d16f75e007c5aaa9c5366d91935d570eabca5094faa6c6b35ab721e294550647a90f28f3e7b8f65bfc476b2870c196d07f664065f65f9a5a3034f303abe71da3992c9ac921c914c4cac834ad593dc5ce131bbf840312920bbcf58a2d41f6423cd651f46a85a14b4cbcd4625f3062ffe18d20640f2b3641580c077f812d4d9cb5b75438623497b54238a68cc893916cd92233869dd22368f0cea290996223b4fc8c68512f2a6921bce8e752392d764d74bfd4ba41c3b397e186488c1bdcbe4c19fe0e7c89549df7a3b71ef3d022719b7dc5876e173218a7ed2c545826acd20672ea9a41a3daaa4b116f147f2cd2649bcf02b3f373f282e7c346b4e2659cd5b694823de6b8e13853f2d8699e0f2c1a3af3438389684f501fb62dab856a6cddc2229725ba60e69edaca23c249d1921d1fe59509e979520ec5cd075acb4d24197d3319e983d9c517d304af194d4cd817e3b93cda6f862055234bb18178e57f877413d28d2fa92c04b096387528bb5c06d617f6ac601e0c86effb0955b3f795decad56fbc7c28ed3adc76feefc76f4ea2f3b349fede5bac7956227b2e669f626016ebe70d626f9c62d27bdcd53b2989bb09a1194b8a641c6a2224cbe2d2a3879edd3966d1a31cc6272b0c2d34ffdaf4a62225baad0769e2edffe540017385a2ceb8914181c8a0134d803a112e876f2f0afd8eef4ba7ac38395862356e2340c9b7f872782b78e96a1fd7e76c3f293fa7b9df4373c4b2c1646ade5dec2e5772badf676bafacbba3d8224f8e38c93e9b67bec78c79de9748a181000395d8937e13020a524a3d1660c94a08410cb04f73fbb62d5e9c1c9b93786bb028664119e417d3ac97c4aae479673be05296dddaa4c28e55ff27c53531a0a1b96fb1888041cbd7f505ca58afb14709bc6a21666f17c6da72ae2c99e4bc30ac09ceaaf17b8a2c9e5ba0ab74a3620940d6c8a53761c18b7e892311d3349f3e0cc4ef2aaaaa3927d5bc708dd29bde67c7c4fc351d30d6f9948c24746948f0bce18c0d5e27dc5ad2e664d44eeb53b404d5b650ed8d8d1e59f8e5756db3bb73060885f97a4e83d68195825560b7bf398c3674a591ef3199c89aea05aac875fdc11cbbd563a2bd1b5edfd5adcb28d0c32d64dc3c2d5a3c9c546c0703dedc34677077cbb15c3b3eefa48997acac725666b5d22146637dd98a12d021bce3f406639dbc47bf7313cf209c8d834765bec3ac0303e033b2f5948ddeb62ce8a147e859ca36634cf584d3d7a19ea8c25e504fdb7b315140abf64fe30f4fb3a59fe41c2aafca7ea4e8b7e5cc8c08e935d777a98470d831116a462aa31d7824a9b828f94b3557c354295861a5ca3adb5b97248d9a91fda9a2e8b6e1cf879318ea96b5f486149280dd605ba7ce33caad9bf393b2474aad27d1d6e532e78b3dd91994fb0b183d2f81969b3d6beb389d2989859442efe1611aae5b065e73a63447aba90da56be652b254738f059a9babcb181933ca4ab8b94f6f900f625e91dea7617fc5ff3d402d3232fb283db155feba81ad4fa610bfaafffd62ed1a3608129ea988096fc2acb0cde05a6084b24beb03d0c472d2926b5e82a32e981a6cd7f7865e1c716ffa4e537880bb96423c491692da4faf581d5078b87ea0fb359ad237c7dc16fff3ab5f39467884ffa46ce05f5e2eec2524ec9b12acf16bff8399683380c9e09f1d3961c8c1d5235e98df5d6b11e296bf8992e5efcfc82ac105487c9f308d870a5a59be4fb1b6fd802fc348b8411c4378bc97a3671d879aa97721a389baa4cb0cb982f788cc04da914e08dbc1440532ab8ed924cb493b0487432ae777d0d5e545ea2facf54f50fec634fb7b20b741b22adfc85eb0fb45076b470e1982b692767768aa1846d15a043967b42cef15189a655b9adf5a019feeecba2d050b69a0f0479bedfe949182e3826c3c2003db8ec1f2f488406ac65a1c7173cde7e2bb5a59046237eebd87fd7758dd889554128bb2693b52b12f41b6906d45fb8be06507250129bd58fa4ec29f659bb408f0049ac3bfae6dcc6fee3f7e6c02229bf002aacbd55824abaec08b7a6206404581dc7a761ab1602b25a88fad4d58860e9fbaac029fa8d5ae7abc2c27f2ef008090a1dab280b52da2727b7d028ac000e4f99672b1aa9417f90b6b39d948eda2b18f6d09ddbd04062810fba6a7c8895f04245535cc97c9a657db0804f7f0e4d09398eace6701cfe52b5fab2d6fb110adcf3509814a0e1b9b9b65d2956cc8111cba184cb5dff4ef5f2773b44bc1f111477e3710d8a0e2dcd10c8bc06163eab78cb1826aa9e82aab2905a4b487552a3d8a4ee366e2195778e9e18f9645f8f015dfabda56fadcef97f223947617e0b81d96a9158e0bc0e5bfede9d3225971ddd08557e9ba5f4c9771fafc65585189b5d015e560179219f6e27ca8c8118faaef9a20a6f06763c50fac67961c14c9a93888f3b6ae23f279263eba9232b71a5fd337b8c012a684dd089ca9722fb3938facc39563cee41f29e26cc66f1ff22a2ee480ea75b59f1c77ff43e755c9a7638f31bdb9bdf05516bd384548dd191b575364981209f24edb94a1cb663fcdcb8e5c39e11ea399aba7dd980ac057d87431cc3f11dc30d5a4300d3b85fcac4ea2bacf270624b201b676573daa71186effe16f3bdb9b5f3ee9de9d46933ac876ab0e5bba664cdd14f91eee2b7fadd8f3392c2dccda1d82b5922ca445249f3dda67e0435f4487c01bc13ebd6e1199cde7a523b28935acab15cc9b6d056f88554591ef0d9f3cb5eb9ed1954d1bbbeed855bb97fc5c833949356f336343e86c53aeb1837115fd9d948516c3b5ffed9232994e5c965babd3bbe4ee345264ddf45a665cead675543b0c61ef5bd825a8c644195bf6d9e0401323fb739198bc5685124a4f9b3b49fb6f928a5323ca9d892a6a3db3444a9e4b0ca28c88c2928e05d334dc223c3b21809412dd301a47def15e701e2aa3f83c99c57d6d820546638e84a23108e88937313a0c2a1b526234d2da1aeb1c981998443b3d190b83737402e32e37648f5105b52ad8d90d6e57e60f005332ef90e0f59251a8aaf2b1f71ca560c3251ffa96372be0ad0519220049d92ffc4d8314eff62adb55b735831227fe352f82258a8213ac7f6c2c256373272e41fa6268e3104e3fc268a71ffcfde854132d19b80e6f158b3b409cb60917f70c0d377bb851b6fb2bd8ceb6b2a8097dfdb49804cbce32b86948fa16a997bb0587bbdc84d506d1b97c391bc1fb766f8c6bcde0aa777e197b7dc7757d6d52210b43349938d6deb0a9d592e02836761d200c7c4156b111a5e108e6a19e84aacf36922457423d3e5cdd76713bf496a43f33741283649a5ab4ded1514bf421fcdb47fb63da274a1c31d87d4de80013624e3015d47e50feacbc849fb7848720af1ae7e125d41ce32bb53de226f3a2ad107bcb9cebc6c0c6c6916e7da725dab6e45b375a0529a7b8566333dab1bc149313061755d1c01a72db88e440b2a8f7e190575cb2f5e7bdcc763f26de5fb8a1af41cb4ff786a1ea9f1d48578ecaaec2361841201601d8ea4457a90e7f2ba283686844264a2fbd9ba011ba815102dc345dba1d742ac84c0b4b969f058eb00d3a4f7839c9418c557f5df2aee0d4171b41e74ded3e70c033f09c0cdd18a8151e3f6ebb9d5ff3db27b80d9dffd47d17aed5db51bba50a6d300d1033cb984c50cf58074dbc2fc834633a8a6fd11fe3fc650ff2a05f86a06acd3c15b2a5658df056033f45dc22b6034c201abbcec38a533cc522b0293bd2ec15b39d5d7a384f6dda194f7d8f2f52d44f79cafa28bd7edec23040ba6f24aab161a99068542c28d555cdf5ce96a992256a3e2b2191dbdbb9c62e2e0ac8c80580af1174ca491498132606c952afa0de9c35438c4be8a2386f19855556e0e5dcb67fe7e57a3c83d7dab0e5b0a553935451dc0f4296c76e031974757af6855500e8e3d510d534337a678db007a9f2d106e550edf0b7af15e27f862932efe5739605fce1be7072babd75b66d2136553f4aa9bab09ebc459887fe74b6a3404a2b856cb9d04898d7f108532b5106c1c2497cfbf8f898ad806aef9141ced7a4f599bf5a9bbf3897715d385b53a7c6383bbe29536f7081645757ff49752f179f6f5b67dee2d3ffec459a3ff2357043da41e5316b2553e227e637e024bb920cf4b17f5795172d894afa9c4ed8b7f20b011865a75f0b350f0d992c61f0ab32c8bb5fb37663d233f5d760929089152e8e67a06440d21964d80a6739d9107fe5a5a8c20865a1564d87539b8ebac2c4706574d27f20545dc3d0be3889eb813e756454d3ff65b59dd25e26215042277394e9e63528a6ed49ab73b5ee9ed8748af7b398412977a612c3de6742579336c4facc685e860caabe11e702a2d35fa90e102c366fa49d5901dec9c9c3160f6fa009e1bf98daa45c8ba602b45aec68746fc900b6b1cdcdd093083177af92cbc92560da19a394724023a0be51df679b56552b4d864114de644ae835c2be6d63f43c299718bf8291fd82d851883d60eafb18df4d0b67c05f46b762d402cba5e542b4aa15b5602fcc58d50c8c8c8f08483db5827dc73fc566a7586736000eb2398679bdec5d75e19cbf27b718b5a49baa5dfd619c3fab2e1c4ce55dad81c255c9831a56ba34092a668bd23730889f352568ef5900f3e5e8d9818f01ae2716d52d57d900ef21f384c652957a86bb0b02f09e06a5680cb71fd4cd49dd987fc20899dc94395343c66858f6251c4c551931a6d9689bf39b2c6099aa68f245c861c5e9bfee558fa34554540fb70ad2cdd82e8012eb0549bbf5ee54389371a0873e0979f8dffc5d07a38918e929c656598689fc0e22d7518db3afb8b98d15a85566d7a79e606fa2361fd5c23cfd4524dbdffd18b9c20e7831157ff7698c99ea7c89b3b96b2a953ff3cd14b13409420266a94f25cdeb42b73b204dab14152a524c305868f953437e617cf684bcaf830c70c03f9eda7c4e4285b0daf51616b4bc85a382453bdbae77e47efd59187aab7e830f7f3c89bea9c7c4320c4083b62d3e463b25c1a44ec533e59ac6655e58c83d74fd486e2a0be3f8abd286f63f1c3588952b4d450e6e6aef852b851333ab35d0c988abceca1214abdae167ce5619d928feefc2f5e9df8d69c18fef9991913db004fc2cac1364921b7ae32403053462cb73ac1ce0451ab4d9e42ab43173c220d07c2ac75d49516931255bd01a0579d0384dfc11f38c2096aa9f712a7e18ec47ef87c96b5361519bca5ac4d91531f37a66b1a05a608b31b47f0f12b03f57baad37bd89a9b55f9226666c91368484b8a52e1063017c4053164b6d1ed2c878ad18f55a31594ff861be559b69db7820f7797f30ae8eb741dbac88133aae587be50de12ef170aabdc6814f86c2e2e22ee7495129da03ae26faa9bcc2486af1599f512285ffc685759f603c7f0f5a44a44952777108e18b51b130bf3053fbe81d5072329a4516959742b515c614802c05e7372cb99506613c221db9c5112c9954f634f4b76541069a32b2c5b84ae0722c7b31abeac062f5771c623ffd63b29e80fd4473aa050c61e0082204dab08eae46d6c8f5ee57e966c3e76d95aa306d9e657e5158dcef89d5b3803e24a7bacae21b343cdd3bc4fa1fb39277297f7e10f458850707d3fc63a6846869ada861adc4b5db9b3dd444914e503c581adf6a50829d02da4bf159c52b2054c0cd803dce836cc8c4f779d9531350cfc4aff2cb67472446c048b653a907a79065f4a348a75535810cac32a9be0a457c3a77574e874b5dc5afaac15f4355606f0c5ab1f1574c9c1012846325729c425fc19c81b2a58f23a9c8b83838b02fa8abdaafc0956c5719454636465ce361a2dac62f7387fcfd45c4e275f9f28a37261b5a7ff092d3425c1fb9e58de40b6c59c1cfbb6ac381e7c8da782ab6e57017d1666cad7262de4a8d013ebb9f38645654b81635f8cb0b9ebf8fb223253c14b3f5336ca903490ca689627711822a054e97256626ba966b23622ca0f7607f401e0bfa9af5b03e047eabec6bf88758d2d10796db05299458e7c1ef4a0a549fe87cb6cd9d65331d81e94d8bc13e219e461acc41422dce0724e376f214cec8831780a407d03e4a98fa2239672ebd4508f33bee87c23090f3dd4293c5ca48ce0b66757ba612dd09d627a516040e272cd4f84fd5ac1111c41fc7494765968cb1a363e2fef7163fc14b7b587652c25bb3bc8af571778bf5721c2505ef4ffab711d705fc52e742ffbb85210388e922c3f4e411614a2d76502af1790ac9d3ed4d864ec1532750654efa863318f42aced8c2ef6a3bf4d557e87aacc5aa6669cec42903dc102415da7b63171af502c2696788d6f11713e23829d75449d6314659457c40e32f9a6c0a4354bd2610018bfbe3cb754968c09ef3a431284da169f78e0f85ea54b011ce6a9e404155ad296f515ae965e2646f5872c5edc341dbb97dcd1e218f78027f1c49e744433eceaf780227c54052ae26dea960a38d7c9bc2fb377cd9fb680d11a461de21799d3eb13595372019db9560a38d45d6be52b8b1c2ebfbcbf64e398229cde31c5807a2656606f6ed919aef03918f7e190f706a119e75ac22ff174d5c87f35308407341a55dda2bfad8c61367cb30c064049e7bc639281199eab0e88511480972ec554bd08ef5adad8fddc0c957d8f9491a7ca8c3bdaf2d754cff3115cc4e47314985d4dc7251075d1cf5fa4d5300b6ab6a7d2e0380b3a78cf887df72ba726865222ab0c9593973f23f49eb7c7ee3db20d440177074edefcd13b663263c585ff510ac897f2ced5407fa925a8d88d753dfe18b8701dec8bf85a89d49130d4c3a6b363ecfa7979ba6544677cc5362c977e26028dc9915b225d32649f41c163373982bcc8997368e74ce1b7b560524744264509ee6d3a9f4f25d4e62457e89c9e79ba2fc03e5ee98ba675d33314b70bdce04009f765f5c4a13d27bc1f8d01390d6bc3cf9b27df8ee717325885c761d631d3725de78db06772fc6f01bf87c2acc1ca167e37927f62118ee4f66a1af86cf81a2fdc7bce38ef5184f4f091fa2302e4ef0d9adc5776bd4e134ffc52eb88d4c125e4bd5093f2e5f2c16449887e4bd1641733a0f551ba924a2b1f8f37f76d2ad30a64111228503c48e0a48b1aae7558908f2ec77f38d293433b60fc0ee61e4943cbf2cb5b848e204dfd1782aa7bc5e24eb0135e0ed9a99a0ad30f3825d7feca1ce6ed2321abfe904f8c813b22967232f7e65db081fe4d2401f461e4a9b74242b400ec60eb36b2b2d1ca49084690b84f3d6b24a812e8c4633ce60966196819178f4451d4f3b8108455ad78706413d829ef6d73140aaef89c4f51a6fcf861029679a1035956309bebd01badf44eeb1d80b567764aa814e25ff118b542059881f7172fbd7cef4607de3117dafc725dad7f9a8ff7a627acadf4871596f7f5a3bcd872222e64144566b93a1d67966fefb9bf39d59ff84da74cf9130a61ae75d195fffc14e5b5a7e1b08094f1dea1388348280fd4995875a50086cac6070fbbcc60964ac176440fe4d36d556eac7cd2211367979b2bb9865bf63b32b2bebdc2b4a5c9075bf9916888742e488f6043d3c35aa649e9a07216c43a99170e456fe2c7d42af68bb7fd3535dea525959b8f26bd521884593960ef4fa3f3f02957df478044433244237b962b5f0f8950d92eefd4f6167145a2a1f4a45e92a3615888531c96186a97ee2f670105375a9162520ce2adf38896c34070cfaad1212eec218abdbd7e551b6bb77b746c9b35f5f09055c9fc390cac14449d5103479148e156531e1ee199fb6b1f6e66688a42e97e71bb57c86d660c0ddb91e9fd42901ea0f0973aeae10851f33f5ed7656d9f89eba7338422e91e52c65d80dbf4ac6fb81ad3f1d08b51f0c660cd49aff371bb9a973da33aae67a2f46702b29520f34fe0ade752ad57dca840dbaf23596d31b1dd3e502ffc3706421aa6d4ead2bf06065f204a4f65ef0a7d3422d2ac168da564a35b2afe5080e35269628fda1581b309319a42e208a9b6a931110d3ee044655177434381cf528c9095c352dc15b555cdcd83060cb8b7e5afcbc0a6fd56b4ab058290ae372436645903de31d46ad31ab246d4e01fa8713dc2d3942e80d4c163ddc844caea27808e922578c87c56730c5768e84aee05d83f97b10001377d545c34ea1ad46e0b314ef52fb426c29721e11caacd3cd46190c629f9973bf18071065b320d289a17a53176a9828c60019aae4bafee977c589b6e62523ba855c491f13de276c6fa200e0899bd04ac20684fcd1bfb78803ec303c1ee1fe5834bca4098c93864c7045d04d553ef863dd7ce6906df42a1c466765232e453d0e8d83fa3a699b6b6bd44a66809900f3fd89f3c4739288431b826b0aa06140b15a62fef4ebf8805e27c67bd1d60bfa6f5d467ea7b452a5942b9508225a7bdc3668963c155bbc2a97f9e33443188b311cb8c1702976f4591a95df6e22b479b7aa1f52e3b138f42cbc7a335d0a4b1350e0e2418c05e7cdcc69a83c73aa2b298b63483c177c6d3e5f4707004768ff3444219e9332e5f598e6418a105f728e548cf6ff55f8d4728fe25ce5cbe2f6efc9655abd45b8e5df7e0b7d8891abc292542b948db46e6fdf039b8951417240683b842605fac2d4180a211a9e69e16838125f818accb186b21297ab28400b9bc5183b9db556a4c48245e5c615e65844ad03a98ca097e878543548303d1d66d9a16503cf58158994685fd94927ff69254e0669fe9ca31bfb5bb8d563fde1a50bb9f8d8159e8da6846fe547421b00e99c3522817e345b9b6d7b7d755d28a0079be803d77a40e454654974806dbc26112c9dd8a8e839d9475ef2c0760dfc1de3a2cce9517df4b2ada705b41b2663160b720aafd5fc168e8ec4a642bf359a321da7b93fc3b845c9a618a64ba7d02cc281e04a4a8135fd20a682d888e60195c83901dd341e2048824730662b9cb2fb79ac7d14a9aa2a9d1469e4a3eb39546bc843e1462ddd02c357d89826c61b34dcc745f911ba3b499faee39eab9a313c400d7cefca61ccc4c9481b8d0fd875b9ce703522cac527e5c676c9da80c8855b0892436c44d8b3c9cbdb6d3f037b5e945ee3dcbbb98e7be2f6610920e1b3acb506d1e24e495c699d0c356721094718e8f21a2fcca301937a2c1396a5006a631cddc91b833047686fda25ac6b688c1e79e3491f1898c1192c84630f174aef496ad8e2cdf3023cede0e065857a3b8984b293142ce30839a5905393efc56cc87e476395c4cab7284fe5fd040ab3c2b2f3fbd210f4f9ab1c7a6bd66239bc9cbbc1c098329a2779d6878d24500d834461b7e358c7ecd73cb71383f16507cac9ee316c602c633cc516c7c8aa6450c401bc1f8425f7c35e9b3b947053ecbf2b70cf3dc6833075b803b5f1ae65efbf3c5f716354665eac836886b60c01ac8f06866cb182cf5b188ba093bcb5cc68909eeccb29d08ba4ea7d6e2ba5c2adcefe44caef09bda79f10caa302c35f5d6ee4a08f3b5d2ccf489c76640396f92c53c915baa9b8ea83185b06242f46229a625073a04dfb3605ee63b89621de4fd2b1b3e5beb3376926c05c67ff94e75826dd39ccc13a4a381fbc77bf15b7d83504bfc7a551a684a65527b8e68a53c0e8570ee9f5c027d5ff268de5e3f40d44e8043a1cf541275de8e8d63dbfff79841b260b904e32af0b37041f090f8b1e035ce3228cbe472fc7ae07618525bd95f1a615a72a1760d886eece14d9213bf1110a6437805bb0ac0f643db51408a9aa1311deacfb5800c20110fecb9c49f4516a6c44b8cf3beb12d8d2fff89b5f3d584ab971d193442a7fc59f97ce0579712fe7579f7e649b0a72def5d10d422b388e85687815bcd6d9bc7ee4c339060ed06ade6f886cc9d10ae44d4e04815554b2324415cc45736322e0239daf92038f303f00abe7f98d74ff299991a594bb084bb3426f5563ec7318c03977e16591ad3da62df66ccfef2e29782c0af72c20df268edf87b57a904e3a51dcac129ead888b98136b5b0acf7216f72999722a3e6e3de0937efcdae3e95e1e10e629aade01f13424d0970b99c7ff7a80d553e741a2a4f9a4b7c6cef9d93033096a1e2f98cb390a717921e606158874e3be7e11dd00a699f613549443711e92a60176a26dcd095bed1a993fd0e3ffd8e1d05012b97715c9af767fd8fdbe8f1a347de5c11678db6199220d98853a5340251abca5264b881317c57b03812e0a44ec6c502809402cc8cbbe8707c6dbde9b3d9146f6d2d52363f8083dfb6975f58ecdae993a30540a7de7b46ebb73e3ee2f8751a55e24265a901b500ad6e3c033022c7e1607e9b4090ca76f9137a85196978295617390a7fa5fdb5fd803aa8f698ca74d416739ed24bebe9421f9c381fef67b354cfe7f52eb741cf101930c32987d83e918bb5785d32e57153ef66e9c381f45b0f717d0ab5aea5c0da77dc2534ebf4167406d9e0cd147d932ad21eca178bf4108c8344af96c444cdf1e7645ac2dfca2022379fbce70c46beea00614e8985a80426f31e58b5298638dc4b2c4509ee1aa24de2d953a4c9c5e26b5fda3ceca2b5d11557276bfbc30baea5cea84c5debd6bdeb6bd0868b1eb9d7c1e0b910c370f2028fef7d9e916a12d738f1b68b27e7b3974805c580739fcfab197c8dbd66269d163eb7cbc2f9b23f139855916a09e7c37f4c0f3b34eb1c32fbb5be881a44df9d38015266b91b2e4e011fc2b77bd2ab31a1216abf7930dd7c9307102e28ecf55113cb3995b069a6a0b49989354c26a10ac383b6dd000eca3287fb061db82b08477689ad9a7a6f4b27706d298165a44d0b2733609fea20cc6d7429facb26798f6d155f9e149cc52f0920178297202a50ef2a259cad56b83a68ab83789a16f89a4f5ed76111e0cb02e9e47bf7d68335cf4b80eb05b68ed78ab94e461722eb1c4b10824e6e00c55d53d1764995d5d1b2bb3d592ad53612ee2bc5e5372872333278e03775c001c0f6069ebd7bd5f5b9d5ee77ec761f6aa05d1d45feff19c3e02328cce365184faa9b2614e198aee6283ea40b6138e1a9630926e8f5a888e569adf6873cb286166b5b6ec9b75840ae2cbe94d590458d7b3fb809165a5ff60bb63638bfc3989fc0a651b9e21a5b56cabde98f27ad80736bfaa38d584e2c6e1b44eaa2f826364ce973df24cacafa405fa051cea0d07740d418d11998ed712fdbff7c2914ca8a8c1c9a0a4a980763246da8315396675e8d1e6f94bff44644e2596c059e75f062f1f2a92e8ae478f489cc395239443c4b70ec568f0086b229499b7fe5d4dae79f350201328d2de08e0b0cc8dae80387730d1cc3ffb2c3397dab63f30db17e4f15850738e614b2485fac1a88875ff915ba41c0be1e4587e549eb527e6112b7ce1b8ca6bb57b89716a9c9b3a1bccbf2ab336b462345b26449b946f33fab14767e16b56c9c221f6ca50b01f8a1c0b67e3e3a45af8b82235c4eaf25b6f6ed67ddc27a7eba2db353ce74af7f67c4b96b10592e350cd10e6812e037e49483ec4b660a884825f38eb105ae2e0a234f13dbca7989f572b68a07aaa2ebec01dea263ada7369d99b15b119962b8979ed77ba75ea56e8c24bc2ec277ef8531ebcf327d38cc90886bea5d7027a4ced693e68916c863558018c65bbeceafce8ae30577ed4ee528c7e5012d2b4ce9ee3296a5aed6cafd4d5b7ae28349c5d787b0fc76cd2b0262407fc1aca0bce2b9abfd20131cd3cf655b8b17d47b9d3dec3d42e52b566d0dedd84b629451ff7e8bd466063dbaad659ec10bd34b023e63e9212fbbdde9113c5615051c19d5e7ca98ac7516580b9ffb4d2f9afe8eda29fca134cc63e1782e5c37602027f5e4c8ae0d8732eb5cb16a4275050eb88a39d6b23885801ac779f700e6986742963ade28479e16008646b402a5813b8cfb7a58f852f7434a7708d2cda296288d9c51b3d5092f7415302afc762d6706af6b7b83d6cdc60388be45dfddc2f743600d7a75e21257e24c0621421ab817cbe7b76273b7bd4991bee827e548fc5c0ba0b7aabcc882e07bc6433315fc809a523be86fe30652cc3ed8b6a9e470c61632cccd885d61fd6c2ec2abd1fac7112bf806a67dbe04ab5e116c921ef5b0aeae534d04eb4b563a89d4dda2ae9978822b28c88dbe0e939c8a8daa0201765aa32c6752f4056ddeffe45d80d3ac2e90fb5f4f860a6c7e83a29822b3b1abe56c21d5509c90d5c00d75831816efaca12f77b01801e8f24e04d9e66b67155ffa1f72fa46d7820b732db423ec436be752e1ffad07d29e4aaf74d8f1a4b275635932f52a7badfb7f1f005ff835a6e20e6669589b9ed179df33f4b246d4300fae7cd862767242c3499f8ce42bf58fb555177d2bd7983c7b768c63aca46ae4ee00df750316101fc6dc287a16259fc4b56e2779f04b4048a7068a2646e0a3d50f3ef3b1eb9d9536c09a97c3259e2c1d159f95598a847d5849ce135a0cde22f7718acce6171a345e58675dab35fc5f9719ab6d250c4110140c339c92b1aa1413a329ff8fa884c6e9c2dcef968529ec4ea2ff3b42feadae275b97f1c440f380047d5883ef3268bf5ddf0c1cf242ebef7a38942b0952440871eb3c26673a01e93aee9e08aa5bbdf6bb4d792759761c1624f76811ed59a68c1e88df5e4629047c0d5fcedb55345ed4456ca221e1863c1a311378fceed5e9f6ecaa95fcf10964418af77282b008e12f31ced16ce72fca7bf438d207fdeb7ce9698257d345d38edc7ca7b0604daadc2e17e90163da5d190642af3beec0880afb8cc84e53a5c93775ec27709fa7bcf3d7128bdd024f94f2f94fcc83e90ad946beb0ed4a210f89db54b6221df9be9e66ee0666184d0fe5391890f82d2f0140e92a8396e64331cf6679fb0ee953d415b6847d7dd6a36ff2f7b5ac9121607bb471211e145d16ba4577751f57e1f2dbd47ccba2184567d8daca8194b54f3dfa21352197f44ff6190ee570f3f4e2ea75a94349c99eaa03f851f6d352e76b3deb46ff8e1a96fb5d3df0be00de24fd870f5ac9d71fab075973b17cee80dc98b736de653e6a2bfb90e00a72eea175e378e84fb1dd6e352364100c04b4fc4164df3cc2219e0bf48ac39f9e6b49127b54c3a1029faaf08f566d90ce6ba27d09769a1475a5f365fab77d6be67c0ce86e065ac75dcdd4482e6bcdc54cfcda79ad0989bf68c987701840dead7eaf8b47047d8cd1467ed180c160aa203402aefb38717b87d09585406107573edb6d37a2fb56717b65af4e2ab3514c08e69a1d925c5a78a2487ead7abda4c6ca97cc2d9dcaa787bbeb1aa4b13b4a2421880f7edd5eb05252797e99cc2910aed19bcc93ea0725c80de7c8f42dbfdc8b72b69707e673204c7d7bf33cdb0b41ab9b49baf4e6b12b0511f1920e8d56e09f93c8654fabf7759146fe040eb39d74181d343314b3bac207beb0ea2d54c5d7db094e162f93b3faca321fd8adde9a7c3fd3060c77739471047cdebe8e95ac04189cb46de0ee459687cc1c7f88f552de7276f56cf39a57fa4463ac1f3fccdc48a8aea4e0cb85474e5dcd5b87f88d88c289bf790ac523f011c240ceb433bf7ab4c0f913577de87e247f365e7634076610298429cbd6f3cb68c2acf63b96b5010bcd2c2058440c8287bacbc24c0b6b7347fb4d730b29c5ad22095161f38afb1d2f59390fc31fed77cbca8b740222a2d6e79d9e85848fa99bd37316ad5d6a3632cd0c5f3eae4507276d4626cc15d770e65e3467967a01a344a68e1fee62084617cd631ee0623635a59fac334e19542f4b8d0aaa982641ecd21069385afe5b523248e52f74f70f3dacd03d0b0b331cdf2bbd53f87b195816145080a9aea2934a3c39bf39ce790c211a6b8950e84363bdddea9eb699386c22f30487a6c4a50ffc4fce5b7e4dbbd0c6a249ce254f5ab27f959fcf17ff29992b85052840920c89e67e864703704342ac22e65caefd52a0440c86f93b3a4574d7da73272c91f4c38b056c2868acdbb12d23d7ee5134195288f8dfb44a257e1ed96e2e9deabbfdba36320fff74b2398029772fd393e8348077179e442a890938232f1c68fc2e96b4c330a2c19ac4cb13ca18ab4af1922b2bd32b1defbea699885ec163e47f3a43a211c2678db81ce16d1e23fb27183649cdb64af5cce07aad1c4ace1b0aae982cf0d78c5b7ec69ba45a81167d1cef5c6edb8d95db6fb48a84fb6796e21928e60d0a02b05704cc373230506226458eef1eb589f1a21ff9c4be02163f5e827bfd6ce98ac34c426d0868b5b8cc7c9ffa4a722f748e479c7df85aee361516e1d0ccb5e3f919ecaea9959cb8ac3edefcf7d659d7c8d733c49e087f5c411732af40c5a44d7037e62cc0d527fd9eb979fc97d404dcedd5036ce9c68688bc159960cb0f14adfeaa316f79746db82f7ad7dc4e0b126f29e87a95c04e13aa3827e85faa97ab9ec2b8bd01d1de6746207209aab55144d291ce96d88914e22bc092426c1bf64dbf2778f6f4ffe3c3dbe4729c75d69d363b9cbe8129fb92a80626391c5d5ed93a177ee2857b09e09c8e65822047b5b07fc7750046b905a76e906958159b9a5a08a17787dcfb1e15be5bd85b78dd566204f64f4a55e41fa0001516c3101557e1f457b72893dd3e56bf6d507e5ac609cfd187805b01e272e4150bc9b33609b76a9143345064dee7292963bbceb45651b909f9b484b03adb77cced97b2658841779f8b7074b24d732ab659e1b46aed4cd569a25a5fc1b6040ff84ad66561c9b52408d99dc131872e27bb3c98aaee4da7fc05801503e066ebed23c95e6f0a4d3de438285e6c04d8173ddccbdf01371ae2fc708ee02e719265af7c2ec61affaf0f1643082f6c5438c616f2e52f5151f0a915d0d2e58d992d88f3049686986520769d76ff91375ee9251caa7d2bc557822f7c07c044ba8fbe73c9f05570f10f777900e60452e20e56bf158f16dfa4bfa3f33d6d43e3607df2b89ebf17373ff5d82e9b6ec92c3ffdf5c82572deb79ae4c4a7c6bfca7fdb1c9d9324a806d7ba3034049d0c8264eb8637ee87ba2b908702ac53e1effd09765d6191fb6b330dbdfb1449cd381f6560d92b4a9398b5eb20c0a5b26190bd15880501072cc7d0123a6ea9687e134983a47214096443666aa3bb8c06c6e3434796e0e3f0f8e19a372dff3b01a75bdec257851b5af81c7b45e5468701ac1ae912c226a36687254fc969f26eb4918a10ed563a8045f657cbe4bc554ac57c44b44c6d1e4d00429180afdaef4e68b64478dca3694ba18c18c88f5e138c01d58dc6bff3e8b6eae8b2c4468301551dbfc85abadb335aa1d3e0b7aa80771700795617d6d7e298feed9cdd3aeb7c888d2057d49f99ca3a1b12745fc36ce216d5bffdd71e2ebe6a301a01cf88ee27328f6df7a89b0bfa21fd5138543a195aa02376a0be115882f20b2e059c3e62fda82a182abd894e175c4cbf2dda6ee3728ffb815c34ad9c6766bd0cf477a3126f78ed329c588da7d46872bda7372bbcf86b6869d84135b85d8c45594352a71ca2a393b648105d5916a88627bfb0be1c7794b557b6de8e63b89b1904578568af8e42e6ab6a8398c76bd127a70939bddfae896819380be7923eb8f0465ea11b83190ac9062faef2ec321df815a152917569b135fdef5852edc4cf89fb4c163d399a9259620809159d4b958322aebca6de860b0f1a7849bf0f99f54f5670e213fa1de43479d677aedaad3cbdef7616bcf759358324f97c9eb5a4f5eef455a2990d38c3f09ee377634af856ba8d8aa1b4b48efe3762c289b62d91d6ee9204ee9663d3ff90a63254062f7ef0e2dd6f20bc355b131699f0b465713ad3d0d4f7632b5d3f3ab56ed1476b5c9d2fa03d0d5f26f17278629d25c05ab1f5964f9cc6bd75dcd733e773f11fc3dafc75d194aed2cc4e608e415654107bb9e55989983a527e7793a42e34debbf0699dd4e5af3c95f44a5b909f320108c7d5184d66189f268fe128e571bb742051dcc0891a9d68318e067fc5117bd51fa417ea29141d0f83796f5a847c21fdc0d7b916e63bd13a72fe1611763116fe4394745b391dc2db4afc207526ca5d4d3b2106ac07f26641a872a72d8bf05929d85f939d30798072fbd6f25057a6a492e2d0f4b64af38d6a857c7a82f8cbe37478852e1c08cf21d1dc2fe7eda87cf1c5f79c68f72a06928114caa520d855ced1a7a8e04b125b073a077df6b01759a99cde2380e4e957824674e4c0a1b7673cd783e8949f7ae52ebd5d3384fd0fa61cdc50f8b6a97441e046d274bd75f2e4950cc256ae7886803926cf66630cca436ce440c036f580031191cf59e708401246ac4b3f3e99b855c4fe7f8378a6bde048dbb722a04487e138143c17b544fb151bc1498505759913df4512c30fa734e51f8ab5dc9fe03bd7f1f2771164994944aaeb51825ffbaad185715e237ef42e12c1f99f0787a30e4f57368cbdff4e4a7764a2af31f260f3be689970f6deca3c081e9146481cf1873a49f4bd479c53798d47bb1539f87218e1a3c38730e24c2c1cbbaa828aef950f0bbd2b7c340d955b643333b9c1947264e9d8b851869c200eb5c0a5fb5fee41e8312be328422068d59bbae653e31d2d279f0bcca638ae48274352d5944e9c75fb3484c346fff194fc42125644fb501020e538e32cb173cb9119ac2d2e8add44827e43c348b387e73462ce6c08138c5fe917cf3f0476e77aa9f541e6140c4580799343f0d170c28c3dd69c5168652461c9fd5d7fce37d23e771adcbf18e6cef1c4086912c08a0d6c7e3e93f6b7f4d5b6514433a7dd2bc9ef93fb96e8f86e7b9020b37809939d9792b249882e83e110de66b74808891e70f0c471ed4fe1968c213c83fdc8327a66b1fc78d66f4267a9e6d2a88b0efecdfe684270f50fc663b2807ac0ed114534e5bbfba04a091420769012c1ce9bc34316163fbffdc6e9c3fefdc899738d41c234b8d394464f2ba8edc624b876c82ed7b05337ed6d669085c48aeab955dd0bf807aa5e472c2fb6b6c928b3d17650f26d21c6aba2cc3e17141d10e978c4c23207a5edfd27a973b5b5212c1339c294e01d69d75d6be1a0bb31d02ea738166af2cfe7de58f51c1b1798f57c3f2b7d93a6a2d97277b117495dfb43a524e10386ea7b756bbffc491be51fa6c7c69df28589e7d1ee61e6b31946d922371155b11256c006d26739ab85c5ac58a8600330927b4ce18e6c63940b063ae6d0723b81ec93372581e80901ffb43f93b909e733c41b7cb5b69d704011e83d483509d786f894f5473d9c07604d393054c5b31f245959ea2557c1411c55679a8a6bd1d5bb842517455cff7ae64c448d8272404c7b860e919aab09ae25c7a4c44960134cc7e80a0fc0be6e6c34b8bad230294cc9cdbac7341e42f49e4900753ea14aedc9912900d588dd15f94a75f02c439d7caf80f9c3a3ee0752856df6fb1f800c80c0a7816b8985ddba4ef14e1306790a5a071a2d8da42225810fc77974662938fa9a287094602a951f5a0f7831a45c8fd4ecd5b7fc2904abc18add2e4318585a86b511d30f3413f87171d50374a55b8746c963651f9fa4bedf0ecac86c82bdeb014e98d5946f8f1c0229b46e49dd95a717748d16c1222cc2ffd1e595c6f8e5ef73f0ba42379e3ad9a249d0c6083275e53f7c091b891d2ec92a12e9973883b4f7624ab9868b2f62b910d10dec402d88fdd0f10799d66a8dab6353a7a1a23f4f84723b16d54cddbb42e705155dbe56043af067173c16d009be849a20f733811ef9b5bba181536f8f01efa278112fca4e8e6b56b78a3d3b92918be6414270e3f5d8624aad2eb040c157f1897f0b889302743335c9188751cad855d318b754413dda3371463afaf1c4bbc7ee7eafbd982d6e66302376669f362a0a31b0ff19dc04a2b37e8018058df6117fcaa194df056369888525675df83b7688e37f18a39ad6c3b453e9f54161cb5a565bc24aa510a212112341315d5434e7b64fba68c57319dbde9fe66382b6bee6fe5d95c3f8902219980380865b8aa1b9580538ce5e5950e2c65cc9ccbe5b80e5a4bf77b3fe7a10684f13bc60692502a40c467c1ce64ef2adacc60ef837c8bee5be1b9e9caa393a2c820f8068beb719cec5674263405e16c88ad12549d501d59b98f7d957c8d0ec0a3cb6dbe71fc3b14cfaef19902f66b5b6a26fec29e1e1a22b685ea7f27c6d4176f803878b491b21c24a754ffb9a60584534194cb35ccdf951bc54848e0ac3a3533cbdd0ae3761ab3e5c195a02fed217ef3fa43f823ca3d2a569b9627ce5ae5536962f83341206d1f26562eb5111ae01716b516b67c7ba13625b5bdbad5b4466d71de036088f76dc3725c886df6722c6428066162961e89d9f9364649f54a510e8c2991853f3ed39743b2cd6f81352299a432ea3aa8d97a0f597780c61e3036c0a1efdc126be76a19871dc6741999c5ac632a4cb15347bbc47cb838639568b90e1bad439456e9d1795ea00cfb0f2e257c03c5251dc008e81acbc2c736d8610f2692829a7fb6eb123839c4efd9a77e7f3cc7f6667aa6126c03a60f90d77083241d700e581214b8bc05abb17fb6926114ced7210c4fd138c139fe6862d3130c458157f17af18973d280fb0280d49a964896070dda4896e84427c965dd43a8904fe0470de397ea312fba9196c8274826724b8cc974b33d7e410e73d125be3edbed2a581c3ae96ebd000747e3eeceef13b56fe6861de3c88abb8ac76a6a39005296fbd6884861a88471d16fbab20c0a98e239f04cd05dee56270b5354551b27847a3aaeb8f0fec4f226e5bc28cd873dc7cee6bab784a2f0e18a85142f1ae7db1bec901cb642a8dfbd70de8df9c81b9c8d73eb789a6d6eca00fe318925d28558810605b9c83ae34dbe36f3ab6c70f1974bb37a62842ceeca6e72b9877603a342e6a76a9ada14377f1a80b45ebd61c75cff20d6a361e43782f779049c9ad0d9ef9ee272ed9196ce1f2ad340ffd02d2ca7a092e12b8a898b51dbb875018d896afb9d920de134e2f84b5c1bbfe9c97595a86d00b1522021dc00036c71dace80abfc72e0a99e41dbed56089c5e68eac74d804ed875fd13941e1919ae8f28541445c0d5f928a5a60220a6c7fc4c7a9a898195148a37f7f299a51bfe47dfa436e08852a18430883777470f3f20aed4aec8bd600d366d1041100c6b9e2eed0d3cd388fcf01e59601f350a0d34f7940a1d65a303abd293f3cc6287311984d0aa6f4c2a2df9e2f661d9a488e4072d61ec6da749a57ff1cf93bf3f1bd067973a8b3e99d82b0f49940c224bea7dd016f99cf2e405cd842a46b3fb5a22b8811de1da834eb670aebb6ea535fef3bc13f88143f6c1790c3aab5b2d28e054ed14927756736cfb17e91179c2f9fbeb7dbac1135eae3141aa8f0af44acf687b354af30a36264b913651493bb054857ccd5290683751aad7d51472ee8ee52b827b33c0f9527c7d9b9afcb867ac925ae87c38d42d0ea5b9646f42d10e77b270581f9baf4cee98a9c870f50c23cbf419cecfc66c4617262a7e50320b5a09a4c452c14d23b7582ad53bf72b8075c5c610300809a6e42869650f4a3cba5b6d02212a87fd91def7af0d070c6ea974e918f43673d6cdc83389f612ce965842773b0dd5a84322795cf992b285574b1732f7da970dbaab47b25bfcdaf4357ac6c39a0b8923a16815cb3b512be7dd46239bce685a98598bf3a0357994b65b933c81745f20b25715d8576a11660c65c496e9100e7bb86a1a943cb5bcc86d0cb6e049c8fb88f2bd24c4a1885adaf0dcd5d7a6b45ca2e306c33f5ce5af9753035ed344ff1c8a55be88c451cdb9a09eab4f4c5df06df81c0a27382b1c04a6d6b6c2fe7f584cc0cd9e25c2df814054f00b2a89decaf994fb0c7310cc88d60332314284e6fb721467ffd5aaae79962f479082caf2398595a4e4b117590c1c30f678c1ea44a1018f6fb5ad1f623e848f536ed2a6ca6f92eb4070eaab511803455d554ffbaa9af26a00e656a6d7e1e2d154b173ab3b3272eb836a8495665a3882ca55c3c5922f6c06b042158b25a9941f8d223fc3da92db8704bed1e9314686218054f227951a9ea1cc01be6d65437863b42d0a9aede43c217df73400da7af320fc3ed84dde1557c328940eae24f3ecf0fd644bf26b0954700a8d32a3ed6de4f13e74bbb6a446ffcf567a041bf1cee59f3c486c6a63c493f906c003cc7fce56265fb3cb920dfa8cffcfc05ea879391f3e8e1312a4c60b41b6a293b7c455a2d898ed158dbf97226782d37059d89ea510d10e17cc5b97d1ef99439c83cc8e6d335d1a121c4dd3f83fe0299a70ca43a9b9d53de91c0ad069261904847dd1ce3835dc6c2f04946c4969366ac79ea3ae5c03ebd95a4db7bccc13a4d0565b646f96fb306a18d51144de3cc8e03f24d8f1cf13cb749a263fd026f3eb381b07b8fce8c73deed83c83a6629d84e7b7ff5cf2e43563a5bcee901fe46d5f595e85620daca39e6196e415c2cd8b3d66eb70b4dbba11188576acfbabe50986e430fc0a350d16af98f8657e3efb2ecfaa69716e799abda619bc211231c6a3c7f0bde46725724dea660adfd642c0d8c55f68ddeab745f781235d5c74a36e2d225027dd5efd26af9d1aea042bc662c009893c107d94eaea07d9e64772584f884daafce94d8e11290b6c197aa6db5cf1ec960258e58255ba1c4f38baec34d758cb01665429c4ffdaafa50ad0652145b79e5ebe5ed9eeeb23dc8ad10f8fcbef2a3a08cffdf3f1be8a7a3e30042d0c8f6256a1506e908073e66a06811c8476e49df620b8b220547d203db2937d2c319da1fb2568105b676d9b6dd22f10cd7ef5c5bb0a374ae1960860d5c7ffeea3171d890cb844e0a7bf8416537ea6898e784ae89e637088277590a9b2e2f61028586612b6b5710d80940970ece7b092bbf59bb51af15a94342278ee04aaaa5f6ebd2bbdaa2572d715c416713ca00d689408deb72750a6a8e5c2f81665a242b6f53b6a3b91d608fdd55898275977262baa957e99107dc394c60d6d171577e129f8103c21e29e2404da4132d29e45113b29422d89c80877b25b36c6df89375ba475d9fe259a4500976d507225cfe1fc264eb2c182a110a591c199ec8af5ebfa1ae0574acf40fe235a2038ca88762e0cb46178773b68c1112e7b2c42d83bd33d0f5ffb5b4ef6c7ab351dba9df00d3d6fac3109b3981b4e3a451a01ecbc1ec67a368dbae4dc5960ef33c2dd80847c6cb96d43e9e216b46462bc600ef9adc6241cdf83349662f79c3dbd3826a1ead8f1ece1ec169bf2f7ffd98e43f67a2d2edb9447903197da61a4330454952c94ca156ed3a4ba6b38aef688b6bc2062643b850220f9ab650587612305a94b415a6b172a2dd9ffa648acafa5d742c5704993fd267840e995c3e02ba07b7cb1fd818a22549aa1376da0de155c40eb448093c4d683fcc82727dc919ba1244061e0c3061034082508bae93114e4959daf6fcddcf74f1692f091e7330da36f180b477ea140a9561daf8be5381a0c40c95717b35d1f39bd2f7a6229a6118158522009b28ac257c239fa3b54e450d7748735898385b5c77daabf2d7eb4236b5960d25a7983cbe52c25a40e567beff57b6a7768e9df8f30d45878296b0dcdc6b5b3b526d1200af7b8e0c0f20a9a168eab9fe2bdf3577579b1d9cd93631660632d5d742aff51027266bb3b992296d2507abf0213da8f5a7e6a9a299e0ab0756328e6186db97cd798a0b5cf51b32facb9471350a8e053e46674af5d80652f85c66a6ca56d0846eee4b764546d365fedd77715829bee345bf1088a8453417d4fec091299a88d425e30f21f4aaca91b4a3c9114bc63fb6b55c866e0f78589f9177e1cd7aec7464b8be76b447d173edd6478190e40b0721906242b445747064318e004746d3b08523a354338a36473311f122e99a113df6cd3bdc12917c60fea05825ec1ed76c162cf2b11e09fb16ce088ee67dc539574d3ae409f7493a5b00600bc9d69d0fa9cacc29bb814156199439cee379b07d6e374758302fe646d69bb841d5f694e9a3d457b0538ce31e305ebdc7260b85ddec51eccc861262bf99719f6cc3d4097ae1615d3bc94bc2c3e0f823a414309298084e7cd76aa22a6fb7906687583b3ba942ab6e8c68a183a07a2bd5e56c19a2cc534b8a8d8fbdcfe6332f7c761803e9d64896e346e17a02f8855b2ba1763bba40cc6caf9a6d6f72c1fe9f12280b96e7835fca3036dd3242a0b0aa4edfcfe6659115c8558abbd693d8ea22d815cd026a9952dbbcadf544afbad8f10eb26d1a2e98c6fea5928ea27a193e74f4006dcff608c8c1e9f42fb2a00b25adac6442b43d62b0c6df6b830b83e52c2b2f1485dd9443ed96c6c1aea0694e5a190ed8a8d6bd7d2c62c2fbc5621ef94fe0ef6be9e0589217e63ba2f1ceeeceffaf7b893fe49fd1b593eb0f0eaccfca4003833983fd68c30a2cbf795440e4c47f1fb771253d92a61d0bb6919bf3a04c6dc3c8f2449ab5c28ad360e3705537fb1ac2d0bf9f2a756f199343fe25115e0cf317b60737fcababb80723fc8eb1ca5e17d554260f94cc773f9dc8d6f70d64522777d113df8dbfeb972cf58a5352a35ad41a1f586350f104f4b4eb87e84d2c33fa62629193468d1207f8465bfdb9738030b5cc2c09419da9c1c4a0fcf9dfdd20e7466a59542a2221d9088234db8628ae31ac8db892d48022cf5246d08e4f68647595991d18de3992a49109060ea170c84b47d7588e562b641e5e2f174bdd06f06f075fe2138668720cd4ad79f92360d61c2d637cd439bea785f2c5a660d6880b24db0850a23dabec91ea899717f63b8c87e16364632cb6c3658e931ceaf1f9373747ca9dc9b5e0bf172bac6c49d1dfce48844fba95d937a37e5f864aa969cbb6ed894a3f58ed2bb85b32e63375e9f9f13c61beb007f04c3af3efa5fc158e0a1cb14db4c4a052bd144d71eeecf849afbd2190a892b038835332f702b152d8d83de359da1f737f1bf9bcd502946f68d1a1b1ef5ff4301b3e8dbc9a0ab79cf8f0e67559fc4d347c6485e4e7d1275e902a0adf0a836f15d07d11cd53dd45812969ee6bf544f3a1ea637246798deb43243831c8eb75f063ba2868503e3c16eff0fcd26eb8bbd51941094e6daf6de082ad9fb0b66c47f427c1d148dc14d9a50d63fa3250dd165b2f0fe09f55a6a1363cc3e3c98f019e5b9c900532e34339e59764645706aca47ae0fb42934c3eaf2ed4e9b4d72c7441e391e0064a3c39e299c272ba04c7f56a52c403e4d57538be355e37da85c6a8042480e93eee5d8b7cf1e4211182c8de885bb716a2999b663c42849bba8130a6d3bfa57fde4b3ba13acc3300cee4735739041896abda191f966fe947c024e96fd6c1c435d87b6a9291436677ae082b64672b738399c46e5e66e5f31bae96fc5f48669a4ca7105f4afb77288e1f05340dccc3eaca1af5481e4d2cf5f29dd55e47aee8fd11dd14bfc7020677e22ec9f2906028a4d1437cf6da7611b499bb72d1cbfc59dd798a734496f1e984f17596763dfc614d49f0836390cd447b3dc0fa798f5b72f9291b50b0868671636a6185b578dfeda0e6f48bcbc91b681d9113c14f413049d9208a5f405ac51750b28ea3b96f1d6e91972e80b4ed1b9beeceff7f1441040e9b14cc04313dbe60956364b8a18927a1d1918bf0be6fceebf42c6d90ac3e9bbcd2d64e51d875bbdc7539731d19ad83dffa4c1d0f938893958b1f873b25418f6fcc2af5781f1e05da697950c8ef9f73226be4ac7954cff0905349dd605b5a61bc12ad880d6fd2074351bd02837b137b945eb80b33875479569e91d4f34132da0457fbbaa554c17e1c5c05ccd2fed30c647cbd1032bebb36d8844fc90802a489840dd30381650bd67a30cf3cec1e800f231a56085591faabec8c2d8db3d1b91bccbf4db5cd2d2b3d70f882fe39b6f9999574433a365d5c684f490d432e8ca380b6888a2fc39cee70ad3f799c192978f5b8245b6e4d6bfed8eee44f2f87e0311f3fec1ba1bdaf0ba52037231593a22777ec4a3e44edd3ac37ee3d4f2fd9aa9ba6c344e63da6c4daef49d20a08e2f1fa39e79705740f7ff19340541cb1afaffefab846bb51ccbcb96b16906cfc206d2699c132b884363a5bfddd31347c2285ea38c5734d8553f9c56e6792824205e0e1bf7f2cdf7ea03c70f6866e052ea8a3544d4b1b9c0b88edbfb110589d66a97099d5a54866345304836c834366b4bc9d6559d4bf14a5d4cd407d8a90e71f1f36a08f2d2168521e7f89c35d565e8fa0a105aa5104b4a69eca78fb430e142d6f444beff1ce14f46db1c74e32c7a8555fb4241801f7b87820214476c71bd546b49a8ce3dc2200c06779418aa4b110275e06a8f33039c205e97bead1113eb5441fcad51a4c0aad0de2003548fc0eb5c3920083e72fe7fa3f08606c0bbbde1d5ded3cfcc27a05bb9327c98ee93dd13086e88a2049f77f3259b8944b5aad0840c053e2d31066db6082ee5e3e0e9a94354c194c741eb7b46769ec7d7448f4124e4766ff2bdc358ecdf4204fb2ec11f4b1222cd751083972027947bc542a4b5b2de15dfdd4a4d17da3a2960cf33a62237213d9eca650944fe1c37fdc1883fb19a898847b60cbcb545a66d0007956fa759563f8e0509d030e66e0ae08dcd37a3b3fb5899c7601f26067ee55ff22712783a76aaea6680107bfb619d2bcf58d2b4d02d54c1c7708392f6237bd56f4c9c50bcc796c69e599654ed03effda96a754db5be1f4f80fec2c1ee7d6a64606186db221364aeaf9c311a5e7da9a15c753519a2c41c993e637f522b3c06d7c57674a7bf4903bdd12cc47f5be0ffcefb2ad7e21deed3778bbd972626b9b5ae959ead5a908ec5cc250d9a56f21180a5f779a11c1f52a0eb80a173e89dda3bbdbaf71cf3010a317d074d6e5767227dc5b11026e78ea724f09f2e001bdff7f1f827c84ca26db7ecd7aa462d2d07a5bf16465ec9f6f3b0bb77d01791f8dd30c5d6042fd062180b758b56088815a2a3dccae09868925f58722a92f467c0beb77e50bb241fd933c21d34d9184717b5b0a70c5360a19634fdc78500b573445723631c436c8b69985683d64b1fd1f581032a1915bb2c1877a6696504c6fd7bc5d72a0ea4a677006962a717ffbdb81c3d03b011976d78c3928ce381394f7c806ba944414dd842a5a205cf2ef81525d0333241936dd97e7ea8bf81172161b68daf5219703becb3b2d602fbf80c92318a749017d36820985a1360eeb86163fae6539211286d6e8690e5b57aba430e2cfb7bc4bc99caad9271cb075acfa52053cf86eb401334be4caa857a13a0b1ff3211b78105ecac5109e9e0ecee4144df4d94c8f6c6d6500b8eca33499f995ffa213ea8336bb317485b238522958aa9617ca87c50d816963e30d89ababe80b80e1316b2c70686abca3e1fa7c886947f8578f549b7958c6e2893481d28472d0815967674d5fa4d8ee87f202fc0dc39c6c2dd3120eb1c28f0d866bb4afd149bf2f1efc184a51e506459e7e629595205efcf477a9eba0f9bcc85d7afcf88ad92b338bf0968d0e9411257a252bc29cfe28d1d916a99b3db8df1c50d1d07422a086fb14af7b63d0853b96d905b27c582f5759e95ce49be2c05dadb06c6b497bfe7c75a2ef2708aef83ecb2d4915c87862e56d46914d8f69a332ac8750204eea5bd75d1ef1a0466ac2e168f007f6b6ace7a563598a81189f024a7a8443b4809f99494fd9d3e9aaf77ecba6874c966a5b282e1bbb3792672ee12d3b7fa482088d959b2c1c96261240bb417558adb1bcc41c32ae75b2b46f5e1db89e7a7f73a4d5c9458bda013c10a6458f35f124172f955cecdc0e3814b08221499538e5a80482e878e108280dcc35eac1fc2c9e798eb65e57a256ff8b1b4aa7f5746764641b6d32dd3c7a402247268ed291eba5c03c1507986d16a03c8a475e303c0b0803cc4ff753a38194346b56100b8194667c78c640569aa03a9010060745d45ab5fc26556e0798e64c80163d6efc3971af28f3839f333cb8ca9c4a39823b2f338498d672fccec356c8d056cfbd25aec4956cdf516e330b1c3c6dad1a280741a0ea700868262c3cdf7f20f26e065bc41d8168bd48154b87ac888dc583f2bf54e2178b426ece91c032c77de2779d97902951e555f8d0302050239726ecff1237e7d905c882bc7eb8d54adde5dcdfc3c923535c05ab4d8c7697836f795b389819f50748175d4446a2b0a2d8e35cc3400459fcae772d4d4440146e903e22b5686ac539048d8e2bc2785f7dcf349d4bc7fae11471df54bfbdf986c8a36cf6a4268c4c862c220c458824628da2da14aaf5481ca428344d3dc7c3e3789da73eb75ed7635153d05003c97100d5613ac7063b6d26281811c8dcaedf2c40556d1fdf7e06cdb5894cbb6043177b177ff82ff930cdb2a905b70bd4ec98c258b2f4d79dbc44dd88729ac1085698ffa76142e210a64364c5d7c6b24b377cea3759e0463284d7990bf1aa61b71899a3f7e33e7f984778d266ce01687e1c67e237ed641683154fb316d61337d7f3043dd8c735639c7d2081fd08c44fb4afea738eeb40397b93b1e4029ecc008207f721b172ae9686796b83244b929942e24e8f2b5d7a53e97e773a8fed4abd0ae21db92dd16587434fec278d12f1fc8f398045b4a36d0ebdb0209bc65a7f92a7d2ccc78c9cd9997b10d7a53c9591b3986bd1d1c44646eac48ee4884a6e76b646a8380701f6b5d78e91fb7949ad2f80350c42e59cecfcf9eafe36a12ef778e12aedbb7b20550ee14c339b128184d02a57382de34246bbe28e1cd9a0a52329867f06469f27dcf4352135651da5c4b5e2c6be22af2a67aed13a2fd2323ecd77223b6dd2ba473d7d86c2ce87a0303d6c91e7afb374aab0176806341a7ef81a00e4f07dfcf7a08a1fec15cabaf7ddf530db851a1fc879e97e855dae87cd9bdb013fb38a792807b89767754f293ce54d6e518f506f103518120480b17ff08c0abeb8d952e8dea8f985ec0effb6af7e92c7394d59a3af0337555664c2ca06907edf3b710bee25d4cc18e4830a9b43a2a1713c5705be83a13e8f4e20a1cbb05afe01bc3432ebb244ee7eefdd4925ed681c9b015d64e9247c066712021121da529f9df1a1b1b5eca233cf84dbee901f4f3d540286c27bf986ae912d84956e3e2933b498ca7360979f183ecbebd7780ad4507b5f474e48e34386069100c13f32dfb2a90a4d3ba71f52ba2bbc105df6947fdee7ef3e80c0b7008721ba17c1027fa30f6b837d2856eed08fa06eefc81337e90cef5503b4e3ce5f418f21f4c539503cb646492afe619c73f67c10b902a97493a5b5bee5a27290362a1b3f7684c1a7866d6639af11e5db7e408cde1a9dce32eae4d60284ad8d41880f94a5efc3468e11d323e824e60fc515f1fc2fddb7516895801f726eae6999349bf16d0dee7a867d9feee642c878e3e1891c3e339d2b4177320290af09c99a956d3c57419b1a02a09723cb38c8b22402a0473e829198ad696fda8f3cda640f986e2e84624e5178340714332401522d88e0a2e8389cefba57dea3332f56040826ca1f56c45f6a148531f8a3aa56c1e1984fa4d9296eda189107b6ed268ccf8b917ebf13fdcb9c526814a098e451c95f34b46aef27b2781f1653e808c019185cdad107bdb85adbc551e602645843dbf5b5681639d23f3a5299e6fbf65e9c6b1267d557f8d697fda5985731bcf641f9d418173ca69375f3dc15c930640a5fbf8597216918ca7b3307b877583bb325941fa866e18fe758fd9810e24dbf725499e4ce175da69ca714e24538a2d1fbedd29187612a649d24802417915913251a1d86e4b08ecc338625fba7c79a49bbc0043d7840638aaa0cdfe8d19a8718b8a270de1900a65bc4b19a3fb71c2d2e906f83dc69af672e77f134625b944b1a7d8f5433443887a6402232ccb165259e159433d88a5d07b15829f9f72e162c296f54e2d73030bddcdc3232f85ce2775d743ccdea858b0c964e6f0244680596afa22cc2343f86504f4df2147bbb2cbbd49026e0fbfd25d4fd5e7eb5a7b63ec047e8320e0c6b34f16f26a9e58ee3a4fb873e12be7d5ff01d3ee1b00b1fc6d068ea8d4af88571d2c665a6527a304912c91072076111517405dbf580e4843d4f5fda9fac3b693f8719ab1d0ebdcea5f72108a7365e3653bd9aabd353a88465b87166f4e2f788a026c39395a6c3ebec1dd176b9de87a91eb181af21c9120420444f32bb0a165ede44e7b371ec5b75717912319a3858946ac199831ca4cf3546373d05b74e0baaeca24e87bc37af9d331c440dec6debb246d8a5677cdcb51e5be7bd1b1492db324fa6e5e3d1413aaec45a34921c4c3f48cd1c6f1ad25a28e75c08eb8c0940ee0a1f095d13160b8e3237dc5d5f3176cf464ab1c21fbc66eeaa920e16183a600c808baf7b34c529562bf7997db985c3cbb0d2b231714f91dec24ec5ef8cdaa15bc938fc683bb86d88a9008cd61dc0e02a4970e80ca4ccaec8402d138a363c9cdb7e4c5beb52271f5407371465d9062726998911abf55feb4fda40a88484bd223540169243a716add7d16697a93794b18f81c2990d9a65f9116307d8f3edbb355d4bed0bcfd948ceec10b2b999e7c9af15d3d5249095d27c066c491807280473041ad7790b9336ebac658eaba1928c8b0fe802bf839a2e39a44a2941da3c52f069f321a111569324e41e17443a67cf5ca024e355cfd98e2c4908a7159543943884e68a7ecfceb9c0952335aa48c9ea4c925cfcce8f9b2740b16c41decc34d3124391abc198a4b45563b968c12194f7c50caf88f65b1068cbf4e69356eb5fa029df0157695f319ba88613983a10a10c89c81a17631762f3fd655befc5a022529fdc8fe231367b78eca86564eff80aed7ea9816d2f097a02c283df16b5ef4b4960f5af39b0e5da82d28a75def0094ae200a9b2879d5543af67cbd11d9ecfaae141c64b55ee26b276a924fe59e3ef9ba087945eed2b6d9b22afd6daacaa3c56a62ef1ab2e9faada6700454b17abbb652fc9a2622bd9e0073e87fc89eaa190a9bd0ae9ad16a7d0c580117dd8bde23d2a541652e76d161878413bf7de3122155e1cbed5c8742d11e4a826576e334a5ea9b1707ad92c31c00fa06d50995f38319f17428e7f746a67d55321f662987d4a12f860cd0ddd410b77d2183df1ef1c34042cb71120eb54f6f53940c5b67a738d1e92c9f0829f62112082b8970fa8f1d7d8ba3b745116910d7b918c9e7401381efa6e3841f8bb081fc640a031f48c7ae13ce1ae274a294823df0521764ba81ac1a89bd8c72834d1cb743c21fc0c320e9f35859d9a5d5233996fee370c4407a1d98f577d92355a63274dd7b9bda87253b389bae94aa5162714957ac947441f734e3017e6028bd8ef1c9b0a4dc16ee2dc0e2d5562584a5ba6ab3d8e3019955c20056f57be4b448e89a37da114f7ec1e9ac83ef63b6dc02fe8cfa409bf5dbf33d1579d28fc053458c67cd71c69d3d70a170d70dae6a34820190d509fe93a3bb11a5d8b59214b2a6913d8651f804df5a40a9ae07ff758186b4e3879750a8ec82ef2000067351fbcbbbea4134dc411d1d16e8ad6019d4a6555539ddd01313d26ba6bf94ded0fea771aa6def5ad89eba2611571fdcb58ce1b075bd21c11b122901c4cf043c14c3456f6964b8874ce19ac97b8f7b43e81b697d0420c2ede1fbb526ed58a0ec29727cc750d97695c51f840daeffc6bb1d434d788b3951d7891f92fbd0c18dfee6a3c8b910be2c7306e047e83794ecb87cb55659044fc3604df1a4fe52b5ddf4f199c224b2f7eeb5badd6a4d5b902188b0c3eab515c4ffd906ac5a82f4d5a73093a851005e98177b3cb7fe2fe5abbf83171f50810ea1586aa22e43b89bcb07b1f67b69ebc7fe3ebb5b6f543b82f059dd8753cb55ae27fae7e17f1e1c1886b4f93a7063e9311d6990585ef484a30cfb7066fff3552e23a014a3bf538e32fc9e7a7a6e9c6872fe58cda27a2ef393b393fa92bebf9118542a3aff3314d72f4992efd3a2f6154e0aa6b70fba73964ac662c8b6fb252d92d8e9ce5a8474aecdb056100e3b81447d9c5bdfa54a9d417434133cb45632e83859679e4dbbd10f05bcfd8e37b0f3dfa5fceea39b417b1035dcb4c1955413102bc5db1319c2de151faa9c6cede8c83ebab0325adab99980e15fb2af275047e6a8fb78deb67ddd05d96330a86239c1adbd549f4e108e4b793ac6b5d92b096d5f13063c99a751467f77ac56e6b7382261a0fd1e4d1ba78a0da1c8f2b7a0c5f23d53fa3c5057b8f215cdb94454fd4cd79788c019be4653fdbe515dac438313bacf04a84a2dbd6a38c14bcbdfabb1c129cf45c640526135fb28d026aba0ef5bccc308d2e6e4ce3cc53a871a24162cba4e5e35e0eda26e7d35fc4282db40f345e843c867b8e0bbf54edf019c7490160ca316cc2f57ff31cdf4839bb6c5b04e9f9a605603873bd64500e539947c95aa8b196e79d8fc2cf37202dea7300b9bed0c2ba8bc7c7cf993f718fa7d5ea438fc0438b77768ea88d5294787cf5a483578090827c85ee8596df5f25e7234ccbffc5906f5a6eade759fb433e0be7da48413369e9cbd2038bcb30b3d1c67c17ab23fa7d76b04dce5aec6526877958a3098112bcb4cce498716bd7c7e59af1e2d49bd648a785ec6f4cc84cc0ef5d5f0d2aae582febb7d2928ced17eebe41a48a93173d7677eb5548589014530220548768c510d377c9a23332aec972befc7f1a917906240b81b74687f199b05ac368da43684bb5fbed3640a1a25519c672f8dabf7f51359d20dce5b9eb2505c3188ecb7f37b5878c52c682b3718508d0009c21fd26edba70014e290bfb5f56093cddd8cea91d6d5ca05dafe8a062ccf0984dd863f94cf59b206440fd78c8a922ab22f6481d2c413530191debc35ce5fd0e63928047051409c10fbd10d3bc89a85e88e1f1e427664b241926f007fcfdbebaf89e3030c945d3df86a04d31dd4fab24772d3416a208af02f4d1fcb3f78ee646c9d3b438ffc5b743d4051ba371814b06be9a5f592aca1aba17a35847ac46e54d7f9b5972c0e1fb4295af973fd1d4738e275720690312dd81a0062799d494fbb223c0183a01f82a9d04b6ccc00e8daecca0c513138d620a031da2b2c689f9a09f356bb7655ebe416cf3d45e564ce32922c1329c2cf93a145a0ea9973f02ba9b8273d9c1e8d4f7938f83326694c980ccaffe49a0cdd38c6cca6d7888525b71b5cc37b49c54d724721ee5fc9cba04a06250ed84a5d4da2a38fd01779892e14c2e0389dd1ce0787db8a705d820dc238f81ecd335af285947d5ca9f5cd88d5cc965f3cd5fdd656283e878b50deba87c62d9cad604046b8efc49f9c1c4fd6b228d5d7751e09ac961f166ad985d5ce6c587bb9e7b1dbe48a16f621c4b531e4fea91a7f8fbeb3822382a19757c5f11e0634c203a01096990820b91ce4af37737aca313c106eb4bca490f1003e4fe87e9fccfa30c595d62f24dc5db4b647ad1418f29ca0e52313689e6238ab92a0ccaab4532ad6b3d16c07c0c521df352b7b9e0b374846a770a3d8abbebf2c3d7da43d289df2dc0d18377f4cf6d131347ccea49f9328257bb11c763e7e7764b4df58bf7c801c54729d4b6fe8a90ec4e1598f57cd010ceaac3e642febfc9052f236ae259383c9f07d01ab3b76f11a486eba109582d20b38206e0490a44ff595c694506f37479e0f0a75c500c69b5555ac9c87a2deefb88889841b40a18b48551141adedfe0aae447bfae95aab4df82103458b04467823a18b613078aab55a12d5ef64fbcfe6de3cb56af3b804858b0bf8107fb2de88562bbd8ae860a7859d311d0a28d1c6342d328904c0cc6019560c6df765b945e4ca6c2e95a63db5cbca9c14084b9d35626a999ef244a29823eb59d3f2fe2c160996529312d8237e2a1fd2a35a5ed1575d465554d6b40f4bd0c9061ddaeb99fb6a92e6ce005cd4714f59e6e31f6c3c07e4ccc793b3fd4cf4e065384fccb46074ccbb40853ab82d563fdcffa044edfbbe78bb11d56c179cca69c87325b04748835d4cd69a6f479c1bb3bfe6c1b8ad439d15441af5f2eb77007883d4c526ffb33c4e6ac30215eadfdb936ff257d8cb64bbda3d40cd2a6a81af626b31e474a4b8e48a908f5fc7dd2386f49b0819b6b7d039d45de0e12b3bdb817ea4ba7124502b1f5a9038d9dc5d4ecd7336367dd57b2e5d955ca68a5b774696275efa672e713d11838c78baef0901708ab41a05dab4d4bebf6949109e62fbb2b62f1fb337730e35b5f5ffe58961767ee1ab143520f93bb05d783a48f87842de94cd2554181af56b06739e4a90c49ff25a6120474d29b62da901036624e2524de6fa258befb91138ac29bf39e0253614385b9850d7e430e89bcd0a0ca6e18320087cbca1465d9ca91a92c99fb75c25e12f2c637e3d07aff953b7af5de194a9fd5d85140f782dc97f136d3bf0fb8faacfd86d72fad7d05caf24adc18193c19e15c37f5b2714fb1ecc78e5edcabe0830f6765de31f847b7468c589d8955fc827a28fd8aedb044f58470418216deb050aaf5908be1fe1be58076b234e17cec49148002c2d56df28a95d6dfa186869b46b2e3050f370b16c941c8b98154e18e6451bc8f3bf0ca382a59f10787e05fdc5bf235fcf6a22729c361fee3ac6eed3c59ef34ef04a6f47c03a7168cc8fc3b162947a7c1b9fe23be451d5f7d503bdbcf3a561d7d06475a1ee6a6e17d31ab0538277ec883b8a68321575b454338ceb23c6fcf26d3e2b065b536efc433ae6f653673ea77c555ef28737330caa7131c3966be33bd516d13010700e13eb6bfc4795d12e97cb23804af10ca6fb7e500634d6e205d894258c66b4c076170049876c789a7ee63e41538ea7b99500b223ef95808a6f09cc20f1505cb21164d218268eece373d6fce47710c79bd5eefd3d5dc876eff196b0a7997c25be5e5e0b2b0de51dbf56256748c864a253a6531c50251be0126a9d18b74221ae90f3b441671812d5283ad7c44d950a9ca2679bf4dfd5b8136269847cf860924175cd80f5f79e93f08bdf790d9060b66f808c93f673c884ee26861fd2593d0f89ea6741b808fda3c7616220375035df6ebfd5f70aae40afef1fde36bd6ca0d83cb89dc81dbcb3e80deb773a51d24d13de8d02e6e7533552e389bd924b57c60aee534c732fac67e046b0ac5dcd2fdb52fdf58e38faabe5dd078b8dd01f1d2dd3a11c987995eacd124d4f712c1e420ddf2a0f2e583bfffefb417cf2bc1775b5762696bc2027f4125b3346fe95985facb9c9794056bf455c9caa8c0471638c2dc9d684e94a19540ad488fb93402d7b20f3aef825db952ecd686c67b218b682963938982a2db041aa84ed7d4a5eb72243b49aaedecf1212ddacc37b6d9b4c6e9220d7861b5fb65b5bbc4604c75b15e91bb95e4e0b26c452460c4e9787538884afb85c7e19ce67100d274d294293fed4dbf6af9e9e87ec80e442823405b8ec456e5fd2e282981adc31342c2f6a891c0d0cd4f1246dfaf1e8a121d225f6c93699d0065a7b11294a90ca703420f244ade17522f3ba2b16d3bd48f6476da165ddd70299428f9e373d30ca097cbabaf62bbbf53905f5c1b68bc3704839916925db636dff4899247f49a1f5594b416c2bcccc462a1ef3203066745a2b69cb202432658fa35fb9b62c6c9c7fa73e7125bf7dcc925720f10d394aee48285cb6f3f8ff03390e3d21fb05d735775b38c3509060f5507a2217ee1195841e8ee7ab87fe9549626258529024e8cec19b72733ce0cbcb9673b99dad46c0a72ab673b0c9ab86987b6191d2d1e59bd37fad81dca4bf3bbd4fe067e4875731644e9df98ab086ef80fa7044ba6faf8e32fe8aff4d407bb487d5d95ab46d5cdcc27f971239eecd101ba0a3ca7f277841307fb828ab4086b410106d2eb9a92c11dfcff00ddcbd6feca1e8056645c23d6c7720a9961826c9bfb4d5a18dfe62aaa4359db3805350a0132ba041d6211b8dc0850f5e7336f935aa7c80455fff0fe74b62ffc548bed36bd72631601108b258d9fdf83b5c666c7e646b61167bb21b902a5b6ecfb07d8f99a75e6dd506ee4b2ba98fc7ab9c42bbc862823d86c7b3ceac43296c055284e0cd1032b27bc98ede4b58f1c8decd7afca5617973629893ea20eb0b1118980f0102422039c443274ae7b3cd96da26bb4f3ee76792b034b6a56bffb74a32cbff0c546bd15d9d2b86c4b0d8b0a714b7aa663d7d294e98b0a17759168e0f19f978a5743648201816e0b4fa1ab95458c64dac57f1bfc2c9c2dc190041911a788dd507603d5aada659b9a8d0aae4f45c45a2bed5e8b03d99e998d2af9979c1f6f450092a602401f80da7440da8b4a3a62ec33b771c686812878f90d1afb620fc4a8059ee02868736afadd13c2481b450ca0a67f5e2af2351ae4c61fe1dc40dc831ef30cfd826e0e6bac86fad9bc8a3ccc8101728140ff43109329bb9c1a63f95631c5e6e05b16482140029e29e6a521d1e2ca1fdfe96bad713da4102575d32cb6496d20ec9940e3e02df728aadaeb2fb546141ddcaa21fcdd3c3a9789620d7f1165ca221c99267a2a38d6532d549b4617df6b41b8dc1d85ac784062975295c0ed8d2ec5892c9e32649ec5b3fff21c621ee972c4661d8eada0bc97f6efd920965f7831d8752e55cb9bbae06262e4489edec6b0e28b47d677795241f8935c8745b8de61220353bbbf5f8c5127725233813bccc1ec6c6dd1b676a8696ddcd16eb9001ffea63b8c0879d33fcdcf96182ff96c080dce4ac47541d9071114ae326d896fd4db8ed10a1f2b3c71a946b9dd26b7f502dd0c2b2c278f73d31adc4575dd7e331c5087019640616dc78ef400e78a84adfa1a30670aa7c94d82f5653f237b9c17415bd529e7a19751321ec7294b2b83107161fd5aec4d0d77606a4a3dbf9897d0c386df65af87edb60be0b5436cb88b9b7009b41fad116690d256bcf1e4e732166703bcbab45776594fd548a6247b95cc96da2098f8d0082da8ef53085cf63f18d84c702a4c2404f2da70d42d8a2dd1552a2b796c023c51f614ae881dd81560e8a3fce8c4cfcee3659205ce79679c58e38810d3b13d4fafffff948e58579ed715b692230e7d7862060069cd93503ab3890925ffbeb9d22a2404294287c6ff0448531f48e5a8b80f3d4c18c92da3ca0372851f89f75ef8c38af3b62485e993b0b82dec5a2d96ec4f13fefc4f74641112215b930be4491023421735384b88caeb5663d90ba71b50bc41c0343c249eafcb292bc24843993c9b81b2251f59a2b0f020b9aa9ee298ac76f831963410b943e34346153989899ff9b9db78c13739603462d3312c23c13fdfb6daa22c36fda16358b6e81502465b460314e39fe5087ac29e4f64985e0a0cc36ad515305cf83e6ba6f835a1ad629671c232e81128ce14f1920baf262ed24f7ed51a63ba9fd3c9b47810bc444ffddd8f47b3d12aeee20140a04ada04e60448734d8c4ed84b2cc81572cbfbbd13a714e16a6042ade3ee1b34b42c9b16743c251366746dcde131548fab7599b8133bfb21620c5ba46b16fa4faaad8c9ea527ce49df0385263a847de155c363bd52d061305ab6406d1bd3a18150c04fd182e1693054cbdd9fc868de353ccca2a3fcb3bf9f4c4f0373ecbe1b443913af4d41d30b932cff23b364833b0b9ea948eb5722699badafff6934183c8974aff7f68b0a3153099aa1766aed9af9003f8ed6986615bd100a7e53737052900de5be9950c196401c57947319c6efbc1852d1e577554d6c36412403f8a2d02dfa32ed03d349559141c39c067ac00de5c6ca811b95094e682762477807cc4298ff6ea4911a26baf31c9ef50c10dc29a617c54c2fed30f411b52bac58c5745d5331741e67a163ebe556c27fda76e7137963819b62d8d5996ce096b04179f24c64f6791db3b8736d4c1df8c70c86333de06605557769a80115bf0d05259bacb239ef60597d2f0b16daad68f66eb552842e37eac5d29e8f6d0f79e380c25a8a4bfe4ccd37af04bf5088000cc1b500c32550e6e2f89faf2424ab49e0ee65f6f5ee15e4fdf4fc84cb99e2201ffbc4ecbe7bcddb28b01e100a217a1d2c62877df0cb081391e235cca9f3e3c142fe53563d7ef92bac2a9842ffa504f6caddc3710661045d6ee6384f551cd5f1687e9c212be71e0ff672d94936af008a93db67939b1beb64847fe76734e69815b28c1ecda925a15eae7adfffbeed2532a3cc5e077b76e5d2a912fbcc44f5ff11b9d4f2386ac81da319143e703fa8d0fab8ec6346992602201c659cb959cbced63cc971f8bcb221fc736cb26ee2b8e01659a4fd6a97af5eba314afae2241bf26db91eb0c1dba77a6683097261596cc22078f55c889ecf4dd634b1bbb6b27e450a9cc0ede460bda19b3ce02bace1869f2fedfdb9bcdedfbce5b0491a3e62a714bc8ae7a0045f46b91a652197f2906b67515ba779f78f754243007770c3e4741e128c9f53567d966c72d86c550fbb11bb5db2527f59376015b774ef04258c4370d5a6ca5b1b50fd2bbe8e3a7366e8a256792313ee4a4256f2c2e1ffd8926a929a73dc60e668fbcfd0d2479465028a07a00805d8a8d0325facff8e0607c1ccb07fe8464d884a73e7a26d74f6bd6f911aea8a00b49f7adb1ba229c43928beec4523cc6b677af79b14621c23f2a12d0e099bf139c2ef19719591e82aef358fb0f65940c5f467e20864ba3e3358d5bc9523c1e71b4d2348f99e8a89713c03e94e7936aa617d3fb27ee1379767817e813735efa4c6ba64dca8db148f671e2451565c423878c4495c548a90403e00248500a658dd0fd669994e2c3c39aec3e366ef6a97a39c32e3b3a742eb2807c12c1e337808693c22585e01a8d58392d407948006b315e6eaf8649ae5dbac8dda49b4896b95b7c36c5238e4a4574e263f6bd4da7d504f23005fb7177825280312211b94425760c42b2bff2b599aa8d9c34d97067f459d59f32470d8c315c68fec1f67392d4926a95b4adf10718127dcf28ae4a6cec831fee73ba52bfa8bf7c069329f48ceeea3060b94a40e7e3a12362d3949adb03fd5a9b61543ae9e3c04e73b1f738a84e25cf3658d9e047681d0e72e8f3c6a7d22d394b363ea63e0e58945968baccf8dd82cab3cf623577131f6abef70789b4866eb17f723cdc8d18a2df58a11405398ffff1db4872bb9e5ea574a039f7ed77a5ddeb54083cfe97cbe3a093eea4347766c5cd67eeb56a7232efc8c99460f9ea4052f9404f94774432805b38bbf6c1535c082c15b91e19fd4013044c3d687583e1cd80f31fc04afc52a777a9438bcfbea05ef452f90ddf83bf25da6952e26ad99c6c5e602592f32e0523841030564f616e8f4fbc4ee8bb0c88881fe3166ed8a81f4ec715b84dde5181c4bfff64b6dcf4d1951e32f9951e246df80c29587bac91b39720e727f5773e764e2a40d1c1c542716fd5f29b7e7a0da78339269948ec3d30af8846dca6c52bfc33a45b0a9b7d3f4276485b3e345ff2bad67adb03d9dfb0d8dd8065aa376cc24c7a59eda378b4e93808e1fe1558ed2d90d22e9a770697a2368829a0366593ae577b8282582be2e8a652c916751b3dad047e8fe9fa909c115eb8e8b56303ba0ee29040c876698ae50e86aa52098683b30750033407122514c85cceb2a6c41e28686c9550ee498e254018bfa59cfbd170243ad84e8279aa441903b3317c0861d3856b96fd76a2fac146fd68a759a76b25ba5460bea1d0fd5a3f162b3023f605f42334d5a299c0c10081b43cffabf77b4870c1582020b8cbf95b58880a4e6911f6c27fe9c89d75e79e098102eb0635b1fe65044a00671223abae180bc0ab8aa3cb810c3f2a9adc2344f34f3de524057f2edf730e6602ce5a480a89f540460f2ab11a5c43f0224b62a08279483f992bb8b34f6cacf60f4d1e964a869f5d5930c9e5c219f2b81839b0d234ffcd1b6a1265a69d84fd1e09878ab96e4f1b5016ae7f33f0d92acf82d739873ebe64ac258243330f15cba9c5efeaf58fa7eba61f34bb6c08a007a864e2540d67cc64b6808eced997d3a03a85062fbae10d4d4e0aee265b9c02a15ef806b002dac2c411ff6e6696062039dacfb353d3d829138a3e3e33ec3494f0463e3ad56d97fd73e90c1e933e8483725f376e79e2abe00b1a24240f011607bde84e3b1b2f8b1c22665e127a7ef72e06f7b846a7bd2429f2d6b8b490edda1b53b46136508334075fb038f1d0f5912336c75e8c3f3b72fd0132e75d523e3fb59c4e9d05c373e5b1e6b81c2b56fb08a2ae1170a0a055ae03fe171351dffff8a95422bf940e92249dbc8f15200ce3cccc6a7b3ff2110be3da4dead363a30e9b61a52903f09d9d57ecc110e263773a6d922a11e0935c4351d6b2c0f968111d820939c5f09c3c5a08e0b21177a6260099a4743317b13b0e6630db583f16ff8da6a50198fb3a0207ade6b04a4410ec961e4c93f1a6dd5e6050fe7ba5a771e26ec70a4f4155757075ca26992e0c176c33bb50f747f4dad79ef8253ee213bbd0dfff57b78f14e909aa9a812a0a2a56df7f9d77729ee4fcb57b2e6b695992abac625a93dd84612101d40402cb00a301304e02d377715b542e5f54a99db00d8d67e77274422ec7477fc9e6585b481baa8684071beca696385c98215452cb738dcc1104f870d9d96d40e82a0c0579e6155d202ad6bf6ecc9c33f8e0729f1932a2cda173b96fc302e574a4b497e1e4d0d2ef5a1c37384a2b0f438b062e7243d715938bf3e6531504d977061b81fb61fa1b2e9750b1099940d9c22bf848e4e74480cd51b55fbe4ceb8d56ffc99fe07839b0b8dfa408db737b955f64d641b1eefb24a932474e46639e149147d347adf74bbc940b61597cc4ad66406262f6cc46a6d40b1459726f2d89009c8265aba2fa05bfc1a1e5b53d312e34a19e3f8439040c591f286ebefad80d83f444590e5ad315d79f4e7b6d9fd848610ff851f6d65e3f86751946212ec9531bc8a642f2577f37596f2bd1c06af5f062a639df04a0fccb4e9f0a2044d0bd27a45de36a0a9f89b3f939204c60c784ab68a16abfd772c702b75bc849969de5541ffb32889d252b97c3ed688232013d1f67d952f053622f67841880d1d231619d6dfb63338d67932cc6291c92750f7913d3e414af76a703b69f83726b98ece6930fe4a6581c909e338460eaf80a89126f883096e3bf24b027515df500bb85dab899ee453d18be3fbb42176c0dd2b8affc99237ab2f47194f9d3d80da4f2a795b9e7e7c4ba586b08db17f306971a105315fa0976313a112d7bf41cf83968aca6e7fbcc213cab8669947b3728f267f6b38b487b8f098649f7867e564cfc665e9fba1c2fde4057b4148aa9f24ad4ac6faf40eb159b1c5b4939174a8db4cfdc91eb06cb45d180b964c2b051ed9eca9f557d104d9172abee671719a5040d12261d3dc42789d9b94964e078790a29f58f97c1a4b845b5cd926f28ed51fef9f9fb9303f741de0be3afe0b3a46765308f8245480931e4a08b51da15d5d6c257c690b7375519babe8c1734d1eccce110d1963d05b201c132e8f8830d5f6c2d3598d2ff2e8c9039b85dc90401d2f6ffc83a992ee224ae439486d870d166f6a87b518ffa1767d980b588c2f75e59c9be113b9e61cc5a8acf1e8a57b7bb90c01cf71631d393d3b6103a8091dd20b5793eb10bc033dd26864f8d071e49c034be1e20b0909bfa52006ef0005986827fc9d03c0e34272f6a4493c4e830e8451bbbaef8f88b46f38a1b8c98b68f38df2aca706cf8439c9272941668aa8536eb6f310c0ae4eeb54dba3dd9dea9edee3b69aada2545b30fd4dbe947ad32d603883edb6738d9c52440ce49883838bc069066636cf6b38c6598533a9dba9eed73aab64a9d2e831070a28a2a344d8f6715a63289019eec9c56081cab4d2181360477a683a5cb64d7e5edfcb455f052a8bb2dbd74041d52f39dd6dd378fdefb2cc3351651a452e4be2156320e6e246d550d08baebb7a15e23a287614ca54f53dc99a65af49bba36b99bb5ca3464220a7d52f4f2d1da916a1262a625c0fa2452d0cebd7c8412d0b1aab80ef42095f1bfd3b2e51489b12cf460f96e5f094dc2205cde7ec78ffc58acb595a68827abc5f5357bf1d93338aef578273f7f0fd5e1acf7cf36e17e7411fe73eaa8378badfacca760794b3aa5f9669d88ddd651bdeaf4abd5f726ea9b4dbc536d07844c74e4261ae4975e55b48529f981be54300755d17612e195b7ea13f5479df698c521b20915cc3b50c82067bbdb7b4a280e9dfe2248d932f683121758cbd2a53393f90ace616524a82489c2b3b8be597173dec35987c83453d8e6f1bcdd2f620a049e0fd10eb8e3d3c15f86e24860a7e6f63d32d1803e878ce4753b9329e1112e88b43a3a6e613cbe11f4db026b94e1031d3880a9f4aa17dfd788c1c7f488facb1ef09dabdadbe7e832d3388ee21a7c1184ccb388a79e7bc590e60c65ab87ede2342104b72bcbbe9dd2d459610c78ba60ebbf6b7fb99d0ffb15ead8ce7efcb50e65bfcfd8cb7de551656b13c031779c50c68de23f401f9392f4cb08f7c0fbdeb4fd0ba79f2a994836ece67a0e9ef1608751146b022537ed2a48a4fba6053362320399caf225c420d8cc58d3b31295df49440c6e602290f0dd2835aa8e016707866298eeb7e6d3d7cf11470da9d16a376f8b530a7efe4669097ca77b90b08f76198a592f49cd1aaccd77334d27e585976283d0be83e6b2b235ab06b5a63d5e6c3023381074b3f42a400e2338c623a25c63cf9c25ad0ab54e9f70caedd6e69bf92b1adf1f2747bb8de0498dcc764d1bd70d267f6b3fb662da4ff8e158679375d4af5261e26ae786e933ab660c6488c9610a5ce5e1264b4c0329d589ab32c10e0ff4770a656d8c178db8917ee1b8ab1590a9da3d41e2480aba524c7ed50329301fc8b7e0849d9306e56918873d6e5cedcac4c571b684bd5dcc92d666901e42c6818dc6ef483f462e1dfdfea695ae90620674e855f2e6c475388d14f7530e2dbdbf514c12f0f616c281b5ed9da1b757b54ef0f2252a2ea75fb978aa7db8e905ede83145d4d3faa37631139810145053dfaaaee1d6077afc25f6a8737a9909b5b2a18a407e2634198a30b496d2299ed805f32b8294bf3f143f539600c090ac3473853b7e90456edb3158c68e6b57bffc2ff676d24b6f5e2f0a86211088b46910cb83fbf0dcbb548276fe42d67a5cd13ac62d010979b2864f7493aac615a728e73c8071a7b61e9a82355078c822c3a27fd4e4aa181047ed51f100fed2fe1d1aa274b005175bf3c7ad1b001ab79d1b1de3b6f204c944eea56e8760d0569f4b85e60fdcb979baaceca8af4088d34242b8fa85bdd7e0d2ba6f2dfbaf1c2a3b4f7d0679e4c1206b3bff562b67882627775d7eff363df66ce550ddf35f39d7cc0c5a96c66260f3713513bfe560c66a14dc966bb745c37d0e8a94cc4633ecc98c31ae029836547c0052ab785248f730a0988313c8df5b4d00d678ca4379ebd9535c788747654041f6d603525a83753730409ccfa813a5fc5c223dc615f93c0ca606a35cc2dca9a40b0665cbf92c3a91d291726219722cecd3efa9e4adee4f6c9a073774f5fcfe6a46023a81774e0db0445dd2f2e9e3e71c29f634ecd2abd31a20ec0cc7bf9e7a031127ffc342e74dc4a34775631241eaf2f9fc85a44bc3baf4938e9961f5487b8100327542acfd38d1871c0a4a5869ac63efb8878171d6739b732a6168241600dd17e6c20aae720e5bc6858498615f660edcf375e6c2b34b157fbed9df1cc4bdaeed6c54027f56a0855d4e1446e2f06b289b8bcd8c4c55f2cd51a1b727ac1dc13d310f985172b79c5e8c1e8dd53eab1c661b4ef97fd2679fb2964c2c45d30808ce0cc3da4fa9c795467e4147cde8265d7659cd53ea37f2ba178609f3f1325e20d87f78deb724e9c871698dd9a790b738a8c8de619c347405e5c8211b4e9ae8d53173bd398c65eeb76816d1fb008dad49f6e650d1ee9f01a38a26e32498b8d47a7c23d9c267cb9fd3731d4abe1ed3e0f6be5787bc317ea32739b02d1c18a7d2c84a31ca18f7802eea2af7a96a666b60dfaf0b0acc57c08c15520a79868968cce1bdfd85558101be08fcd633d091548eed88ac523c77597a8853226cde89d267297ce4f792a174c5047615ed376e2e220e99c4a04c53509748e7cc054e8ad96dbe9a9fa81a7d792935b48f6698ee56d2ac5528b4d3bfce1c37f1091570e455911e91c521b3822b16f7e6d06d2b389f877ad886f738602eb434c4ed87cce1709f5b84d5a823423e8dec2046c94349a7181c4be370d141e485fae1e5d0cd88f1d5079062192e2fd96601979e04d4b4a95ede19aae5d38655a47919b7ed19365d164817bd85aff3374b500b67d56af487139301d74737b9887e71f651f883d1e0a0b49325cb435898b29fcaab5ccbd06a1275d0981b8316c647ca161388176cd8cf3d152ab8297adf3e62c440826251796abe40360cc01d3b0878bb4d1f0c5caf0fcde7d7be17a9ace1501fb3184514ccd6d5403aaf3bc227527affea1b4851d54c5bcc069495587171518a30e39c8c5f646c99a25ff58c7941e48374a75b907bb2871249f3c4af1a95d0022fe7c52f283cca834a4adf61ec2c837b29dc4ebb233003fc50e85ac34c2578843f684abb09db6528e17ddeb13f2767162b6e1992a2c67778ce62c551d973df7548f9722e34aec57c342aebe19c8fc09cae341e044b20fec31d479ec50d274db9c1d63104eb5ae2a7186aa2633c39f481cdc847377e06ce7bd5b18df21990d548b73e349e619ac0975da6ad9cb1c68d3e9f9b6946640c1113d2b62db7c1b140a118d6d9f0155860237bb4aeec645b29c700e4cfaaf93fa658d7f4fca443e9cbb104ec3cff3f8729ef10edb6f2c5a59b3925cddc4da8e4853c32ba288d1058a16453cf0f4a0a03518b1e1e7413e397544c171614093b30c4f8fc55acf376423bedc11093442d141aa0194083d9222e2f960fe4714bd30dae33827dc3fb6e8ed5a5db7f194f4a7477874cf16e7b4f23c3d30edecd84340e93e72d1f8e28fc6bb03060851fd99eafbfd90d6eed7582e9784bfeb696a4fe9f8e36021f3e13ecdea0ce94cd7e86ab04f4d6e998f61963e2fc6dc9fd8e7564e929e430911a316900f7fc9d92f917b83e165feaa2cf4e19376a285aa0793958d626c16bfca0e6551d44620f7143221a41c48a1b50fc00d895d40e7a3b77fd976fec7270bb7e3006c9c121ebe263694517aad024ce2750afb8c48af80e07e524ca45845086dd7ed399b720106a0f2df12d34ae68334a6735aee48b162e5d367f12f7b90978b4703c3fb9958e61ada6d640c9223420f76cfee5b4d756f85d1483f39ca52ea57da59ccaef6cbd02b2bd568007275ece2ba4b71d120a0ee609a7ec6b90ffd5efa859e2ed10f0c6ba6fc629f0782e2d08dec2cb03dbee4243043eec2813eb61ef439b111b26418e676a39b2c6e64e75fe5dca4ca9ab1601e00e7ae15c4195cbf57c0db969789ffdfd953d168775b58a1a3f8f13b1da6469b68c8f17b9fd72c274af6d2ea59e6aa584d28f89dca12d79113bb7e7699622401d74e119bcf5cc72ab6575fb51c0bf7f1ec519e994058902c206efcfe043024c710abde397f9fecf7c6aa5a05a60ea46ec985b6d316abc1b39750f421f303fa2ee52b415352f384cfbac7c3e02a187e0a519c268a180a456703ee4bd90e3933b2efafbe26d8963f22d23e6288f974443ccca6ac24adb63faab1952c694842206c4d0a74238a0102beeeed77135cce0f05c207f0cf78a33583c9f18efbeabe63bce4ae2dbac72cc2290c640b053c813c030985d509eb28964373f5ce3f759860743d49ced416e45fcde8b7dd97dbfd2090795c88916992c7cba631b206f04643370645a5fd201e7e7d3996620c7ec46907580a4d2afd31a220ff94b4a1f58394a71544f0bd699d195396de567e4eb52af5098623938997e331c24f8ae7d7ba5b14f074567fc35b77b4c38c769c1e884f4eae9afe20f32e211dae44d96857e2e80a2a28b1e3a8bf930dcf74d93b9195767a71d4c1adc662c226efc4602b2d3c1dfa2c19c388ef331bfc74eeec6e6aabe2a29723aaf2e67f18db4e4e46f36a0e330fbf9dc004f11778b034dd7de971545e4bc2310e7a2c64d84bce35470bac6796699a1f9f446e316845c53d93385a8910362fb40ee8a0017e3c8d119e649162961bfc99599063a5e23a155ae1d4c378981d99c6118ccc75b70f29f81b3f616279a2da4327b3a1ac8c00df33e8f1465d44b7d6ad4d14c4646bba7c78daaa9496113d6e2f9e6284f53b0a98df7dadb728df6b346c2a063108ebfb37ffb60e3dccba79647539b50209824d23003b098e8dea09c22ebbca071891222cc9310f989726406f47089d207f4c0028de4b74ead0f8b4802026d30c1f68abaf1e65be7286885a9d9611102ab2a4c32f3080b25da2906f640040bc593bbe97d2690f1d972b8cde89ba535aa32ae6067701f0948bcab1941bef88c09977f5f032651051e2833ac6bab60fa214c944f5c917dbc5666997633bf3b677184d046c8cdf5754d6e06e4a9b78c13e7ad4dec2ec6654b56f7cf3e1e8f587f5d4eb2f61694ba7cbb2d0952873723083a5dd93d383a4bbf542fe91a70c87e661978085ea6efc48e32ab08eab9cb81f7f0dd540f9849fa41917dc541243b441a67cf5459a2e29605828b5e837ebf2389fa4bb5462322f6bbd63d1a756602457cae067dccf4349092bb4a10f6e76eb5427d4f2cb78fb67344dfaf42fa05c180add5024fdc82c692ce65e1b0a41e3b2e1419a833b54fc227b302a765a54ade14d0bb16cdaf3cc8474085983056fd489e3d7ff228cec479b6877d6eef71ac241203638899b1851a3a5cda7a2d64a851fd06e5cfa054862fcb65c84024dcc2ee660ed356819acef33afcd776f5f4cb1673d54751128373710c9bd124350f6cfe7470062c905f5ed3e896326d634f4951c3aab7b0caec3d6cfde4fc80d39d94e6677e7798832dcc6561cf2ba735a047edfc41e7166fa2b1438578412b88357f5776896641f66d8a8b7dd44</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">输入密码查看</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>项目</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Spring</tag>
        <tag>加密</tag>
        <tag>项目</tag>
        <tag>MyBatis</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>windows11安装安卓子系统</title>
    <url>/2023/04/26/%E5%85%B6%E4%BB%96/windows11%E5%AE%89%E8%A3%85%E5%AE%89%E5%8D%93%E5%AD%90%E7%B3%BB%E7%BB%9F/</url>
    <content><![CDATA[<h1 id="Windows11-安装安卓子系统"><a href="#Windows11-安装安卓子系统" class="headerlink" title="Windows11 安装安卓子系统"></a>Windows11 安装安卓子系统</h1><p>下载文件 </p>
<p><code>MicrosoftCorporationII.WindowsSubsystemForAndroid_1.7.32815.0_neutral___4dg8wj792vbvbf7r67u.Msixbundle</code></p>
<p>链接：<a href="https://pan.baidu.com/s/1N80EgLr7u-SI9dNENJOihw">https://pan.baidu.com/s/1N80EgLr7u-SI9dNENJOihw</a><br>提取码：me5l</p>
<p>这个是 WSA  接下来要安装 WSA</p>
<p>按 win + r 打开运行 输入 cmd 确定</p>
<p>弹出命令行窗口后 输入下面的命令</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">add-appxpackage &quot;文件路径/MicrosoftCorporationII.WindowsSubsystemForAndroid_1.<span class="number">7</span>.<span class="number">32815</span>.<span class="number">0</span>_neutral___4dg8wj792vbvbf7r67u.Msixbundle&quot;</span><br></pre></td></tr></table></figure>

<p>文件路径要替换成文件存放的位置，注意不要丢失了文件的后缀</p>
<p>安装好之后在开始栏里面可以看见刚刚安装好的 WSA，点开之后点击文件可以启动，启动的时候可能会报错需要启动虚拟化平台，搜索控制面板，点击程序 - 启用或关闭 windows 功能，勾选 虚拟机平台，或者 H- yper (我也不记得叫什么名字了，我这都是虚拟机平台)，勾选后重启电脑，就可以打开 WSA 的文件管理了</p>
<p>但是还没有安装安卓软件，要怎么安装安卓软件呢</p>
<p>有一个 WSA 工具可以更方便的使用 WSA ，在微软商店中也提供了这个工具的下载，打开 Microsoft Store 搜索 <code>WSA 工具箱</code></p>
<p>如果没有搜到 下面提供了微软商店的下载链接</p>
<p><a href="https://apps.microsoft.com/store/detail/wsa-toolbox/9PPSP2MKVTGT?hl=en-us&gl=us">WSA Toolbox - Microsoft Store Apps</a></p>
<p>下载链接也失效了的话 这个是 github 的仓库地址 点击右边栏的 Releases 下载 latest 版本即可</p>
<p><a href="https://github.com/makazeu/WsaToolbox">makazeu&#x2F;WsaToolbox (github.com)</a></p>
<p>在 WSA 工作箱中根据提示 配置好（检查 ADB 连接到 WSA 这里要打开 WSA 的开发者模式）然后连接 WSA 就可以安装 APK 运行安装的安卓程序了</p>
]]></content>
      <tags>
        <tag>记录</tag>
      </tags>
  </entry>
  <entry>
    <title>软件推荐</title>
    <url>/2023/04/07/%E5%85%B6%E4%BB%96/%E5%85%B6%E4%BB%96/</url>
    <content><![CDATA[<h1 id="软件推荐"><a href="#软件推荐" class="headerlink" title="软件推荐"></a>软件推荐</h1><h2 id="Geek"><a href="#Geek" class="headerlink" title="Geek"></a>Geek</h2><p>卸载软件，小巧，好用，卸载之后还会清除注册表和其他痕迹</p>
<p><a href="https://geekuninstaller.com/">https://geekuninstaller.com/</a></p>
<h2 id="Ditto"><a href="#Ditto" class="headerlink" title="Ditto"></a>Ditto</h2><p>Windows 剪切板的拓展，Ctrl + &#96; 弹出</p>
<p><a href="https://apps.microsoft.com/store/detail/ditto-clipboard/9NBLGGH3ZBJQ?hl=zh-cn&gl=cn&rtc=1">https://apps.microsoft.com/store/detail/ditto-clipboard/9NBLGGH3ZBJQ?hl=zh-cn&amp;gl=cn&amp;rtc=1</a></p>
<span id="more"></span>

<h2 id="UTools"><a href="#UTools" class="headerlink" title="UTools"></a>UTools</h2><p>鼠标中键使用，有很多插件，比较喜欢鼠标选中之后弹出翻译的功能，截图也好用。</p>
<p><a href="https://www.u.tools/">https://www.u.tools/</a></p>
<h2 id="Typore"><a href="#Typore" class="headerlink" title="Typore"></a>Typore</h2><p>md文档编辑器，干净简洁，但是现在要钱了</p>
<p><a href="https://www.typoraio.cn/">https://www.typoraio.cn/</a></p>
<h1 id="IDEA-插件"><a href="#IDEA-插件" class="headerlink" title="IDEA 插件"></a>IDEA 插件</h1><h2 id="外观-x2F-使用类"><a href="#外观-x2F-使用类" class="headerlink" title="外观&#x2F;使用类"></a>外观&#x2F;使用类</h2><h3 id="One-Dark-Theme"><a href="#One-Dark-Theme" class="headerlink" title="One Dark Theme"></a>One Dark Theme</h3><p>黑色主题，颜色生动，看的很舒服</p>
<h3 id="Rainbow-Brackets"><a href="#Rainbow-Brackets" class="headerlink" title="Rainbow Brackets"></a>Rainbow Brackets</h3><p>彩色的括号，层次分明</p>
<h3 id="Key-Promoter-X"><a href="#Key-Promoter-X" class="headerlink" title="Key Promoter X"></a>Key Promoter X</h3><p>提示快捷键</p>
<h2 id="开发类"><a href="#开发类" class="headerlink" title="开发类"></a>开发类</h2><h3 id="Alibaba-java-Coding-Guidelines"><a href="#Alibaba-java-Coding-Guidelines" class="headerlink" title="Alibaba java Coding Guidelines"></a>Alibaba java Coding Guidelines</h3><p>阿里巴巴 java开发规范</p>
<h3 id="Check-Style-IDEA"><a href="#Check-Style-IDEA" class="headerlink" title="Check Style-IDEA"></a>Check Style-IDEA</h3><p>自动检查Java代码规范</p>
<h3 id="Easy-Javadoc"><a href="#Easy-Javadoc" class="headerlink" title="Easy Javadoc"></a>Easy Javadoc</h3><h3 id="GenerateAllSetter"><a href="#GenerateAllSetter" class="headerlink" title="GenerateAllSetter"></a>GenerateAllSetter</h3><p>生成对象的所有Set</p>
<h3 id="GenerateSerialVersionUID"><a href="#GenerateSerialVersionUID" class="headerlink" title="GenerateSerialVersionUID"></a>GenerateSerialVersionUID</h3><p>快捷生成序列化</p>
<h3 id="GitHub-Copilot"><a href="#GitHub-Copilot" class="headerlink" title="GitHub Copilot"></a>GitHub Copilot</h3><p>编程助手，结合了ChatGPT 快捷生成代码</p>
<h3 id="MyBatisX"><a href="#MyBatisX" class="headerlink" title="MyBatisX"></a>MyBatisX</h3><p>根据数据库生成MyBatis的model，service，controller类</p>
<h3 id="Sequence-Diagram"><a href="#Sequence-Diagram" class="headerlink" title="Sequence Diagram"></a>Sequence Diagram</h3><p>时序图</p>
]]></content>
      <categories>
        <category>其他</category>
      </categories>
      <tags>
        <tag>记录</tag>
        <tag>资源</tag>
      </tags>
  </entry>
  <entry>
    <title>报错</title>
    <url>/2023/05/06/%E5%85%B6%E4%BB%96/%E6%8A%A5%E9%94%99/</url>
    <content><![CDATA[<h1 id="java-No-serializer-found-for-class"><a href="#java-No-serializer-found-for-class" class="headerlink" title="java No serializer found for class"></a>java No serializer found for class</h1><h3 id="报错信息"><a href="#报错信息" class="headerlink" title="报错信息"></a>报错信息</h3><p>com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class edu.pyj.usercenter.common.response.Result and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS)</p>
<h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><p>Result 缺少 get 方法</p>
<span id="more"></span>

<h1 id="在实现单点登录时碰到的问题"><a href="#在实现单点登录时碰到的问题" class="headerlink" title="在实现单点登录时碰到的问题"></a>在实现单点登录时碰到的问题</h1><h2 id="写拦截器时-RedisTemplate-为null"><a href="#写拦截器时-RedisTemplate-为null" class="headerlink" title="写拦截器时 RedisTemplate 为null"></a>写拦截器时 RedisTemplate 为null</h2><p>原因：</p>
<p>springboot拦截器是在Bean实例化之前执行的</p>
<p>解决方法</p>
<ul>
<li>在拦截器配置类里面先实例化拦截器，然后再获取</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> LoginInterceptor <span class="title function_">getLoginInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LoginInterceptor</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        registry.addInterceptor(getLoginInterceptor()).addPathPatterns(<span class="string">&quot;/**&quot;</span>)</span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/user/login&quot;</span>)</span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/user/register&quot;</span>);</span><br><span class="line">        <span class="comment">// 排除路径</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>创建Redis工具类</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span><span class="comment">// 项目运行时就注入Spring容器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisUtils</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;Object, Object&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 赋值一个静态的redis</span></span><br><span class="line">    <span class="comment">// 调用时直接调用这个</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> RedisTemplate&lt;Object, Object&gt; redis;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span> <span class="comment">// 构造时赋值</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">redisTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">        redis = <span class="built_in">this</span>.redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">调用</span><br><span class="line">    RedisUtils.redis;</span><br></pre></td></tr></table></figure>

<h2 id="序列化问题"><a href="#序列化问题" class="headerlink" title="序列化问题"></a>序列化问题</h2><p>在 (User)redisTemplate.opsForValue().get(token) 时出现问题，不能将String cast to User，是存入数据时存入的是 String， 在 Controller 中误将数据写成了 String 存入</p>
<p>修改之后依然报错，</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">Could <span class="keyword">not</span> read JSON: Cannot construct instance of `edu.pyj.usercenter.model.response.UserLoginResponse` (no Creators, like default constructor, <span class="keyword">exist</span>): cannot deserialize from Object value (no delegate- or property-based Creator)</span><br><span class="line"> <span class="built_in">at</span> [Source: (byte[])&quot;&#123;&quot;@class&quot;:&quot;edu.pyj.usercenter.model.response.UserLoginResponse&quot;,&quot;id&quot;:<span class="number">2</span>,&quot;username&quot;:&quot;shangchun&quot;,&quot;userAccount&quot;:&quot;shangchun&quot;,&quot;avatarUrl&quot;:&quot;avatar/avatar1.jpg&quot;,&quot;gender&quot;:null,&quot;userPassword&quot;:null,&quot;phone&quot;:null,&quot;email&quot;:null,&quot;userStatus&quot;:<span class="number">0</span>,&quot;createTime&quot;:null,&quot;updateTime&quot;:null,&quot;isDelete&quot;:null,&quot;userRole&quot;:<span class="number">1</span>,&quot;token&quot;:&quot;<span class="number">857</span>f9be48eb540229c56adca329997c1&quot;&#125;&quot;; line: <span class="number">1</span>, column: <span class="number">65</span>]</span><br></pre></td></tr></table></figure>

<p>这是没有实现构造器添加构造器就可以了</p>
<p>还有几种处理方式：</p>
<ol>
<li>使用Jackson的注解：如果 <code>UserLoginResponse</code> 类已经有了构造函数，但没有默认构造函数或者构造函数不可见（private或protected），可以使用Jackson的注解来指定使用其他构造函数或工厂方法进行对象的创建。</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@JsonCreator</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">UserLoginResponse</span><span class="params">(<span class="meta">@JsonProperty(&quot;id&quot;)</span> <span class="type">int</span> id, <span class="meta">@JsonProperty(&quot;username&quot;)</span> String username, ...)</span> &#123;</span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>自定义反序列化器：如果上述方法仍然无法解决问题，你可以考虑自定义一个Jackson的反序列化器，用于将JSON转换为 <code>UserLoginResponse</code> 对象。你可以实现 <code>JsonDeserializer</code> 接口，并在 <code>deserialize</code> 方法中自定义对象的创建和属性的设置。</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserLoginResponseDeserializer</span> <span class="keyword">extends</span> <span class="title class_">JsonDeserializer</span>&lt;UserLoginResponse&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> UserLoginResponse <span class="title function_">deserialize</span><span class="params">(JsonParser jsonParser, DeserializationContext deserializationContext)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 自定义对象的创建和属性的设置逻辑</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后，将自定义的反序列化器与属性或类进行关联，在属性或类上使用 <code>@JsonDeserialize(using = UserLoginResponseDeserializer.class)</code> 注解。</p>
]]></content>
      <categories>
        <category>其他</category>
      </categories>
      <tags>
        <tag>记录</tag>
        <tag>报错解决</tag>
      </tags>
  </entry>
  <entry>
    <title>资源分享</title>
    <url>/2023/03/26/%E5%85%B6%E4%BB%96/%E8%B5%84%E6%BA%90/</url>
    <content><![CDATA[<h1 id="【架构师】零基础到精通——高可用"><a href="#【架构师】零基础到精通——高可用" class="headerlink" title="【架构师】零基础到精通——高可用"></a>【架构师】零基础到精通——高可用</h1><p> <a href="https://articles.zsxq.com/id_wfrwhhkqn8x3.html">https://articles.zsxq.com/id_wfrwhhkqn8x3.html</a></p>
<h1 id="数据结构可视化"><a href="#数据结构可视化" class="headerlink" title="数据结构可视化"></a>数据结构可视化</h1><p><a href="http://www.rmboot.com/Algorithms.html">http://www.rmboot.com/Algorithms.html</a></p>
<h1 id="Java常见设计模式总结"><a href="#Java常见设计模式总结" class="headerlink" title="Java常见设计模式总结"></a>Java常见设计模式总结</h1><p><a href="https://blog.csdn.net/a745233700/article/details/120371090?spm=1001.2014.3001.5502">https://blog.csdn.net/a745233700/article/details/120371090?spm=1001.2014.3001.5502</a></p>
<h1 id="图说设计模式"><a href="#图说设计模式" class="headerlink" title="图说设计模式"></a>图说设计模式</h1><p><a href="https://design-patterns.readthedocs.io/zh_CN/latest/">https://design-patterns.readthedocs.io/zh_CN/latest/</a></p>
<p><a href="https://chat.openai.com/chat/eec202d8-3609-45c3-85f6-e8092966ef00">技术 (openai.com)</a></p>
]]></content>
      <categories>
        <category>其他</category>
      </categories>
      <tags>
        <tag>记录</tag>
        <tag>资源</tag>
      </tags>
  </entry>
  <entry>
    <title>读书笔记-优势成长</title>
    <url>/2023/03/26/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E4%BC%98%E5%8A%BF%E6%88%90%E9%95%BF/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>读书笔记</category>
      </categories>
      <tags>
        <tag>个人成长</tag>
      </tags>
  </entry>
  <entry>
    <title>设计模式</title>
    <url>/2023/04/05/%E9%80%9A%E7%94%A8/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<p>《大话设计模式》、《人人都懂设计模式》记录</p>
<h1 id="软件开发原则"><a href="#软件开发原则" class="headerlink" title="软件开发原则"></a>软件开发原则</h1><h2 id="单一职责原则"><a href="#单一职责原则" class="headerlink" title="单一职责原则"></a>单一职责原则</h2><p><strong>对于一个类只有一个引起它变化的原因</strong></p>
<p>一个类只负责尽可能独立的一项功能，尽可能少的职责</p>
<p>优点：</p>
<p>（1）功能单一，职责清晰。</p>
<p>（2）增强可读性，方便维护。</p>
<p>缺点：</p>
<p>（1）拆分得太详细，类的数量会急剧增加。</p>
<p>（2）职责的度量没有统一的标准，需要根据项目实现情况而定。</p>
<span id="more"></span>

<h2 id="开放封闭原则"><a href="#开放封闭原则" class="headerlink" title="开放封闭原则"></a>开放封闭原则</h2><p><strong>对于扩展是开放的（Open for extension），对于更改是封闭的（Closed for modification）</strong></p>
<p>无论模块是多么的‘封闭’，都会存在一些无法对之封闭的变化。既然不可能完全封闭，设计人员必须对于他设计的模块应该对哪种变化封闭做出选择。他必须先猜测出最有可能发生的变化种类，然后构造抽象来隔离那些变化。但是预先猜测是很难的，所以等到变化发生时立即采取行动，创建抽象来隔离以后发生的同类变化。面对需求，对程序的改动是通过增加新代码进行的，而不是更改现有的代码。</p>
<p>开放-封闭原则是面向对象设计的核心所在。</p>
<h2 id="里氏代换原则"><a href="#里氏代换原则" class="headerlink" title="里氏代换原则"></a>里氏代换原则</h2><p><strong>子类型必须能够替换掉它们的父类型</strong> </p>
<blockquote>
<p>「一个软件实体如果使用的是一个父类的话，那么一定适用于其子类，而且它察觉不出父类对象和子类对象的区别。也就是说，在软件里面，把父类都替换成它的子类，程序的行为没有变化」</p>
</blockquote>
<p>只有当子类可以替换掉父类，软件单位的功能不受到影响时，父类才能真正被复用，而子类也能够在父类的基础上增加新的行为。</p>
<p>依赖倒转其实可以说是面向对象设计的标志，用哪种语言来编写程序不重要，如果编写时考虑的都是如何针对抽象编程而不是针对细节编程，即程序中所有的依赖关系都是终止于抽象类或者接口，那就是面向对象的设计，反之那就是过程化的设计了。</p>
<h2 id="依赖倒转原则"><a href="#依赖倒转原则" class="headerlink" title="依赖倒转原则"></a>依赖倒转原则</h2><p><strong>针对接口编程，不要对实现编程</strong></p>
<p><strong>依赖倒转原则</strong></p>
<ul>
<li>A．高层模块不应该依赖低层模块。两个都应该依赖抽象。</li>
<li>B．抽象不应该依赖细节。细节应该依赖抽象。</li>
</ul>
<blockquote>
<p>做新项目时，发现业务逻辑的高层模块都是一样的，但客户却希望使用不同的数据库或存储信息方式，这时就出现麻烦了。我们希望能再次利用这些高层模块，但高层模块都是与低层的访问数据库绑定在一起的，没办法复用这些高层模块，这就非常糟糕了。</p>
</blockquote>
<h2 id="迪米特法则"><a href="#迪米特法则" class="headerlink" title="迪米特法则"></a>迪米特法则</h2><blockquote>
<p>如果两个类不必彼此直接通信，那么这两个类就不应当发生直接的相互作用。如果其中一个类需要调用另一个类的某一个方法的话，可以通过第三者转发这个调用。</p>
<p>每一个逻辑单元应该对其他逻辑单元有最少的了解</p>
</blockquote>
<p>迪米特法则还有一个英文解释是：<strong>talk only to your immediate friends（只和直接的朋友交流）</strong>。什每个对象都必然会与其他的对象有耦合关系，两个对象之间的耦合就会成为朋友关系。而出现在成员变量、方法的输入输出参数中的类就是直接的朋友。迪米特法则要求只和直接的朋友通信，局部变量就不是直接朋友，陌生的类最好不要以局部变量的形式出现在类的内部。</p>
<p>迪米特法则根本思想，是强调了类之间的松耦合。类之间的耦合越弱，越有利于复用，一个处在弱耦合的类被修改，不会对有关系的类造成波及。</p>
<h3 id="狭义的迪米特法则的缺点"><a href="#狭义的迪米特法则的缺点" class="headerlink" title="狭义的迪米特法则的缺点"></a>狭义的迪米特法则的缺点</h3><ol>
<li>在系统里造出大量的小方法，这些方法仅仅是传递间接的调用，与系统的商务逻辑无关。</li>
<li>遵循类之间的迪米特法则会是一个系统的局部设计简化，因为每一个局部都不会和远距离的对象有直接的关联。但是，这也会造成系统的不同模块之间的通信效率降低，也会使系统的不同模块之间不容易协调。</li>
</ol>
<p>应用：</p>
<p>设计模式的门面&#x2F;外观模式（Facade）和中介模式（Mediator）</p>
<h1 id="合成／聚合复用原则"><a href="#合成／聚合复用原则" class="headerlink" title="合成／聚合复用原则"></a>合成／聚合复用原则</h1><blockquote>
<p>合成／聚合复用原则（CARP），尽量使用合成／聚合，尽量不要使用类继承。</p>
</blockquote>
<p>聚合表示一种弱的‘拥有’关系，体现的是A对象可以包含B对象，但B对象不是A对象的一部分；合成则是一种强的‘拥有’关系，体现了严格的部分和整体的关系，部分和整体的生命周期一样</p>
<p>优先使用对象的合成&#x2F;聚合将有助于保持每个类被封装，并被集中在单个任务上。这样类和类继承层次会保持较小规模，并且不太可能增长为不可控制的庞然大物</p>
<h1 id="设计模式分类"><a href="#设计模式分类" class="headerlink" title="设计模式分类"></a>设计模式分类</h1><ul>
<li><p>创建型模式</p>
<ul>
<li>单例模式</li>
<li>工厂方法模式(简单工厂、工厂、 抽象工厂)</li>
<li>原型模式（克隆模式）</li>
<li>建造者模式</li>
</ul>
</li>
<li><p>行为型模式：类或者对象之间交互的行为，如何划分职责、更好的完成任务</p>
<ul>
<li>策略模式</li>
<li>模板方法模式</li>
<li>观察者模式</li>
</ul>
</li>
<li><p>结构型模式：将类和对象结合在一起形成一个更强大的结构</p>
<ul>
<li>装饰模式</li>
<li>代理模式</li>
<li>外观模式</li>
<li>状态模式</li>
<li>适配器模式</li>
<li>迭代器模式</li>
<li>责任链模式</li>
</ul>
</li>
</ul>
<h1 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h1><blockquote>
<p>保证一个类仅有一个实例，并提供一个访问它的全局访问点。</p>
</blockquote>
<p>让类自身负责保存它的唯一实例。这个类可以保证没有其他实例可以被创建，并且它可以提供一个访问该实例的方法。</p>
<h2 id="设计要点"><a href="#设计要点" class="headerlink" title="设计要点"></a>设计要点</h2><p>只有一个类，类中由一个 getInstance() 方法获取这个类唯一的示例</p>
<h1 id="简单工厂模式"><a href="#简单工厂模式" class="headerlink" title="简单工厂模式"></a>简单工厂模式</h1><blockquote>
<p>定义一个类负责创建其他类的实例，通过参数决定创建哪个类的实例</p>
</blockquote>
<h2 id="设计要点-1"><a href="#设计要点-1" class="headerlink" title="设计要点"></a>设计要点</h2><p>工厂类：负责创建对象</p>
<p>产品类：创建的产品的抽象类</p>
<p>具体产品类：具体实现的产品</p>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>这是一个算法操作</p>
<p>工厂类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OperationFactory</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Operation02 <span class="title function_">createOperation</span><span class="params">(String mathChar)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (mathChar) &#123;</span><br><span class="line">            <span class="keyword">case</span>  <span class="string">&quot;+&quot;</span> :</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">AddOperation</span>();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;-&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SubOperation</span>();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;*&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MulOperation</span>();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;/&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DivOperation</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>产品类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Operation02</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> _numberA;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> _numberB;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">get_numberA</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> _numberA;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">set_numberA</span><span class="params">(<span class="type">double</span> _numberA)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>._numberA = _numberA;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">get_numberB</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> _numberB;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">set_numberB</span><span class="params">(<span class="type">double</span> _numberB)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>._numberB = _numberB;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getResult</span><span class="params">()</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>具体算法操作</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AddOperation</span> <span class="keyword">extends</span> <span class="title class_">Operation02</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getResult</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> get_numberA() + get_numberB();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SubOperation</span> <span class="keyword">extends</span> <span class="title class_">Operation02</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getResult</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> get_numberA() - get_numberB();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MulOperation</span> <span class="keyword">extends</span> <span class="title class_">Operation02</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getResult</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> get_numberA() * get_numberB();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DivOperation</span> <span class="keyword">extends</span> <span class="title class_">Operation02</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getResult</span><span class="params">()</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="keyword">if</span> (get_numberB() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Throwable</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> get_numberA() / get_numberB();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><p>产品有明显的继承关系，并且产品的类型不多</p>
<p>所有的产品有相同的方法和类似的属性，使用者希望通过参数获取到合适的对象</p>
<h1 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h1><p>工厂模式是对简单工厂模式的拓展优化，简单工厂模式中通过 switch case 方法创建对象，新增条件时增加 case 分支，违反了开闭原则。</p>
<p>针对这个问题，对工厂类进行抽象，分为工厂父类和不同的工厂子类，工厂子类创建不同的产品子类</p>
<p><strong>定义</strong></p>
<blockquote>
<p>定义一个创建对象（实例化对象）的接口，让子类来决定创建哪个类的实例。工厂方法使一个类的实例化延迟到其子类。</p>
</blockquote>
<h2 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h2><p>工厂父类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 工厂父类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OperationFactory2</span> &#123;</span><br><span class="line">    MathOperation <span class="title function_">createOperation</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>具体工厂类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 加法工厂</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AddOperationFactory</span> <span class="keyword">implements</span> <span class="title class_">OperationFactory2</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> MathOperation <span class="title function_">createOperation</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">AddOperation</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 减法工厂</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SubOperationFactory</span> <span class="keyword">implements</span> <span class="title class_">OperationFactory2</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> MathOperation <span class="title function_">createOperation</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SubOperation</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 乘法工厂</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MulOperationFactory</span> <span class="keyword">implements</span> <span class="title class_">OperationFactory2</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> MathOperation <span class="title function_">createOperation</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MulOperation</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 除法工厂</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DivOperationFactory</span> <span class="keyword">implements</span> <span class="title class_">OperationFactory2</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> MathOperation <span class="title function_">createOperation</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DivOperation</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="与简单工厂相比"><a href="#与简单工厂相比" class="headerlink" title="与简单工厂相比"></a>与简单工厂相比</h2><p>简单工厂实现三个不同的加法操作</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 简单工厂</span></span><br><span class="line"><span class="type">MathOperation</span> <span class="variable">operation1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OperationFactory</span>().createOperation(<span class="string">&quot;+&quot;</span>);</span><br><span class="line"><span class="type">MathOperation</span> <span class="variable">operation2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OperationFactory</span>().createOperation(<span class="string">&quot;+&quot;</span>);</span><br><span class="line"><span class="type">MathOperation</span> <span class="variable">operation3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OperationFactory</span>().createOperation(<span class="string">&quot;+&quot;</span>);</span><br><span class="line">operation1.set_numberA(<span class="number">1</span>);</span><br><span class="line">operation1.set_numberB(<span class="number">2</span>);</span><br><span class="line">System.out.println(operation1.getResult());</span><br><span class="line"></span><br><span class="line">operation2.set_numberA(<span class="number">2</span>);</span><br><span class="line">operation2.set_numberB(<span class="number">3</span>);</span><br><span class="line">System.out.println(operation2.getResult());</span><br><span class="line"></span><br><span class="line">operation3.set_numberA(<span class="number">4</span>);</span><br><span class="line">operation3.set_numberB(<span class="number">5</span>);</span><br><span class="line">System.out.println(operation3.getResult());</span><br></pre></td></tr></table></figure>

<p>当操作需要批量更改为其他时，<strong>需要修改三个createOperation中的参数</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">MathOperation</span> <span class="variable">operation1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OperationFactory</span>().createOperation(<span class="string">&quot;-&quot;</span>);</span><br><span class="line"><span class="type">MathOperation</span> <span class="variable">operation2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OperationFactory</span>().createOperation(<span class="string">&quot;-&quot;</span>);</span><br><span class="line"><span class="type">MathOperation</span> <span class="variable">operation3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OperationFactory</span>().createOperation(<span class="string">&quot;-&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>而工厂方法实现三个加法操作，当操作批量统一修改时，只需要更改创建的工厂类 <code> AddOperationFactory()</code> 即可</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 工厂方法</span></span><br><span class="line"><span class="type">OperationFactory2</span> <span class="variable">addFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AddOperationFactory</span>();</span><br><span class="line"><span class="type">MathOperation</span> <span class="variable">addOperation1</span> <span class="operator">=</span> addFactory.createOperation();</span><br><span class="line"><span class="type">MathOperation</span> <span class="variable">addOperation2</span> <span class="operator">=</span> addFactory.createOperation();</span><br><span class="line"><span class="type">MathOperation</span> <span class="variable">addOperation3</span> <span class="operator">=</span> addFactory.createOperation();</span><br><span class="line">addOperation1.set_numberA(<span class="number">1</span>);</span><br><span class="line">addOperation1.set_numberB(<span class="number">2</span>);</span><br><span class="line">System.out.println(addOperation1.getResult());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">addOperation2.set_numberA(<span class="number">2</span>);</span><br><span class="line">addOperation2.set_numberB(<span class="number">3</span>);</span><br><span class="line">System.out.println(addOperation2.getResult());</span><br><span class="line"></span><br><span class="line">addOperation3.set_numberA(<span class="number">4</span>);</span><br><span class="line">addOperation3.set_numberB(<span class="number">5</span>);</span><br><span class="line">System.out.println(addOperation3.getResult());</span><br></pre></td></tr></table></figure>





<h1 id="迭代器模式"><a href="#迭代器模式" class="headerlink" title="迭代器模式"></a>迭代器模式</h1><blockquote>
<p>提供一种方法顺序访问一个聚合对象中各个元素，而又不暴露该对象的内部表示。</p>
</blockquote>
<p>需要访问一个聚集对象，而且不管这些对象是什么都需要遍历的时候，应该考虑用迭代器模式。</p>
<p>为遍历不同的聚集结构提供如开始、下一个、是否结束、当前哪一项等统一的接口。</p>
<p>实际上在 Java 中的 foreach 就是这种模式的体现</p>
<h2 id="设计要点-2"><a href="#设计要点-2" class="headerlink" title="设计要点"></a>设计要点</h2><p>迭代器（Iterator）迭代抽象类，定义迭代器的统一接口比如得到开始对象，下一个对象，是否结束，当前对象</p>
<p>具体迭代器类，实现了迭代器的方法，具体迭代的方式</p>
<p>容器类：被迭代其中内容的类</p>
<p>设计迭代时需要注意容器的数据结构，需要确定迭代器中实现的功能</p>
<h1 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h1><blockquote>
<p>策略模式（Strategy）：它定义了算法家族，分别封装起来，让它们之间可以互相替换，此模式让算法的变化，不会影响到使用算法的客户。</p>
</blockquote>
<p>策略模式是一种定义一系列算法的方法。这些算法完成的都是相同的工作，只是实现不同，策略模式用相同的方法调用所有的算法，减少各种算法类与使用算法类之间的耦合。</p>
<p>策略模式的Strategy类层次为Context定义了一系列可供重用的算法和行为，提取出这些算法和行为中的公共功能。</p>
<p><strong>使用原因</strong></p>
<p>当不同的行为放在一个类中时，难以避免使用条件判断选择行为：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Strategy</span> &#123;</span><br><span class="line">    <span class="comment">//算法方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">AlgorithmInterface</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (条件A) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;算法A实现&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (条件B) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;算法B实现&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (条件C) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;算法C实现&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="设计要点-3"><a href="#设计要点-3" class="headerlink" title="设计要点"></a>设计要点</h2><p>策略模式主要有三个角色：</p>
<ol>
<li>上下文环境（Context）：承上启下的封装作用，屏蔽上层应用对策略的直接访问</li>
<li>策略的抽象（Strategy）：策略算法的抽象类，定义统一的接口，规定每个子类实现的方法</li>
<li>具体的策略实现</li>
</ol>
<h2 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h2><p>将行为封装在独立的Strategy子类，根据不同的子类调用行为方法消除条件语句。</p>
<p>调用不同算法的示例：</p>
<p><strong>策略抽象的算法类：</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 策略抽象的算法类</span></span><br><span class="line"><span class="comment"> * 定义所有支持的算法的公共接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Strategy</span> &#123;</span><br><span class="line">    <span class="comment">//算法方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">AlgorithmInterface</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>具体实现的算法：</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//具体算法A</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConcreteStrategyA</span> <span class="keyword">extends</span> <span class="title class_">Strategy</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//算法A实现方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">AlgorithmInterface</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;算法A实现&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//具体算法B</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConcreteStrategyB</span> <span class="keyword">extends</span> <span class="title class_">Strategy</span> &#123;</span><br><span class="line">    <span class="comment">//算法B实现方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">AlgorithmInterface</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;算法B实现&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//具体算法C</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConcreteStrategyC</span> <span class="keyword">extends</span> <span class="title class_">Strategy</span> &#123;</span><br><span class="line">    <span class="comment">//算法C实现方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">AlgorithmInterface</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;算法C实现&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>上下文环境，屏蔽了对具体算法的访问</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 上下文核心</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Context</span> &#123;</span><br><span class="line"></span><br><span class="line">    Strategy strategy;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Context</span><span class="params">(Strategy strategy)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.strategy = strategy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ContextInterface</span><span class="params">()</span> &#123;</span><br><span class="line">        strategy.AlgorithmInterface();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 由于实例化不同的策略，最终调用context.ContextInterface时的结果也不同</span></span><br><span class="line">        <span class="type">Context</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Context</span>(<span class="keyword">new</span> <span class="title class_">ConcreteStrategyA</span>());</span><br><span class="line">        context.ContextInterface();</span><br><span class="line">        context = <span class="keyword">new</span> <span class="title class_">Context</span>(<span class="keyword">new</span> <span class="title class_">ConcreteStrategyB</span>());</span><br><span class="line">        context.ContextInterface();</span><br><span class="line">        context = <span class="keyword">new</span> <span class="title class_">Context</span>(<span class="keyword">new</span> <span class="title class_">ConcreteStrategyC</span>());</span><br><span class="line">        context.ContextInterface();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="策略模式和简单工厂模式的结合"><a href="#策略模式和简单工厂模式的结合" class="headerlink" title="策略模式和简单工厂模式的结合"></a>策略模式和简单工厂模式的结合</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">Context</span><span class="params">(String type)</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;A&quot;</span>:</span><br><span class="line">            <span class="built_in">this</span>.strategy = <span class="keyword">new</span> <span class="title class_">ConcreteStrategyA</span>();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;B&quot;</span>:</span><br><span class="line">            <span class="built_in">this</span>.strategy = <span class="keyword">new</span> <span class="title class_">ConcreteStrategyB</span>();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;C&quot;</span>:</span><br><span class="line">            <span class="built_in">this</span>.strategy = <span class="keyword">new</span> <span class="title class_">ConcreteStrategyC</span>();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Context</span> <span class="variable">context1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Context</span>(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">    context1.ContextInterface();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在这种情况下，客户端只接触到了 Context 类， 没有接触到算法抽象类 Strategy，具体的算法彻底与客户端分离， 耦合更加降低。</p>
<h2 id="使用场景-1"><a href="#使用场景-1" class="headerlink" title="使用场景"></a>使用场景</h2><p>在不同情况下使用不同的业务规则，考虑使用策略模式处理这种变化</p>
<h1 id="建造者模式"><a href="#建造者模式" class="headerlink" title="建造者模式"></a>建造者模式</h1><blockquote>
<p>将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。</p>
</blockquote>
<p>核心思想是：将产品的创建过程与产品本身分离开来，使得创建过程更加清晰，能够更加精确地控制复杂对象的创建过程，让使用者可以用相同的创建过程创建不同的产品</p>
<p><strong>与工厂模式的区别</strong></p>
<p>工厂模式关注的是整个产品（整体对象）的生成，即成品的生成；</p>
<p>构建模式关注的是产品的创建过程和细节，一步一步地由各个子部件构建为一个成品。</p>
<h2 id="设计要点-4"><a href="#设计要点-4" class="headerlink" title="设计要点"></a>设计要点</h2><ol>
<li>建造类：抽象类，定义了构建的方法</li>
<li>具体建造类</li>
<li>指挥类：用于执行建造类中的构建方法，负责管理每一种产品的创建数量和顺序</li>
</ol>
<h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><ol>
<li>对象的创建过程复杂，将产品的创建过程和它本身的功能分离开来。</li>
<li>产品有很多种类，每个种类之间内部结构比较类似，但有很多差异；不同的创建顺序或不同的组合方式，将创建不同的产品。</li>
</ol>
<h1 id="模板方法模式"><a href="#模板方法模式" class="headerlink" title="模板方法模式"></a>模板方法模式</h1><blockquote>
<p>定义一个操作中的算法的骨架，而将一些步骤延迟到子类中。模板方法使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。</p>
</blockquote>
<p>模板方法模式是通过把不变行为搬移到父类，去除子类中的重复代码</p>
<h2 id="应用场景-1"><a href="#应用场景-1" class="headerlink" title="应用场景"></a>应用场景</h2><p>（1）对一些复杂的算法进行分割，将其算法中固定不变的部分设计为模板方法和父类具体方法，而一些可以改变的细节由其子类来实现。即一次性实现一个算法的不变部分，并将可变的行为留给子类来实现。</p>
<p>（2）各子类中公共的行为应被提取出来并集中到一个公共父类中以避免代码重复。</p>
<p>（3）需要通过子类来决定父类算法中某个步骤是否执行，实现子类对父类的反向控制。</p>
<h1 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h1><blockquote>
<p>为其他对象提供一种代理控制这个对象的访问，一个对象完成某项动作或任务，是通过对另一个对象的引用来完成的，这种模式叫代理模式。</p>
</blockquote>
<p>核心思想：</p>
<ul>
<li>使用一个额外的间接层来支持分散的、可控的、智能的访问。</li>
<li>增加一个包装和委托来保护真实的组件，以避免过度复杂。</li>
</ul>
<h2 id="设计要点-5"><a href="#设计要点-5" class="headerlink" title="设计要点"></a>设计要点</h2><p>代理模式中需要找到和区分三个角色</p>
<ol>
<li>主题：定义操作、活动、任务的接口</li>
<li>真实主题：真正完成操作、活动、任务的具体类</li>
<li>代理主题：代替真实主题完成操作、活动、任务的代理类</li>
</ol>
<h2 id="示例-3"><a href="#示例-3" class="headerlink" title="示例"></a>示例</h2><p>主题类定义了一个操作: request()</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 主题类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">request</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>真实主题类实现了 request() 方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 真实主题类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RealSubject</span> <span class="keyword">implements</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">request</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;RealSubject request&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>代理主题在进行代理真实主题的同时，进行了拓展请求前操作 preRequest() 和请求后操作 postRequest()</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 代理类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ProxySubject</span> <span class="keyword">implements</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> RealSubject realSubject;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">request</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (realSubject == <span class="literal">null</span>) &#123;</span><br><span class="line">            realSubject = <span class="keyword">new</span> <span class="title class_">RealSubject</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        preRequest();</span><br><span class="line">        realSubject.request();</span><br><span class="line">        postRequest();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">preRequest</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Proxy preRequest&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">postRequest</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Proxy postRequest&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="使用场景-2"><a href="#使用场景-2" class="headerlink" title="使用场景"></a>使用场景</h2><ol>
<li>远程代理，也就是为一个对象在不同的地址空间提供局部代表。这样可以隐藏一个对象存在于不同地址空间的事实</li>
<li>虚拟代理，不想或者不能直接引用一个对象时</li>
<li>安全代理，用来控制真实对象访问时的权限，一般用于对象应该有不同的访问权限的时候。</li>
<li>智能指引，是指当调用真实的对象时，代理处理另外一些事</li>
</ol>
<h1 id="责任链模式"><a href="#责任链模式" class="headerlink" title="责任链模式"></a>责任链模式</h1><blockquote>
<p>使多个对象都有机会处理请求，从而避免请求的发送者和接收者之间的耦合关系。将这个对象连成一条链，并沿着这条链传递该请求，直到有一个对象处理它为止。</p>
</blockquote>
<p>当客户提交一个请求时，请求是沿链传递直至有一个ConcreteHandler对象负责处理它。</p>
<h2 id="设计要点-6"><a href="#设计要点-6" class="headerlink" title="设计要点"></a>设计要点</h2><p>Handler 处理请求的接口，里面定义了下一个处理类和当前类的处理逻辑的接口</p>
<p>ConcreteHandler 具体处理者类，请求可以处理就处理，不能处理如果有后续的处理者就转发</p>
<p>（1）请求者与请求内容：确认谁要发送请求，发送请求的对象称为请求者。请求的内容通过发送请求时的参数进行传递。</p>
<p>（2）一个请求极有可能到了链的末端都得不到处理，或者因为没有正确配置而得不到处理</p>
<h2 id="使用场景-3"><a href="#使用场景-3" class="headerlink" title="使用场景"></a>使用场景</h2><p>有多个对象可以处理同一个请求，具体哪个对象处理该请求在运行时刻自动确定。</p>
<p>比如常见的审批流程。</p>
<h1 id="抽象工厂模式"><a href="#抽象工厂模式" class="headerlink" title="抽象工厂模式"></a>抽象工厂模式</h1><blockquote>
<p>提供一个创建一系列相关或相互依赖对象的接口，而无需指定它们具体的类。</p>
</blockquote>
<p>产品有多种实现时，将多种实现方式由多种工厂分配，这种时候将工厂再进行抽象</p>
<p><strong>优点</strong></p>
<p>解决了具有二级分类的产品的创建</p>
<p>易于交换产品系列，由于具体工厂类，在一个应用中只需要在初始化的时候出现一次，这就使得改变一个应用的具体工厂变得非常容易，它只需要改变具体工厂即可使用不同的产品配置。</p>
<p>具体的创建实例过程与客户端分离，客户端是通过它们的抽象接口操纵实例，产品的具体类名也被具体工厂的实现分离</p>
<p><strong>缺点</strong></p>
<p>增加新的产品，需要增加至少三个类（产品抽象类，实现产品方式一类，实现产品方式二类），修改至少三个工厂（工厂抽象类，工厂一类，工厂二类）</p>
<p>如果产品的分类超过二级，如三级甚至更多级，抽象工厂模式将会变得非常臃肿。<br>不能解决产品有多种分类、多种组合的问题。</p>
<h1 id="适配器模式"><a href="#适配器模式" class="headerlink" title="适配器模式"></a>适配器模式</h1><blockquote>
<p>将一个类的接口转换成客户希望的另外一个接口。Adapter模式使得原本由于接口不兼容而不能一起工作的那些类可以一起工作。</p>
</blockquote>
<p>系统的数据和行为都正确，但接口不符时，应该考虑用适配器，目的是使控制范围之外的一个原有对象与某个接口匹配。</p>
<p>适配器模式主要应用于希望复用一些现存的类，但是接口又与复用环境要求不一致的情况</p>
<h2 id="设计思想"><a href="#设计思想" class="headerlink" title="设计思想"></a>设计思想</h2><p>将一个对象经过包装或转换后使它符合指定的接口，使得调用方可以像使用接口的一般对象一样使用它。这一思想在生活中可谓处处可见，比如插座转换器，电压转换功能的变压器插座，最常见的各种转接头，如撤销耳机孔之后，需要用耳机线转接头转成Type-C接头，MiniDP转HDMI接头、HDMI转VGA线转换器、Micro USB转Type-C接头等。</p>
<p><strong>优点</strong></p>
<p>（1）可以让两个没有关联的类一起运行，起中间转换的作用。</p>
<p>（2）提高了类的复用率。</p>
<p>（3）灵活性好，不会破坏原有系统。</p>
<p><strong>缺点</strong></p>
<p>（1）如果原有系统没有设计好（如Target不是抽象类或接口，而是一个实体类），适配模式将很难实现。</p>
<p>（2）过多地使用适配器，容易使代码结构混乱，如明明看到调用的是 A 接口，内部调用的却是B接口的实现。</p>
<h2 id="设计要点-7"><a href="#设计要点-7" class="headerlink" title="设计要点"></a>设计要点</h2><p>目标类（Target） 期望的目标接口，要转换成的接口</p>
<p>源对象（Adaptee）需要转换的接口</p>
<p>适配器（Adapter）适配器，将源对象转换为目标对象</p>
<h2 id="应用场景-2"><a href="#应用场景-2" class="headerlink" title="应用场景"></a>应用场景</h2><p>使用现有的类，但是这些类的接口不符合系统的要求</p>
<h1 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h1><blockquote>
<p>观察者模式定义了一种一对多的依赖关系，让多个观察者对象同时监听某一个主题对象。这个主题对象在状态发生变化时，会通知所有观察者对象，使它们能够自动更新自己。</p>
</blockquote>
<h2 id="设计要点-8"><a href="#设计要点-8" class="headerlink" title="设计要点"></a>设计要点</h2><ol>
<li>观察者抽象类： 观察者抽象类定义了一个更新的接口，当被观察者发生变化时，调用观察者的更新方法</li>
<li>被观察者抽象类：被观察者抽象类定义了一个观察者集合，用于存储所有的观察者对象，同时定义了添加、删除观察者对象的方法，以及通知所有观察者的抽象方法</li>
<li>具体的观察者类</li>
<li>具体的被观察者类</li>
</ol>
<h2 id="示例-4"><a href="#示例-4" class="headerlink" title="示例"></a>示例</h2><p>观察者抽象类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>被观察者抽象类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line">  <span class="keyword">protected</span> List&lt;Observer&gt; observers = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">attach</span><span class="params">(Observer observer)</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">detach</span><span class="params">(Observer observer)</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">notifyObserver</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>具体的观察者类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConcreteObserver</span> <span class="keyword">extends</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="keyword">private</span> String observerState;</span><br><span class="line">  <span class="keyword">private</span> ConcreteSubject subject;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">ConcreteObserver</span><span class="params">(ConcreteSubject subject, String name)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.subject = subject;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">    observerState = subject.getSubjectState();</span><br><span class="line">    System.out.println(<span class="string">&quot;观察者&quot;</span> + name + <span class="string">&quot;的新状态是&quot;</span> + observerState);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>具体的被观察者类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConcreteSubject</span> <span class="keyword">extends</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> String subjectState;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">getSubjectState</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> subjectState;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSubjectState</span><span class="params">(String subjectState)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.subjectState = subjectState;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attach</span><span class="params">(Observer observer)</span> &#123;</span><br><span class="line">    observers.add(observer);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">detach</span><span class="params">(Observer observer)</span> &#123;</span><br><span class="line">    observers.remove(observer);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">notifyObserver</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (Observer observer : observers) &#123;</span><br><span class="line">      observer.update();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="应用场景-3"><a href="#应用场景-3" class="headerlink" title="应用场景"></a>应用场景</h2><ol>
<li>对象的创建过程复杂，将产品的创建过程和它本身的功能分离开来。</li>
<li>产品有很多种类，每个种类之间内部结构比较类似，但有很多差异；不同的创建顺序或不同的组合方式，将创建不同的产品。</li>
</ol>
<h1 id="外观模式"><a href="#外观模式" class="headerlink" title="外观模式"></a>外观模式</h1><blockquote>
<p>为子系统中的一组接口提供一个一致的界面，此模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。</p>
</blockquote>
<p>核心思想：用一个简单的接口来封装一个复杂的系统，使这个系统更容易使用。</p>
<h2 id="设计要点-9"><a href="#设计要点-9" class="headerlink" title="设计要点"></a>设计要点</h2><ol>
<li>外观类：为子系统封装统一的对外接口，这个类不负责具体的业务逻辑，具体的业务逻辑由子系统完成。</li>
<li>子系统：由多个类组成的具有某一特定功能的系统，为整个系统提供特定的功能或服务。</li>
</ol>
<h2 id="使用场景-4"><a href="#使用场景-4" class="headerlink" title="使用场景"></a>使用场景</h2><p>在设计初期阶段，应该要有意识的将不同的两个层分离。</p>
<p>在开发阶段，子系统往往因为不断的重构演化而变得越来越复杂，增加外观Facade可以提供一个简单的接口，减少它们之间的依赖。</p>
<p>第三，在维护一个遗留的大型系统时，可能这个系统已经非常难以维护和扩展了，为新系统开发一个外观Facade类，来提供设计粗糙或高度复杂的遗留代码的比较清晰简单的接口，让新系统与Facade对象交互，Facade与遗留代码交互所有复杂的工作</p>
<h1 id="桥接模式"><a href="#桥接模式" class="headerlink" title="桥接模式"></a>桥接模式</h1><blockquote>
<p>桥接模式（Bridge），将抽象部分与它的实现部分分离，使它们都可以独立地变化。</p>
</blockquote>
<p>抽象与它的实现分离的意思是由于实现的方式有多种，桥接模式的核心意图就是把这些实现独立出来，让它们各自地变化。这就使得每种实现的变化不会影响其他实现，从而达到应对变化的目的。</p>
<h2 id="设计思想-1"><a href="#设计思想-1" class="headerlink" title="设计思想"></a>设计思想</h2><p>实现系统可能有多角度分类，每一种分类都有可能变化，那么就把这种多角度分离出来让它们独立变化，减少它们之间的耦合。</p>
<h2 id="使用场景-5"><a href="#使用场景-5" class="headerlink" title="使用场景"></a>使用场景</h2><p>一个对象有多个维度独立变化，每添加一个维度导致大量类增加使系统臃肿</p>
<h1 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h1><blockquote>
<p>将一个请求封装为一个对象，从而使你可用不同的请求对客户进行参数化；对请求排队或记录请求日志，以及支持可撤销的操作。</p>
</blockquote>
<p>像点餐的订单一样，发送者（客户）与接收者（厨师）没有任何依赖关系，我们只要发送订单就能完成想要完成的任务，这种模式叫作命令模式。</p>
<p>命令模式的最大特点是将具体的命令与对应的接收者相关联（捆绑），使得调用方不用关心具体的行动执行者及如何执行，只要发送正确的命令，就能准确无误地完成相应的任务。</p>
<h2 id="设计要点-10"><a href="#设计要点-10" class="headerlink" title="设计要点"></a>设计要点</h2><p>命令模式中主要有四个角色</p>
<ol>
<li>命令（Command）：要完成的任务，或要执行的动作，这是命令模式的核心角色。</li>
<li>接收者（Receiver）：任务的具体实施方，或行动的真实执行者。</li>
<li>调度者（Invoker）：接收任务并发送命令，对接用户的需求并执行内部的命令，负责外部用户与内部命令的交互。</li>
<li>用户（Client）：命令的使用者，即真正的用户。</li>
</ol>
<h1 id="备忘录模式"><a href="#备忘录模式" class="headerlink" title="备忘录模式"></a>备忘录模式</h1><blockquote>
<p>在不破坏封装性的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态。这样以后就可将该对象恢复到原先保存的状态。</p>
</blockquote>
<p>将一个对象的状态或内容记录起来，在状态发生改变或出现异常时，可以恢复对象之前的状态或内容，这种模式叫做备忘模式。</p>
<h2 id="设计要点-11"><a href="#设计要点-11" class="headerlink" title="设计要点"></a>设计要点</h2><p>备忘模式中主要有三个角色</p>
<ol>
<li>发起人（Originator）：需要进行备份的对象。</li>
<li>备忘录（Memento）：备份的状态，即一个备份的存档。</li>
<li>备忘录管理者（Caretaker）：备份存档的管理者，由它负责与发起人的交互。</li>
</ol>
<h2 id="使用场景-6"><a href="#使用场景-6" class="headerlink" title="使用场景"></a>使用场景</h2><p>适用于功能比较复杂的，但需要维护或记录属性历史的类，或者需要保存的属性只是众多属性中的一小部分时，Originator可以根据保存的Memento信息还原到前一状态。</p>
<p>在某个系统中使用命令模式时，需要实现命令的撤销功能，那么命令模式可以使用备忘录模式来存储可撤销操作的状态</p>
<h1 id="组合模式"><a href="#组合模式" class="headerlink" title="组合模式"></a>组合模式</h1><blockquote>
<p>将对象组合成树形结构以表示‘部分-整体’的层次结构。组合模式使得用户对单个对象和组合对象的使用具有一致性。</p>
</blockquote>
<p>把对象组合成树形结构，以表示“部分-整体”的层次结构的设计模式就叫组合模式。</p>
<h2 id="设计要点-12"><a href="#设计要点-12" class="headerlink" title="设计要点"></a>设计要点</h2><p>两个角色</p>
<p>可以有子节点的复合组件 （Composite）</p>
<p>基础组件（Component）</p>
<h2 id="使用场景-7"><a href="#使用场景-7" class="headerlink" title="使用场景"></a>使用场景</h2><ol>
<li>对象之间有明显的层次关系</li>
<li>组合对象与单个对象具有相同的行为，统一的使用组合结构中的所有对象</li>
</ol>
<p>需求中是体现部分与整体层次的结构时，以及你希望用户可以忽略组合对象与单个对象的不同，统一地使用组合结构中的所有对象时，就应该考虑用组合模式了。</p>
<h1 id="状态模式"><a href="#状态模式" class="headerlink" title="状态模式"></a>状态模式</h1><blockquote>
<p>当一个对象的内在状态改变时允许改变其行为，这个对象看起来像是改变了其类。</p>
</blockquote>
<p>状态模式主要解决的是当控制一个对象状态转换的条件表达式过于复杂时的情况。把状态的判断逻辑转移到表示不同状态的一系列类当中，可以把复杂的判断逻辑简化。</p>
<p>核心思想：一个事物（对象）有多种状态，在不同的状态下所表现出来的行为和属性不一样。</p>
<h2 id="设计要点-13"><a href="#设计要点-13" class="headerlink" title="设计要点"></a>设计要点</h2><p>状态类（State）：封装 Context 特定状态下相关的行为</p>
<p>具体状态类（ConcreteState）</p>
<p>上下文环境类（Context）负责具体状态的切换</p>
<h2 id="使用场景-8"><a href="#使用场景-8" class="headerlink" title="使用场景"></a>使用场景</h2><p>一个对象的行为取决于它的状态，并且它在运行时可能经常改变它的状态，从而改变它的行为。</p>
<p>一个操作中含有庞大的多分支的条件语句，这些分支依赖于该对象的状态，且每一个分支的业务逻辑都非常复杂时，我们可以使用状态模式来拆分不同的分支逻辑，使程序有更好的可读性和可维护性。</p>
<h1 id="装饰模式"><a href="#装饰模式" class="headerlink" title="装饰模式"></a>装饰模式</h1><p>动态地给一个对象添加一些额外的职责，就增加功能来说，装饰模式比生成子类更为灵活。</p>
<p>装饰模式是为已有功能动态地添加更多功能的一种方式。</p>
<p><strong>装饰模式的优点：</strong></p>
<p>有效地把类的核心职责和装饰功能区分开了。而且可以去除相关类中重复的装饰逻辑。</p>
<h2 id="使用原因"><a href="#使用原因" class="headerlink" title="使用原因"></a>使用原因</h2><p>当系统需要新功能的时候，是向旧的类中添加新的代码。这些新加的代码通常装饰了原有类的核心职责或主要行为。但这种做法的问题在于，它们在主类中加入了新的字段，新的方法和新的逻辑，从而增加了主类的复杂度，而这些新加入的东西仅仅是为了满足一些只在某种特定情况下才会执行的特殊行为的需要。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * version 1</span></span><br><span class="line"><span class="comment"> * 装饰模式</span></span><br><span class="line"><span class="comment"> * 人穿衣服，给Person类添加穿某个衣服动作</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person1</span> &#123;</span><br><span class="line"></span><br><span class="line">    String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person1</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">wearTShirt</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;T恤 &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">wearJeans</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;牛仔裤 &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">wearJacket</span> <span class="params">()</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;夹克 &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//..... 等等穿方法 如果要增加装扮，需要修改person类 违背开闭原则</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;穿好了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Person1</span> <span class="variable">person1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person1</span>(<span class="string">&quot;上春&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;穿衣服：&quot;</span>);</span><br><span class="line">        person1.wearTShirt();</span><br><span class="line">        person1.wearJeans();</span><br><span class="line">        person1.wearJacket();</span><br><span class="line">        person1.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * version2</span></span><br><span class="line"><span class="comment"> * 提取穿衣服动作，抽象衣服 实现开闭原则</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person2</span> &#123;</span><br><span class="line">    String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person2</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(name + <span class="string">&quot; 穿好了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 做到了服饰与人 类的分离，但是这种方式衣服与人无关 只是将衣服一个一个词输出</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Person2</span> <span class="variable">person1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person2</span>(<span class="string">&quot;上春&quot;</span>);</span><br><span class="line">        <span class="type">TShirt</span> <span class="variable">ts</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TShirt</span>();</span><br><span class="line">        <span class="type">Jeans</span> <span class="variable">nzk</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jeans</span>();</span><br><span class="line">        <span class="type">Jacket</span> <span class="variable">jk</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jacket</span>();</span><br><span class="line">        System.out.println(<span class="string">&quot;穿衣服：&quot;</span>);</span><br><span class="line">        ts.show();</span><br><span class="line">        nzk.show();</span><br><span class="line">        jk.show();</span><br><span class="line">        person1.show();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 服饰父类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Finery</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">show</span> <span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TShirt</span> <span class="keyword">extends</span>  <span class="title class_">Finery</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;T恤 &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Jeans</span> <span class="keyword">extends</span>  <span class="title class_">Finery</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;牛仔裤 &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Jacket</span> <span class="keyword">extends</span>  <span class="title class_">Finery</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;夹克 &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>装饰模式提供了一个非常好的解决方案，它把每个要装饰的功能放在单独的类中，并让这个类包装它所要装饰的对象，因此，当需要执行特殊行为时，客户代码就可以在运行时根据需要有选择地、按顺序地使用装饰功能包装对象了。</p>
<h2 id="示例-5"><a href="#示例-5" class="headerlink" title="示例"></a>示例</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * version3</span></span><br><span class="line"><span class="comment"> * 装饰模式</span></span><br><span class="line"><span class="comment"> * 动态的给对象添加额外的职责，增加功能</span></span><br><span class="line"><span class="comment"> * 使用Person2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person3</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Person2</span> <span class="variable">person1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person2</span>(<span class="string">&quot;上春&quot;</span>);</span><br><span class="line">        <span class="type">TShirt</span> <span class="variable">tShirt</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TShirt</span>();</span><br><span class="line">        <span class="type">Jacket</span> <span class="variable">jk</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jacket</span>();</span><br><span class="line">        <span class="type">Jeans</span> <span class="variable">nzk</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jeans</span>();</span><br><span class="line"></span><br><span class="line">        tShirt.Decorate(person1);</span><br><span class="line">        jk.Decorate(tShirt);</span><br><span class="line">        nzk.Decorate(jk);</span><br><span class="line">        nzk.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Finery2</span> <span class="keyword">extends</span> <span class="title class_">Person2</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 被拓展的对象</span></span><br><span class="line">    Person2 person;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Decorate</span> <span class="params">(Person2 person)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.person = person;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 这里不是super.show 调用person.show 实际上是子类中调用实现对person.show方法的拓展</span></span><br><span class="line">        <span class="keyword">if</span>(person != <span class="literal">null</span>) &#123;</span><br><span class="line">            person.show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TShirt</span> <span class="keyword">extends</span> <span class="title class_">Finery2</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;T恤 &quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Jeans</span> <span class="keyword">extends</span> <span class="title class_">Finery2</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;牛仔裤 &quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Jacket</span> <span class="keyword">extends</span> <span class="title class_">Finery2</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;夹克 &quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="中介者模式"><a href="#中介者模式" class="headerlink" title="中介者模式"></a>中介者模式</h1><blockquote>
<p>用一个中介对象来封装一系列的对象交互。中介者使各对象不需要显式地相互引用，从而使其耦合松散，而且可以独立地改变它们之间的交互。</p>
</blockquote>
<h2 id="设计要点-14"><a href="#设计要点-14" class="headerlink" title="设计要点"></a>设计要点</h2><p>中介者（Mediator）</p>
<p>具体中介（ConcreteMediator） 如果不存在拓展 可以与 Mediator 合并</p>
<p>类A 类 B 互相不了解，通过 ConcreteMediator 交互</p>
<h1 id="访问者模式"><a href="#访问者模式" class="headerlink" title="访问者模式"></a>访问者模式</h1><blockquote>
<p>表示一个作用于某对象结构中的各元素的操作。它使你可以在不改变各元素的类的前提下定义作用于这些元素的新操作。</p>
</blockquote>
<p><strong>核心思想</strong></p>
<p>可以在不改变数据结构的前提下定义作用于这些元素的新操作。将数据结构和操作（或算法）进行解耦，而且能更方便地拓展新的操作</p>
<p>访问者模式适用于数据结构相对稳定的系统，目的是要把处理从数据结构分离出来，当系统有稳定的数据结构，又有易于变化的算法时，可以使用访问者模式，访问模式使得算法的操作变得容易</p>
<h2 id="设计要点-15"><a href="#设计要点-15" class="headerlink" title="设计要点"></a>设计要点</h2><p>对象结构（ObjectStructure）:数据结构的管理类，数据对象的一个容器，访问容器内的所有对象</p>
<p>访问者（Visitor）：访问者类，对数据节点进行访问操作</p>
<p>通常使用访问者的子类定义某一种操作用于操作数据对象，使用时将要操作的对象存入对象结构，在容器内遍历时访问操作对象</p>
<h1 id="原型模式"><a href="#原型模式" class="headerlink" title="原型模式"></a>原型模式</h1><blockquote>
<p>用原型实例指定创建对象的种类，并且通过拷贝这些原型创建新的对象。</p>
</blockquote>
<h2 id="设计要点-16"><a href="#设计要点-16" class="headerlink" title="设计要点"></a>设计要点</h2><p>核心就是一个 Clone 方法，Clone 方法的功能就是拷贝父本的所有属性：</p>
<ol>
<li>分配一块新的内存空间给新的拷贝对象</li>
<li>拷贝父本对象的所有属性</li>
</ol>
<h2 id="深拷贝与浅拷贝"><a href="#深拷贝与浅拷贝" class="headerlink" title="深拷贝与浅拷贝"></a>深拷贝与浅拷贝</h2><p>当拷贝父本有属性为引用对象时存在的问题。</p>
<p>采用浅拷贝是指只拷贝引用对象的指针，不拷贝引用类型对象指向的值。</p>
<p>深拷贝是指同时拷贝引用对象及其指向的指。</p>
]]></content>
      <categories>
        <category>技术</category>
        <category>设计模式</category>
      </categories>
      <tags>
        <tag>通用技术</tag>
        <tag>设计模式</tag>
      </tags>
  </entry>
  <entry>
    <title>关于 Redis 一些问题的记录</title>
    <url>/2023/05/08/redis/</url>
    <content><![CDATA[<p><strong>Redis 介绍 和 一些使用场景</strong></p>
<p>redis是一个高性能的nosql存储系统，可以用来实现缓存、会话管理、消息队列等场景，使用redis存储经常访问的数据，可以减少对数据库的访问，因为redis的QPS远超mysql，也提升了数据响应的速度，同时使用redis进行分布式session的存储，在使用多服务器时提供用户登录在不同的服务器上时不会出现重新登录的情况，以及session的同步数据共享</p>
<p><strong>Redis支持哪些常见的数据结构？它们各自适用于哪些场景？</strong></p>
<p>redis 有 五种基础的数据结构 string字符串，list列表，set无序集合，hash散列表，zset有序集合。 </p>
<p>string使用的比较常见的场景就是常规数据的缓存比如字符串，数字，图片，序列化后的对象，记录单位时间内用户的请求用来制作简单的限流，记录页面单位时间内的访问次数，还有用来做分布式锁，绝大部分对象用string存储也就够了。</p>
<p> set可以用来存储一些不能重复的数据比如文章用户点赞，可以用来对一些数据求交集并集和差集的场景还有可以用来获取随机的场景比如随机抽奖。 </p>
<p>hash可以用来存储频繁修改的数据。</p>
<p><strong>Redis提供了哪两种类型的持久化方式？它们之间有什么区别？在使用中，更倾向于选择哪一种持久化方式？</strong></p>
<p>redis 提供了 AOF、 RDB 还有  AOF和RDB两种方式混合的持久化机制，ROB是将数据以快照的形式存储在本地，配置中每一段时间发生了一定次数的修改就会创建快照保存数据副本，AOF是以操作日志的方式追加到文件，在每一条更改了redis中数据的命令之后，这条命令就会被写入AOF缓存区然后写入到AOF文件中，最后根据同步策略决定什么时候将数据保存到硬盘。</p>
<p>两种方式各有优缺点，rdb使用压缩后的二进制数据，保存某个时间的数据集，文件小，适合做数据的备份和灾难恢复，而且使用rdb还原数据，可以直接解析还原，速度很快，但是rdb的安全性不如aof，无法做到实时的持久化数据，生成rdb文件的过程虽然使用了子进程，不会阻塞主进程，但也会对机器的cpu和内存造成影响，造成服务器宕机。aof的文件存储时只写入一条命令，支持秒级恢复，操作更加迅速，是命令文件也更好的分析文件内容，但是在恢复时执行所有命令，恢复时间长，存储大量命令，文件也更大</p>
<p>所以一般使用AOF和RDB两种方式混合的持久化，可以保证保存的数据的安全性，以及RDB快照可以更快的进行数据库备份重启。</p>
<p><strong>Redis主从复制的原理，应用场景和好处。</strong></p>
<p>原理：AOF和RDB保证了数据的可用性，保证redis宕机时，数据不丢失或只丢失一点，但是如果服务器宕机了，在数据恢复这段时间是无法处理请求的，如果硬盘出现故障，数据也会丢失，主从复制就是为了处理这种情况，实际上就是多台redis服务器，同时保持数据的一致性和每台服务器的数据的读写操作，在分出redis主服务器和从服务器之后，从服务器会对主服务器进行同步，由从服务器向主服务器建立连接，然后主服务器执行bgsave生成一个rdb文件发送给从服务器，从服务器清除数据执行rdb文件完成同步，在之后每次新写命令发生时，主服务器也会发送到从服务器，以此完成同步。</p>
<p>使用主从复制可以实现读写分离，在读的频率大于写，单机redis无法应付大量的读请求时，利用从服务器进行读，主服务器进行写，可以缓解这种情况。</p>
<p>主从复制还提供了故障恢复能力，当主服务器宕机时，可以自动切换到从服务器来保证服务的可用性。</p>
]]></content>
      <tags>
        <tag>Redis</tag>
      </tags>
  </entry>
</search>
